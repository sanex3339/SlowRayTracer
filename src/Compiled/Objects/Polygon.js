var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RGBColor_1=require("../Color/RGBColor"),Vector_1=require("../Vector"),Polygon=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];t.call(this),this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(115,115,115)),0),this.type="surface",this.vertices=e}return __extends(e,t),e.prototype.getIntersectData=function(t){var r,o,c,i,s,n=this.getNormal();if(o=Vector_1.Vector.dot(this.vertices[0],n),s=Vector_1.Vector.dot(n,t.getDirection()),i=-Vector_1.Vector.dot(n,t.getOrigin())+o,r=i/s,!(r<RTMath_1.RTMath.EPSILON)){t.setDistance(r),c=t.getHitPoint();for(var a=0,l=this.vertices.length;l>a;a++){var u=this.vertices[a],h=void 0;if(h=a===l-1?this.vertices[0]:this.vertices[a+1],!e.checkSameClockDir(Vector_1.Vector.substract(h,u),Vector_1.Vector.substract(c,u),this.getNormal()))return}return r=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{point:c,distance:r}}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(){var t=Vector_1.Vector.substract(this.vertices[2],this.vertices[0]),e=Vector_1.Vector.substract(this.vertices[1],this.vertices[0]);return Vector_1.Vector.normalized(Vector_1.Vector.cross(t,e))},e.prototype.getType=function(){return this.type},e.prototype.setMaterial=function(t){return this.material=t,this},e.checkSameClockDir=function(t,e,r){var o=Vector_1.Vector.cross(e,t);return Vector_1.Vector.dot(o,r)>=0},e}(AbstractObject_1.AbstractObject);exports.Polygon=Polygon;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk9iamVjdHMvUG9seWdvbi5qcyIsIk9iamVjdHMvUG9seWdvbi50cyJdLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwicCIsImhhc093blByb3BlcnR5IiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiUlRNYXRoXzEiLCJyZXF1aXJlIiwiQWJzdHJhY3RPYmplY3RfMSIsIkNvbG9yXzEiLCJNYXRlcmlhbF8xIiwiUkdCQ29sb3JfMSIsIlZlY3Rvcl8xIiwiUG9seWdvbiIsIl9zdXBlciIsIlBvbHlnb24uY29uc3RydWN0b3IiLCJQb2x5Z29uLmdldEludGVyc2VjdERhdGEiLCJQb2x5Z29uLmdldE1hdGVyaWFsIiwiUG9seWdvbi5nZXROb3JtYWwiLCJQb2x5Z29uLmdldFR5cGUiLCJQb2x5Z29uLnNldE1hdGVyaWFsIiwiUG9seWdvbi5jaGVja1NhbWVDbG9ja0RpciIsIkFic3RyYWN0T2JqZWN0IiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsV0FBYUMsTUFBUUEsS0FBS0QsV0FBYyxTQUFVRSxFQUFHQyxHQUVyRCxRQUFTQyxLQUFPSCxLQUFLSSxZQUFjSCxFQURuQyxJQUFLLEdBQUlJLEtBQUtILEdBQU9BLEVBQUVJLGVBQWVELEtBQUlKLEVBQUVJLEdBQUtILEVBQUVHLEdBRW5ESixHQUFFTSxVQUFrQixPQUFOTCxFQUFhTSxPQUFPQyxPQUFPUCxJQUFNQyxFQUFHSSxVQUFZTCxFQUFFSyxVQUFXLEdBQUlKLEtDSG5GTyxTQUFBQyxRQUF1QixhQUN2QkMsaUJBQUFELFFBQStCLG9CQUMvQkUsUUFBQUYsUUFBc0Isa0JBQ3RCRyxXQUFBSCxRQUF5QixlQUV6QkksV0FBQUosUUFBeUIscUJBQ3pCSyxTQUFBTCxRQUF1QixhQUV2Qk0sUUFBQSxTQUFBQyxHQUtJRCxRQUFBQSxLREVJLElDRlNFLEdBQUFBLE1BQUFBLEVBQUFBLEVBQUFBLEVBQUFBLFVBQUFBLE9BQUFBLElBQUFBLEVBQUFBLEVBQUFBLEdBQUFBLFVBQUFBLEVBQ1RBLEdBQUFBLEtBQUFBLE1BSklBLEtBQUFBLFNBQXFCQSxHQUFJQSxZQUFBQSxTQUFTQSxHQUFJQSxTQUFBQSxNQUFNQSxHQUFJQSxZQUFBQSxTQUFTQSxJQUFLQSxJQUFLQSxNQUFPQSxHQUMxRUEsS0FBQUEsS0FBZUEsVUFLbkJBLEtBQUtBLFNBQVdBLEVBb0Z4QkYsTUE1RjZCQSxXQUFBQSxFQUFBQSxHQVdsQkEsRUFBQUEsVUFBQUEsaUJBQVBBLFNBQXlCQSxHQUNyQkcsR0FBSUEsR0FDQUEsRUFDQUEsRUFFQUEsRUFDQUEsRUFGQUEsRUFBaUJBLEtBQUtBLFdBVzFCQSxJQVBBQSxFQUF5QkEsU0FBQUEsT0FBT0EsSUFBSUEsS0FBS0EsU0FBU0EsR0FBSUEsR0FFdERBLEVBQWNBLFNBQUFBLE9BQU9BLElBQUlBLEVBQVFBLEVBQUlBLGdCQUNyQ0EsR0FBYUEsU0FBQUEsT0FBT0EsSUFBSUEsRUFBUUEsRUFBSUEsYUFBZUEsRUFFbkRBLEVBQVdBLEVBQVlBLElBRW5CQSxFQUFXQSxTQUFBQSxPQUFPQSxTQUF0QkEsQ0FJQUEsRUFBSUEsWUFBWUEsR0FFaEJBLEVBQVdBLEVBQUlBLGFBRWZBLEtBQUtBLEdBQUlBLEdBQUlBLEVBQUdBLEVBQWlCQSxLQUFLQSxTQUFTQSxPQUFZQSxFQUFKQSxFQUFvQkEsSUFBS0EsQ0FDNUVBLEdBQUlBLEdBQWtCQSxLQUFLQSxTQUFTQSxHQUNoQ0EsRUFBT0EsTUFRWEEsSUFMSUEsRUFEQUEsSUFBTUEsRUFBaUJBLEVBQ2JBLEtBQUtBLFNBQVNBLEdBRWRBLEtBQUtBLFNBQVNBLEVBQUlBLElBSTNCQSxFQUFRQSxrQkFDTEEsU0FBQUEsT0FBT0EsVUFBVUEsRUFBU0EsR0FDMUJBLFNBQUFBLE9BQU9BLFVBQVVBLEVBQVVBLEdBQzNCQSxLQUFLQSxhQUdUQSxPQVNSQSxNQUxBQSxHQUFXQSxTQUFBQSxPQUFPQSxVQUNkQSxFQUNBQSxFQUFJQSxhQUNOQSxhQUdFQSxNQUFPQSxFQUNQQSxTQUFBQSxLQUlESCxFQUFBQSxVQUFBQSxZQUFQQSxXQUNJSSxNQUFPQSxNQUFLQSxVQUdUSixFQUFBQSxVQUFBQSxVQUFQQSxXQUNJSyxHQUFJQSxHQUFnQkEsU0FBQUEsT0FBT0EsVUFBVUEsS0FBS0EsU0FBU0EsR0FBSUEsS0FBS0EsU0FBU0EsSUFDakVBLEVBQWdCQSxTQUFBQSxPQUFPQSxVQUFVQSxLQUFLQSxTQUFTQSxHQUFJQSxLQUFLQSxTQUFTQSxHQUVyRUEsT0FBT0EsVUFBQUEsT0FBT0EsV0FBV0EsU0FBQUEsT0FBT0EsTUFBTUEsRUFBT0EsS0FHMUNMLEVBQUFBLFVBQUFBLFFBQVBBLFdBQ0lNLE1BQU9BLE1BQUtBLE1BR1ROLEVBQUFBLFVBQUFBLFlBQVBBLFNBQW9CQSxHQUdoQk8sTUFGQUEsTUFBS0EsU0FBV0EsRUFFVEEsTUFHSVAsRUFBQUEsa0JBQWZBLFNBQWtDQSxFQUFpQkEsRUFBaUJBLEdBQ2hFUSxHQUFJQSxHQUFxQkEsU0FBQUEsT0FBT0EsTUFBTUEsRUFBU0EsRUFFL0NBLE9BQU9BLFVBQUFBLE9BQU9BLElBQUlBLEVBQVlBLElBQVdBLEdBRWpEUixHQTVGNkJMLGlCQUFBYyxlQUFoQkMsU0FBQVYsUUFBT0EiLCJmaWxlIjoiT2JqZWN0cy9Qb2x5Z29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgUkdCQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9SR0JDb2xvclwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9WZWN0b3JcIik7XG52YXIgUG9seWdvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9seWdvbigpIHtcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2ZXJ0aWNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDExNSwgMTE1LCAxMTUpKSwgMCk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdzdXJmYWNlJztcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UsIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIsIGhpdFBvaW50LCBub3JtYWwgPSB0aGlzLmdldE5vcm1hbCgpLCBudW1lcmF0b3IsIGRlbm9taW5hdG9yO1xuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yXzEuVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuICAgICAgICBkZW5vbWluYXRvciA9IFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0RGlyZWN0aW9uKCkpO1xuICAgICAgICBudW1lcmF0b3IgPSAtVmVjdG9yXzEuVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXRPcmlnaW4oKSkgKyBkaXN0YW5jZUZyb21BeGlzQ2VudGVyO1xuICAgICAgICBkaXN0YW5jZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJheS5zZXREaXN0YW5jZShkaXN0YW5jZSk7XG4gICAgICAgIGhpdFBvaW50ID0gcmF5LmdldEhpdFBvaW50KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZlcnRleDEgPSB0aGlzLnZlcnRpY2VzW2ldLCB2ZXJ0ZXgyID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGkgPT09IHZlcnRpY2VzTGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodmVydGV4MiwgdmVydGV4MSksIFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHZlcnRleDEpLCB0aGlzLmdldE5vcm1hbCgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkZ2UxID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSwgZWRnZTIgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZWQoVmVjdG9yXzEuVmVjdG9yLmNyb3NzKGVkZ2UxLCBlZGdlMikpO1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyID0gZnVuY3Rpb24gKHZlY3RvcjEsIHZlY3RvcjIsIG5vcm1hbCkge1xuICAgICAgICB2YXIgbm9ybWFsVjFWMiA9IFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsVjFWMiwgbm9ybWFsKSA+PSAwO1xuICAgIH07XG4gICAgcmV0dXJuIFBvbHlnb247XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuUG9seWdvbiA9IFBvbHlnb247XG4iLCJpbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgdmVydGljZXM6IFZlY3RvcltdO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMTE1LCAxMTUsIDExNSkpLCAwKTtcbiAgICBwcml2YXRlIHR5cGU6IHN0cmluZyA9ICdzdXJmYWNlJztcblxuICAgIGNvbnN0cnVjdG9yICguLi52ZXJ0aWNlczogVmVjdG9yW10pIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTogbnVtYmVyLFxuICAgICAgICAgICAgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yID0gdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIG51bWVyYXRvcjogbnVtYmVyLFxuICAgICAgICAgICAgZGVub21pbmF0b3I6IG51bWJlcjtcblxuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuXG4gICAgICAgIGRlbm9taW5hdG9yID0gVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXREaXJlY3Rpb24oKSk7XG4gICAgICAgIG51bWVyYXRvciA9IC1WZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldE9yaWdpbigpKSArIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXI7XG5cbiAgICAgICAgZGlzdGFuY2UgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmF5LnNldERpc3RhbmNlKGRpc3RhbmNlKTtcblxuICAgICAgICBoaXRQb2ludCA9IHJheS5nZXRIaXRQb2ludCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZlcnRleDE6IFZlY3RvciA9IHRoaXMudmVydGljZXNbaV0sXG4gICAgICAgICAgICAgICAgdmVydGV4MjogVmVjdG9yO1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gdmVydGljZXNMZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHZlcnRleDIsIHZlcnRleDEpLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCB2ZXJ0ZXgxKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXROb3JtYWwoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIGxldCBlZGdlMTogVmVjdG9yID0gVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSxcbiAgICAgICAgICAgIGVkZ2UyOiBWZWN0b3IgPSBWZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplZChWZWN0b3IuY3Jvc3MoZWRnZTEsIGVkZ2UyKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFR5cGUgKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNoZWNrU2FtZUNsb2NrRGlyICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IG5vcm1hbFYxVjI6IFZlY3RvciA9IFZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLmRvdChub3JtYWxWMVYyLCBub3JtYWwpID49IDA7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
