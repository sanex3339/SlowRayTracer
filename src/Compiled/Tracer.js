var Tracer=function(){function e(e,t,i){this.buffer=[],this.iteration=0,this.numberOfWorkers=6,this.screenWidth=250,this.screenHeight=250,this.ctx=e,this.screenWidth=t,this.screenHeight=i,this.image=e.getImageData(0,0,this.screenWidth,this.screenHeight),this.imageData=this.image.data;for(var r=0;r<this.screenWidth*this.screenHeight*3;r++)this.buffer.push(0)}return e.prototype.run=function(){for(var e=this,t=0;t<this.numberOfWorkers;t++){var i=new Worker("TracerWorker.js");i.onmessage=function(t){e.iteration++,console.log(e.iteration);for(var i=t.data,r=0;r<i.length;r++)e.buffer[r]+=i[r];for(var a=0,s=0;a<e.screenWidth*e.screenHeight*4;)e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255;e.image.data=e.imageData,e.ctx.putImageData(e.image,0,0)},i.postMessage([this.screenWidth,this.screenHeight])}},e}();exports.Tracer=Tracer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRyYWNlci50cyJdLCJuYW1lcyI6WyJUcmFjZXIiLCJUcmFjZXIuY29uc3RydWN0b3IiLCJUcmFjZXIucnVuIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsUUFBQSxXQVVJQSxRQUFBQSxHQUFhQSxFQUErQkEsRUFBc0JBLEdBVGxFQyxLQUFBQSxVQUlBQSxLQUFBQSxVQUFvQkEsRUFDcEJBLEtBQUFBLGdCQUFrQkEsRUFDbEJBLEtBQUFBLFlBQXNCQSxJQUN0QkEsS0FBQUEsYUFBdUJBLElBR25CQSxLQUFLQSxJQUFNQSxFQUNYQSxLQUFLQSxZQUFjQSxFQUNuQkEsS0FBS0EsYUFBZUEsRUFFcEJBLEtBQUtBLE1BQVFBLEVBQUlBLGFBQWFBLEVBQUdBLEVBQUdBLEtBQUtBLFlBQWFBLEtBQUtBLGNBQzNEQSxLQUFLQSxVQUFZQSxLQUFLQSxNQUFZQSxJQUVsQ0EsS0FBS0EsR0FBSUEsR0FBSUEsRUFBR0EsRUFBSUEsS0FBS0EsWUFBY0EsS0FBS0EsYUFBZUEsRUFBR0EsSUFDMURBLEtBQUtBLE9BQU9BLEtBQUtBLEdBa0M3QkQsTUE5QldBLEdBQUFBLFVBQUFBLElBQVBBLFdBQ0lFLElBQUtBLEdBRFRBLEdBQUFBLEtBQ2FBLEVBQUlBLEVBQUdBLEVBQUlBLEtBQUtBLGdCQUFpQkEsSUFBS0EsQ0FDM0NBLEdBQUlBLEdBQVNBLEdBQUlBLFFBQU9BLGtCQUV4QkEsR0FBT0EsVUFBWUEsU0FBQ0EsR0FDaEJBLEVBQUtBLFlBRUxBLFFBQVFBLElBQUlBLEVBQUtBLFVBSWpCQSxLQUFLQSxHQUZEQSxHQUFPQSxFQUFRQSxLQUVWQSxFQUFJQSxFQUFHQSxFQUFJQSxFQUFLQSxPQUFRQSxJQUM3QkEsRUFBS0EsT0FBT0EsSUFBTUEsRUFBS0EsRUFHM0JBLEtBQUlBLEdBQUlBLEdBQUlBLEVBQUdBLEVBQUlBLEVBQUdBLEVBQUlBLEVBQUtBLFlBQWNBLEVBQUtBLGFBQWVBLEdBQzdEQSxFQUFLQSxVQUFVQSxLQUEwQkEsSUFBbkJBLEVBQUtBLE9BQU9BLEtBQWFBLEVBQUtBLFVBQ3BEQSxFQUFLQSxVQUFVQSxLQUEwQkEsSUFBbkJBLEVBQUtBLE9BQU9BLEtBQWFBLEVBQUtBLFVBQ3BEQSxFQUFLQSxVQUFVQSxLQUEwQkEsSUFBbkJBLEVBQUtBLE9BQU9BLEtBQWFBLEVBQUtBLFVBQ3BEQSxFQUFLQSxVQUFVQSxLQUFPQSxHQUcxQkEsR0FBS0EsTUFBWUEsS0FBSUEsRUFBS0EsVUFFMUJBLEVBQUtBLElBQUlBLGFBQWFBLEVBQUtBLE1BQU9BLEVBQUdBLElBR3pDQSxFQUFPQSxhQUFhQSxLQUFLQSxZQUFhQSxLQUFLQSxpQkFHdkRGLElBckRhRyxTQUFBSCxPQUFNQSIsImZpbGUiOiJUcmFjZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVHJhY2VyIHtcbiAgICBidWZmZXI6IG51bWJlcltdID0gW107XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgaW1hZ2U6IGFueTtcbiAgICBpbWFnZURhdGE6IG51bWJlcltdO1xuICAgIGl0ZXJhdGlvbjogbnVtYmVyID0gMDtcbiAgICBudW1iZXJPZldvcmtlcnMgPSA2O1xuICAgIHNjcmVlbldpZHRoOiBudW1iZXIgPSAyNTA7XG4gICAgc2NyZWVuSGVpZ2h0OiBudW1iZXIgPSAyNTA7XG5cbiAgICBjb25zdHJ1Y3RvciAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHNjcmVlbldpZHRoPzogbnVtYmVyLCBzY3JlZW5IZWlnaHQ/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5pbWFnZSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5zY3JlZW5XaWR0aCwgdGhpcy5zY3JlZW5IZWlnaHQpO1xuICAgICAgICB0aGlzLmltYWdlRGF0YSA9IHRoaXMuaW1hZ2VbJ2RhdGEnXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NyZWVuV2lkdGggKiB0aGlzLnNjcmVlbkhlaWdodCAqIDM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCgwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW4gKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBuZXcgV29ya2VyKCdUcmFjZXJXb3JrZXIuanMnKTtcblxuICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24rKztcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXRlcmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2pdICs9IGRhdGFbal07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMCwgaiA9IDA7IGsgPCB0aGlzLnNjcmVlbldpZHRoICogdGhpcy5zY3JlZW5IZWlnaHQgKiA0Oykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gMjU1O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VbJ2RhdGEnXSA9IHRoaXMuaW1hZ2VEYXRhO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2UsIDAsIDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKFt0aGlzLnNjcmVlbldpZHRoLCB0aGlzLnNjcmVlbkhlaWdodF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
