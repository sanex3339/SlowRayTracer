var Tracer=function(){function e(e,t,i){this.buffer=[],this.emptyWorkers=[],this.iteration=0,this.numberOfWorkers=4,this.pixelsArray=[],this.screenWidth=250,this.screenHeight=250,this.ctx=e,this.screenWidth=t,this.screenHeight=i,this.image=e.getImageData(0,0,this.screenWidth,this.screenHeight),this.imageData=this.image.data;for(var r=0;r<this.screenWidth*this.screenHeight*3;r++)this.buffer.push(0)}return e.prototype.run=function(){for(var e=this,t=0;t<this.numberOfWorkers;t++){var i=new Worker("TracerWorker.js");i.onmessage=function(t){e.iteration++,console.log(e.iteration);for(var i=t.data,r=0;r<i.length;r++)e.buffer[r]+=i[r];for(var a=0,s=0;a<e.screenWidth*e.screenHeight*4;)e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255;e.image.data=e.imageData,e.ctx.putImageData(e.image,0,0)},i.postMessage([this.screenWidth,this.screenHeight])}},e}();exports.Tracer=Tracer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRyYWNlci50cyJdLCJuYW1lcyI6WyJUcmFjZXIiLCJUcmFjZXIuY29uc3RydWN0b3IiLCJUcmFjZXIucnVuIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsUUFBQSxXQWVJQSxRQUFBQSxHQUFhQSxFQUErQkEsRUFBc0JBLEdBZGxFQyxLQUFBQSxVQUVBQSxLQUFBQSxnQkFJQUEsS0FBQUEsVUFBb0JBLEVBQ3BCQSxLQUFBQSxnQkFBa0JBLEVBQ2xCQSxLQUFBQSxlQUNBQSxLQUFBQSxZQUFzQkEsSUFDdEJBLEtBQUFBLGFBQXVCQSxJQUtuQkEsS0FBS0EsSUFBTUEsRUFDWEEsS0FBS0EsWUFBY0EsRUFDbkJBLEtBQUtBLGFBQWVBLEVBRXBCQSxLQUFLQSxNQUFRQSxFQUFJQSxhQUFhQSxFQUFHQSxFQUFHQSxLQUFLQSxZQUFhQSxLQUFLQSxjQUMzREEsS0FBS0EsVUFBWUEsS0FBS0EsTUFBWUEsSUFFbENBLEtBQUtBLEdBQUlBLEdBQUlBLEVBQUdBLEVBQUlBLEtBQUtBLFlBQWNBLEtBQUtBLGFBQWVBLEVBQUdBLElBQzFEQSxLQUFLQSxPQUFPQSxLQUFLQSxHQWtDN0JELE1BOUJXQSxHQUFBQSxVQUFBQSxJQUFQQSxXQUNJRSxJQUFLQSxHQURUQSxHQUFBQSxLQUNhQSxFQUFJQSxFQUFHQSxFQUFJQSxLQUFLQSxnQkFBaUJBLElBQUtBLENBQzNDQSxHQUFJQSxHQUFTQSxHQUFJQSxRQUFPQSxrQkFFeEJBLEdBQU9BLFVBQVlBLFNBQUNBLEdBQ2hCQSxFQUFLQSxZQUVMQSxRQUFRQSxJQUFJQSxFQUFLQSxVQUlqQkEsS0FBS0EsR0FGREEsR0FBT0EsRUFBUUEsS0FFVkEsRUFBSUEsRUFBR0EsRUFBSUEsRUFBS0EsT0FBUUEsSUFDN0JBLEVBQUtBLE9BQU9BLElBQU1BLEVBQUtBLEVBRzNCQSxLQUFJQSxHQUFJQSxHQUFJQSxFQUFHQSxFQUFJQSxFQUFHQSxFQUFJQSxFQUFLQSxZQUFjQSxFQUFLQSxhQUFlQSxHQUM3REEsRUFBS0EsVUFBVUEsS0FBMEJBLElBQW5CQSxFQUFLQSxPQUFPQSxLQUFhQSxFQUFLQSxVQUNwREEsRUFBS0EsVUFBVUEsS0FBMEJBLElBQW5CQSxFQUFLQSxPQUFPQSxLQUFhQSxFQUFLQSxVQUNwREEsRUFBS0EsVUFBVUEsS0FBMEJBLElBQW5CQSxFQUFLQSxPQUFPQSxLQUFhQSxFQUFLQSxVQUNwREEsRUFBS0EsVUFBVUEsS0FBT0EsR0FHMUJBLEdBQUtBLE1BQVlBLEtBQUlBLEVBQUtBLFVBRTFCQSxFQUFLQSxJQUFJQSxhQUFhQSxFQUFLQSxNQUFPQSxFQUFHQSxJQUd6Q0EsRUFBT0EsYUFBYUEsS0FBS0EsWUFBYUEsS0FBS0EsaUJBR3ZERixJQTFEYUcsU0FBQUgsT0FBTUEiLCJmaWxlIjoiVHJhY2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFRyYWNlciB7XG4gICAgYnVmZmVyOiBudW1iZXJbXSA9IFtdO1xuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIGVtcHR5V29ya2VycyA9IFtdO1xuICAgIGRvbmVDYWxsYmFjazogKCkgPT4gdm9pZDtcbiAgICBpbWFnZTogYW55O1xuICAgIGltYWdlRGF0YTogbnVtYmVyW107XG4gICAgaXRlcmF0aW9uOiBudW1iZXIgPSAwO1xuICAgIG51bWJlck9mV29ya2VycyA9IDQ7XG4gICAgcGl4ZWxzQXJyYXk6IGFueVtdID0gW107XG4gICAgc2NyZWVuV2lkdGg6IG51bWJlciA9IDI1MDtcbiAgICBzY3JlZW5IZWlnaHQ6IG51bWJlciA9IDI1MDtcbiAgICBzdGFydFRpbWU6IGFueTtcbiAgICBlbmRUaW1lOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvciAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHNjcmVlbldpZHRoPzogbnVtYmVyLCBzY3JlZW5IZWlnaHQ/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5pbWFnZSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5zY3JlZW5XaWR0aCwgdGhpcy5zY3JlZW5IZWlnaHQpO1xuICAgICAgICB0aGlzLmltYWdlRGF0YSA9IHRoaXMuaW1hZ2VbJ2RhdGEnXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NyZWVuV2lkdGggKiB0aGlzLnNjcmVlbkhlaWdodCAqIDM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCgwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW4gKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBuZXcgV29ya2VyKCdUcmFjZXJXb3JrZXIuanMnKTtcblxuICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24rKztcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXRlcmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2pdICs9IGRhdGFbal07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMCwgaiA9IDA7IGsgPCB0aGlzLnNjcmVlbldpZHRoICogdGhpcy5zY3JlZW5IZWlnaHQgKiA0Oykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gMjU1O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VbJ2RhdGEnXSA9IHRoaXMuaW1hZ2VEYXRhO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2UsIDAsIDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKFt0aGlzLnNjcmVlbldpZHRoLCB0aGlzLnNjcmVlbkhlaWdodF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
