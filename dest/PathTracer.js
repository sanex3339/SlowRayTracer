(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.PathTracer = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Tracer_1=require("./Tracer"),screenWidth=250,screenHeight=250,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),image,tracer;canvas.width=screenWidth,canvas.height=screenHeight,document.body.appendChild(canvas),tracer=new Tracer_1.Tracer(ctx,screenWidth,screenHeight),tracer.run(),image=canvas.toDataURL("image/png"),document.write("<img src='"+image+"' />");


},{"./Tracer":2}],2:[function(require,module,exports){
var Tracer=function(){function e(e,t,r){this.currentX=0,this.currentY=0,this.emptyWorkers=[],this.numberOfWorkers=16,this.pixelsArray=[],this.screenWidth=250,this.screenHeight=250,this.ctx=e,this.screenWidth=t,this.screenHeight=r,this.screenWidth<this.numberOfWorkers&&(this.numberOfWorkers=this.screenWidth-2),this.image=e.getImageData(0,0,this.screenWidth,this.screenHeight),this.imageData=this.image.data;for(var i=0;i<this.numberOfWorkers;i++)this.emptyWorkers.push(new Worker("TracerWorker.js"));for(var s=0;s<this.screenHeight;s++)for(var a=0;a<this.screenWidth;a++)this.pixelsArray.push({x:a,y:s})}return e.prototype.createWorker=function(e,t,r){var i=this;e.onmessage=function(t){var r=t.data;return"string"==typeof r&&(r=JSON.parse(r)),i.imageData[r[1]*i.screenWidth*4+4*r[0]]=r[2],i.imageData[r[1]*i.screenWidth*4+(4*r[0]+1)]=r[3],i.imageData[r[1]*i.screenWidth*4+(4*r[0]+2)]=r[4],i.imageData[r[1]*i.screenWidth*4+(4*r[0]+3)]=255,i.emptyWorkers.push(e),0===i.pixelsArray.length&&i.emptyWorkers.length===i.numberOfWorkers?i.doneCallback():void(0!==i.pixelsArray.length&&i.pixelManager())},e.postMessage([this.screenWidth,this.screenHeight,t,r])},e.prototype.pixelManager=function(e){var t,r;e&&(this.doneCallback=e);for(var i=0,s=this.emptyWorkers.length;s>i;i++)t=this.emptyWorkers.shift(),r=this.pixelsArray.shift(),console.log(r.y,r.x),this.createWorker(t,r.x,r.y),r.x===this.screenWidth-1&&(this.image.data=this.imageData,this.ctx.putImageData(this.image,0,0))},e.prototype.run=function(){var e=this;this.startTime=new Date,this.pixelManager(function(){e.image.data=e.imageData,e.ctx.putImageData(e.image,0,0),e.endTime=new Date,console.log((e.endTime-e.startTime)/1e3+" секунд")})},e}();exports.Tracer=Tracer;


},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvc291cmNlL1BhdGhUcmFjZXIudHMiLCIvc291cmNlL1RyYWNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLEdBQUEsVUFBQSxRQUF1QixZQUVqQixZQUFjLElBQ2hCLGFBQWUsSUFFZixPQUE0QixTQUFTLGNBQWMsVUFDbkQsSUFBZ0MsT0FBTyxXQUFXLE1BQ2xELE1BQ0EsTUFFSixRQUFPLE1BQVEsWUFDZixPQUFPLE9BQVMsYUFDaEIsU0FBUyxLQUFLLFlBQVksUUFFMUIsT0FBUyxHQUFJLFVBQUEsT0FBTyxJQUFLLFlBQWEsY0FDdEMsT0FBTyxNQUVQLE1BQVEsT0FBTyxVQUFVLGFBQ3pCLFNBQVMsTUFBTSxhQUFjLE1BQUs7Ozs7QUNsQmxDLEdBQUEsUUFBQSxXQWVJLFFBQUEsR0FBYSxFQUErQixFQUFzQixHQWJsRSxLQUFBLFNBQW1CLEVBQ25CLEtBQUEsU0FBbUIsRUFDbkIsS0FBQSxnQkFJQSxLQUFBLGdCQUFrQixHQUNsQixLQUFBLGVBQ0EsS0FBQSxZQUFzQixJQUN0QixLQUFBLGFBQXVCLElBS25CLEtBQUssSUFBTSxFQUNYLEtBQUssWUFBYyxFQUNuQixLQUFLLGFBQWUsRUFFaEIsS0FBSyxZQUFjLEtBQUssa0JBQ3hCLEtBQUssZ0JBQWtCLEtBQUssWUFBYyxHQUc5QyxLQUFLLE1BQVEsRUFBSSxhQUFhLEVBQUcsRUFBRyxLQUFLLFlBQWEsS0FBSyxjQUMzRCxLQUFLLFVBQVksS0FBSyxNQUFZLElBRWxDLEtBQUssR0FBSSxHQUFJLEVBQUcsRUFBSSxLQUFLLGdCQUFpQixJQUN0QyxLQUFLLGFBQWEsS0FBSyxHQUFJLFFBQU8sbUJBR3RDLEtBQUssR0FBSSxHQUFJLEVBQUcsRUFBSSxLQUFLLGFBQWMsSUFDbkMsSUFBSyxHQUFJLEdBQUksRUFBRyxFQUFJLEtBQUssWUFBYSxJQUNsQyxLQUFLLFlBQVksTUFDYixFQUFBLEVBQ0EsRUFBQSxJQW1FcEIsTUE3RFksR0FBQSxVQUFBLGFBQVIsU0FBc0IsRUFBUSxFQUFHLEdBQWpDLEdBQUEsR0FBQSxJQUNJLEdBQU8sVUFBWSxTQUFDLEdBQ2hCLEdBQUksR0FBTyxFQUFRLElBYW5CLE9BWG9CLGdCQUFYLEtBQ0wsRUFBTyxLQUFLLE1BQU0sSUFHdEIsRUFBSyxVQUFXLEVBQUssR0FBSyxFQUFLLFlBQWMsRUFBZ0IsRUFBVixFQUFLLElBQVcsRUFBSyxHQUN4RSxFQUFLLFVBQVcsRUFBSyxHQUFLLEVBQUssWUFBYyxHQUFnQixFQUFWLEVBQUssR0FBUyxJQUFNLEVBQUssR0FDNUUsRUFBSyxVQUFXLEVBQUssR0FBSyxFQUFLLFlBQWMsR0FBZ0IsRUFBVixFQUFLLEdBQVMsSUFBTSxFQUFLLEdBQzVFLEVBQUssVUFBVyxFQUFLLEdBQUssRUFBSyxZQUFjLEdBQWdCLEVBQVYsRUFBSyxHQUFTLElBQU0sSUFFdkUsRUFBSyxhQUFhLEtBQUssR0FFUyxJQUE1QixFQUFLLFlBQVksUUFBZ0IsRUFBSyxhQUFhLFNBQVcsRUFBSyxnQkFDNUQsRUFBSyxvQkFHZ0IsSUFBNUIsRUFBSyxZQUFZLFFBQ2pCLEVBQUssaUJBSWIsRUFBTyxhQUFhLEtBQUssWUFBYSxLQUFLLGFBQWMsRUFBRyxLQUd4RCxFQUFBLFVBQUEsYUFBUixTQUFzQixHQUNsQixHQUFJLEdBQ0EsQ0FFQSxLQUNBLEtBQUssYUFBZSxFQUd4QixLQUFLLEdBQUksR0FBSSxFQUFHLEVBQXFCLEtBQUssYUFBYSxPQUFZLEVBQUosRUFBd0IsSUFDbkYsRUFBZSxLQUFLLGFBQWEsUUFDakMsRUFBUyxLQUFLLFlBQVksUUFFMUIsUUFBUSxJQUFJLEVBQVUsRUFBRyxFQUFVLEdBRW5DLEtBQUssYUFBYSxFQUFjLEVBQVUsRUFBRyxFQUFVLEdBRW5ELEVBQVUsSUFBTSxLQUFLLFlBQWMsSUFDbkMsS0FBSyxNQUFZLEtBQUksS0FBSyxVQUMxQixLQUFLLElBQUksYUFBYSxLQUFLLE1BQU8sRUFBRyxLQUsxQyxFQUFBLFVBQUEsSUFBUCxXQUFBLEdBQUEsR0FBQSxJQUNJLE1BQUssVUFBWSxHQUFJLE1BRXJCLEtBQUssYUFBYSxXQUNkLEVBQUssTUFBWSxLQUFJLEVBQUssVUFDMUIsRUFBSyxJQUFJLGFBQWEsRUFBSyxNQUFPLEVBQUcsR0FFckMsRUFBSyxRQUFVLEdBQUksTUFDbkIsUUFBUSxLQUFRLEVBQUssUUFBVSxFQUFLLFdBQWEsSUFBSSxjQUdqRSxJQXRHYSxTQUFBLE9BQU0iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgVHJhY2VyIH0gZnJvbSBcIi4vVHJhY2VyXCI7XG5cbmNvbnN0IHNjcmVlbldpZHRoID0gMjUwLFxuICAgIHNjcmVlbkhlaWdodCA9IDI1MDtcblxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXG4gICAgaW1hZ2U6IGFueSxcbiAgICB0cmFjZXI6IFRyYWNlcjtcblxuY2FudmFzLndpZHRoID0gc2NyZWVuV2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG50cmFjZXIgPSBuZXcgVHJhY2VyKGN0eCwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCk7XG50cmFjZXIucnVuKCk7XG5cbmltYWdlID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbmRvY3VtZW50LndyaXRlKGA8aW1nIHNyYz1cXCcke2ltYWdlfVxcJyAvPmApO1xuIiwiZXhwb3J0IGNsYXNzIFRyYWNlciB7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgY3VycmVudFg6IG51bWJlciA9IDA7XG4gICAgY3VycmVudFk6IG51bWJlciA9IDA7XG4gICAgZW1wdHlXb3JrZXJzID0gW107XG4gICAgZG9uZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xuICAgIGltYWdlOiBhbnk7XG4gICAgaW1hZ2VEYXRhOiBudW1iZXJbXTtcbiAgICBudW1iZXJPZldvcmtlcnMgPSAxNjtcbiAgICBwaXhlbHNBcnJheTogYW55W10gPSBbXTtcbiAgICBzY3JlZW5XaWR0aDogbnVtYmVyID0gMjUwO1xuICAgIHNjcmVlbkhlaWdodDogbnVtYmVyID0gMjUwO1xuICAgIHN0YXJ0VGltZTogYW55O1xuICAgIGVuZFRpbWU6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yIChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2NyZWVuV2lkdGg/OiBudW1iZXIsIHNjcmVlbkhlaWdodD86IG51bWJlcikge1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICBpZiAodGhpcy5zY3JlZW5XaWR0aCA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlck9mV29ya2VycyA9IHRoaXMuc2NyZWVuV2lkdGggLSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbWFnZSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5zY3JlZW5XaWR0aCwgdGhpcy5zY3JlZW5IZWlnaHQpO1xuICAgICAgICB0aGlzLmltYWdlRGF0YSA9IHRoaXMuaW1hZ2VbJ2RhdGEnXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZW1wdHlXb3JrZXJzLnB1c2gobmV3IFdvcmtlcignVHJhY2VyV29ya2VyLmpzJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnNjcmVlbkhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuc2NyZWVuV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxzQXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHgsXG4gICAgICAgICAgICAgICAgICAgIHlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlV29ya2VyICh3b3JrZXIsIHgsIHkpIHtcbiAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcblxuICAgICAgICAgICAgaWYodHlwZW9mKGRhdGEpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmltYWdlRGF0YVsoZGF0YVsxXSAqIHRoaXMuc2NyZWVuV2lkdGggKiA0KSArIChkYXRhWzBdICogNCldID0gZGF0YVsyXTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhWyhkYXRhWzFdICogdGhpcy5zY3JlZW5XaWR0aCAqIDQpICsgKGRhdGFbMF0gKiA0ICsgMSldID0gZGF0YVszXTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhWyhkYXRhWzFdICogdGhpcy5zY3JlZW5XaWR0aCAqIDQpICsgKGRhdGFbMF0gKiA0ICsgMildID0gZGF0YVs0XTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhWyhkYXRhWzFdICogdGhpcy5zY3JlZW5XaWR0aCAqIDQpICsgKGRhdGFbMF0gKiA0ICsgMyldID0gMjU1O1xuXG4gICAgICAgICAgICB0aGlzLmVtcHR5V29ya2Vycy5wdXNoKHdvcmtlcik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBpeGVsc0FycmF5Lmxlbmd0aCA9PT0gMCAmJiB0aGlzLmVtcHR5V29ya2Vycy5sZW5ndGggPT09IHRoaXMubnVtYmVyT2ZXb3JrZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9uZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBpeGVsc0FycmF5Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxNYW5hZ2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKFt0aGlzLnNjcmVlbldpZHRoLCB0aGlzLnNjcmVlbkhlaWdodCwgeCwgeV0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGl4ZWxNYW5hZ2VyIChjYWxsYmFjaz86ICgpID0+IHZvaWQpIHtcbiAgICAgICAgbGV0IGFjdGl2ZVdvcmtlcixcbiAgICAgICAgICAgIHBpeGVsczogYW55W107XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgdyA9IDAsIGVtcHR5V29ya2Vyc0xlbmd0aCA9IHRoaXMuZW1wdHlXb3JrZXJzLmxlbmd0aDsgdyA8IGVtcHR5V29ya2Vyc0xlbmd0aDsgdysrKSB7XG4gICAgICAgICAgICBhY3RpdmVXb3JrZXIgPSB0aGlzLmVtcHR5V29ya2Vycy5zaGlmdCgpO1xuICAgICAgICAgICAgcGl4ZWxzID0gdGhpcy5waXhlbHNBcnJheS5zaGlmdCgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwaXhlbHNbJ3knXSwgcGl4ZWxzWyd4J10pO1xuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVdvcmtlcihhY3RpdmVXb3JrZXIsIHBpeGVsc1sneCddLCBwaXhlbHNbJ3knXSk7XG5cbiAgICAgICAgICAgIGlmIChwaXhlbHNbJ3gnXSA9PT0gdGhpcy5zY3JlZW5XaWR0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlWydkYXRhJ10gPSB0aGlzLmltYWdlRGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pbWFnZSwgMCwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW4gKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgdGhpcy5waXhlbE1hbmFnZXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbWFnZVsnZGF0YSddID0gdGhpcy5pbWFnZURhdGE7XG4gICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pbWFnZSwgMCwgMCk7XG5cbiAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHsodGhpcy5lbmRUaW1lIC0gdGhpcy5zdGFydFRpbWUpIC8gMTAwMH0g0YHQtdC60YPQvdC0YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdfQ==
