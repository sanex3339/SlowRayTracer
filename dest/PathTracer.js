(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.PathTracer = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var Tracer_1=require("./Tracer"),screenWidth=250,screenHeight=250,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),image,tracer;canvas.width=screenWidth,canvas.height=screenHeight,document.body.appendChild(canvas),tracer=new Tracer_1.Tracer(ctx,screenWidth,screenHeight),tracer.run(),image=canvas.toDataURL("image/png"),document.write("<img src='"+image+"' />");


},{"./Tracer":2}],2:[function(require,module,exports){
"use strict";var Tracer=function(){function e(e,t,i){this.buffer=[],this.iteration=0,this.numberOfWorkers=6,this.screenWidth=250,this.screenHeight=250,this.ctx=e,this.screenWidth=t,this.screenHeight=i,this.image=e.getImageData(0,0,this.screenWidth,this.screenHeight),this.imageData=this.image.data;for(var r=0;r<this.screenWidth*this.screenHeight*3;r++)this.buffer.push(0)}return e.prototype.run=function(){for(var e=this,t=0;t<this.numberOfWorkers;t++){var i=new Worker("TracerWorker.js");i.onmessage=function(t){e.iteration++,console.log(e.iteration);for(var i=t.data,r=0;r<i.length;r++)e.buffer[r]+=i[r];for(var a=0,s=0;a<e.screenWidth*e.screenHeight*4;)e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255*e.buffer[s++]/e.iteration,e.imageData[a++]=255;e.image.data.set(e.imageData),e.ctx.putImageData(e.image,0,0)},i.postMessage([this.screenWidth,this.screenHeight])}},e}();exports.Tracer=Tracer;


},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9zb3VyY2UvUGF0aFRyYWNlci5qcyIsIi9zb3VyY2UvUGF0aFRyYWNlci50cyIsIi9zb3VyY2UvVHJhY2VyLmpzIiwiL3NvdXJjZS9UcmFjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxZQ0FBLElBQUEsVUFBQSxRQUF1QixZQUVqQixZQUFjLElBQ2hCLGFBQWUsSUFFZixPQUE0QixTQUFTLGNBQWMsVUFDbkQsSUFBZ0MsT0FBTyxXQUFXLE1BQ2xELE1BQ0EsTUFFSixRQUFPLE1BQVEsWUFDZixPQUFPLE9BQVMsYUFDaEIsU0FBUyxLQUFLLFlBQVksUUFFMUIsT0FBUyxHQUFJLFVBQUEsT0FBTyxJQUFLLFlBQWEsY0FDdEMsT0FBTyxNQUVQLE1BQVEsT0FBTyxVQUFVLGFBQ3pCLFNBQVMsTUFBTSxhQUFjLE1BQUs7Ozs7QUNsQmxDLFlDQUEsSUFBQSxRQUFBLFdBVUksUUFBQSxHQUFhLEVBQStCLEVBQXNCLEdBVGxFLEtBQUEsVUFJQSxLQUFBLFVBQW9CLEVBQ3BCLEtBQUEsZ0JBQWtCLEVBQ2xCLEtBQUEsWUFBc0IsSUFDdEIsS0FBQSxhQUF1QixJQUduQixLQUFLLElBQU0sRUFDWCxLQUFLLFlBQWMsRUFDbkIsS0FBSyxhQUFlLEVBRXBCLEtBQUssTUFBUSxFQUFJLGFBQWEsRUFBRyxFQUFHLEtBQUssWUFBYSxLQUFLLGNBQzNELEtBQUssVUFBWSxLQUFLLE1BQVksSUFFbEMsS0FBSyxHQUFJLEdBQUksRUFBRyxFQUFJLEtBQUssWUFBYyxLQUFLLGFBQWUsRUFBRyxJQUMxRCxLQUFLLE9BQU8sS0FBSyxHQWtDN0IsTUE5QlcsR0FBQSxVQUFBLElBQVAsV0FDSSxJQUFLLEdBRFQsR0FBQSxLQUNhLEVBQUksRUFBRyxFQUFJLEtBQUssZ0JBQWlCLElBQUssQ0FDM0MsR0FBSSxHQUFTLEdBQUksUUFBTyxrQkFFeEIsR0FBTyxVQUFZLFNBQUMsR0FDaEIsRUFBSyxZQUVMLFFBQVEsSUFBSSxFQUFLLFVBSWpCLEtBQUssR0FGRCxHQUFPLEVBQVEsS0FFVixFQUFJLEVBQUcsRUFBSSxFQUFLLE9BQVEsSUFDN0IsRUFBSyxPQUFPLElBQU0sRUFBSyxFQUczQixLQUFJLEdBQUksR0FBSSxFQUFHLEVBQUksRUFBRyxFQUFJLEVBQUssWUFBYyxFQUFLLGFBQWUsR0FDN0QsRUFBSyxVQUFVLEtBQTBCLElBQW5CLEVBQUssT0FBTyxLQUFhLEVBQUssVUFDcEQsRUFBSyxVQUFVLEtBQTBCLElBQW5CLEVBQUssT0FBTyxLQUFhLEVBQUssVUFDcEQsRUFBSyxVQUFVLEtBQTBCLElBQW5CLEVBQUssT0FBTyxLQUFhLEVBQUssVUFDcEQsRUFBSyxVQUFVLEtBQU8sR0FHMUIsR0FBSyxNQUFZLEtBQUUsSUFBSSxFQUFLLFdBRTVCLEVBQUssSUFBSSxhQUFhLEVBQUssTUFBTyxFQUFHLElBR3pDLEVBQU8sYUFBYSxLQUFLLFlBQWEsS0FBSyxpQkFHdkQsSUFyRGEsU0FBQSxPQUFNIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlwidXNlIHN0cmljdFwiO1xudmFyIFRyYWNlcl8xID0gcmVxdWlyZShcIi4vVHJhY2VyXCIpO1xudmFyIHNjcmVlbldpZHRoID0gMjUwLCBzY3JlZW5IZWlnaHQgPSAyNTA7XG52YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSwgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksIGltYWdlLCB0cmFjZXI7XG5jYW52YXMud2lkdGggPSBzY3JlZW5XaWR0aDtcbmNhbnZhcy5oZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG50cmFjZXIgPSBuZXcgVHJhY2VyXzEuVHJhY2VyKGN0eCwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCk7XG50cmFjZXIucnVuKCk7XG5pbWFnZSA9IGNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG5kb2N1bWVudC53cml0ZShcIjxpbWcgc3JjPSdcIiArIGltYWdlICsgXCInIC8+XCIpO1xuIiwiaW1wb3J0IHsgVHJhY2VyIH0gZnJvbSBcIi4vVHJhY2VyXCI7XG5cbmNvbnN0IHNjcmVlbldpZHRoID0gMjUwLFxuICAgIHNjcmVlbkhlaWdodCA9IDI1MDtcblxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXG4gICAgaW1hZ2U6IGFueSxcbiAgICB0cmFjZXI6IFRyYWNlcjtcblxuY2FudmFzLndpZHRoID0gc2NyZWVuV2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG50cmFjZXIgPSBuZXcgVHJhY2VyKGN0eCwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCk7XG50cmFjZXIucnVuKCk7XG5cbmltYWdlID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbmRvY3VtZW50LndyaXRlKGA8aW1nIHNyYz1cXCcke2ltYWdlfVxcJyAvPmApO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgVHJhY2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmFjZXIoY3R4LCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5udW1iZXJPZldvcmtlcnMgPSA2O1xuICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gMjUwO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IDI1MDtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuc2NyZWVuV2lkdGgsIHRoaXMuc2NyZWVuSGVpZ2h0KTtcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSB0aGlzLmltYWdlWydkYXRhJ107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zY3JlZW5XaWR0aCAqIHRoaXMuc2NyZWVuSGVpZ2h0ICogMzsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRyYWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKCdUcmFjZXJXb3JrZXIuanMnKTtcbiAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLml0ZXJhdGlvbisrO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLml0ZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBtZXNzYWdlLmRhdGE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgal8xID0gMDsgal8xIDwgZGF0YS5sZW5ndGg7IGpfMSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJ1ZmZlcltqXzFdICs9IGRhdGFbal8xXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGogPSAwOyBrIDwgX3RoaXMuc2NyZWVuV2lkdGggKiBfdGhpcy5zY3JlZW5IZWlnaHQgKiA0Oykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWFnZURhdGFbaysrXSA9IF90aGlzLmJ1ZmZlcltqKytdICogMjU1IC8gX3RoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWFnZURhdGFbaysrXSA9IF90aGlzLmJ1ZmZlcltqKytdICogMjU1IC8gX3RoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWFnZURhdGFbaysrXSA9IF90aGlzLmJ1ZmZlcltqKytdICogMjU1IC8gX3RoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWFnZURhdGFbaysrXSA9IDI1NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuaW1hZ2VbJ2RhdGEnXS5zZXQoX3RoaXMuaW1hZ2VEYXRhKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jdHgucHV0SW1hZ2VEYXRhKF90aGlzLmltYWdlLCAwLCAwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoW3RoaXMuc2NyZWVuV2lkdGgsIHRoaXMuc2NyZWVuSGVpZ2h0XSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUcmFjZXI7XG59KSgpO1xuZXhwb3J0cy5UcmFjZXIgPSBUcmFjZXI7XG4iLCJleHBvcnQgY2xhc3MgVHJhY2VyIHtcbiAgICBidWZmZXI6IG51bWJlcltdID0gW107XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgaW1hZ2U6IGFueTtcbiAgICBpbWFnZURhdGE6IG51bWJlcltdO1xuICAgIGl0ZXJhdGlvbjogbnVtYmVyID0gMDtcbiAgICBudW1iZXJPZldvcmtlcnMgPSA2O1xuICAgIHNjcmVlbldpZHRoOiBudW1iZXIgPSAyNTA7XG4gICAgc2NyZWVuSGVpZ2h0OiBudW1iZXIgPSAyNTA7XG5cbiAgICBjb25zdHJ1Y3RvciAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHNjcmVlbldpZHRoPzogbnVtYmVyLCBzY3JlZW5IZWlnaHQ/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5pbWFnZSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5zY3JlZW5XaWR0aCwgdGhpcy5zY3JlZW5IZWlnaHQpO1xuICAgICAgICB0aGlzLmltYWdlRGF0YSA9IHRoaXMuaW1hZ2VbJ2RhdGEnXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NyZWVuV2lkdGggKiB0aGlzLnNjcmVlbkhlaWdodCAqIDM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCgwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW4gKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZXb3JrZXJzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB3b3JrZXIgPSBuZXcgV29ya2VyKCdUcmFjZXJXb3JrZXIuanMnKTtcblxuICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24rKztcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXRlcmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2pdICs9IGRhdGFbal07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMCwgaiA9IDA7IGsgPCB0aGlzLnNjcmVlbldpZHRoICogdGhpcy5zY3JlZW5IZWlnaHQgKiA0Oykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gdGhpcy5idWZmZXJbaisrXSAqIDI1NSAvIHRoaXMuaXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVtrKytdID0gMjU1O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VbJ2RhdGEnXS5zZXQodGhpcy5pbWFnZURhdGEpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2UsIDAsIDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKFt0aGlzLnNjcmVlbldpZHRoLCB0aGlzLnNjcmVlbkhlaWdodF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19
