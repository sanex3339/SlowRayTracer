(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalized(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalized(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scaled(Vector_1.Vector.normalized(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scaled(Vector_1.Vector.normalized(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":15}],2:[function(require,module,exports){
var FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o}();exports.Color=Color;


},{"./FloatColor":3}],3:[function(require,module,exports){
var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
var RGBColor=function(){function o(t,r,n){this.red=o.toFloat(t),this.green=o.toFloat(r),this.blue=o.toFloat(n)}return o.toFloat=function(o){return 0===o?o:o/255},o}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
var AbstractLight=function(){function t(){}return t}();exports.AbstractLight=AbstractLight;


},{}],6:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},AbstractLight_1=require("./AbstractLight"),Color_1=require("./../Color/Color"),Material_1=require("./../Material"),RGBColor_1=require("./../Color/RGBColor"),RTMath_1=require("./../RTMath"),Vector_1=require("./../Vector"),SphericalLight=function(t){function r(r,e,o){t.call(this),this.radius=50,this.fadeRadius=2500,this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(244,244,244)),0).setLambertCoeff(1),this.type="light",this.position=r,this.power=e,o&&(this.radius=o)}return __extends(r,t),r.prototype.getFadeRadius=function(){return this.radius+this.fadeRadius},r.prototype.getPosition=function(){return this.position},r.prototype.getPower=function(){return this.power},r.prototype.getRadius=function(){return this.radius},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getIntersectData=function(t){var r,e,o,i,a,s,n,h=Vector_1.Vector.substract(t.getOrigin(),this.position),c=Vector_1.Vector.dot(h,t.getDirection()),u=Vector_1.Vector.dot(h,h)-Math.pow(this.radius,2),p=Math.pow(c,2)-u;if(!(c>0||0>p||p>=0&&(r=-c+Math.sqrt(p),e=-c-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return s=Vector_1.Vector.add(Vector_1.Vector.scaled(t.getDirection(),a),t.getOrigin()),n=Vector_1.Vector.substract(s,t.getOrigin()).getLength(),{point:s,distance:n}},r.prototype.getNormal=function(t){return Vector_1.Vector.normalized(Vector_1.Vector.scaled(Vector_1.Vector.substract(t,this.position),1/this.radius))},r.prototype.getMaterial=function(){return this.material},r.prototype.getType=function(){return this.type},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractLight_1.AbstractLight);exports.SphericalLight=SphericalLight;


},{"./../Color/Color":2,"./../Color/RGBColor":4,"./../Material":7,"./../RTMath":11,"./../Vector":15,"./AbstractLight":5}],7:[function(require,module,exports){
var Color_1=require("./Color/Color"),RGBColor_1=require("./Color/RGBColor"),Material=function(){function o(o,t){void 0===o&&(o=new Color_1.Color(new RGBColor_1.RGBColor(255,0,0))),void 0===t&&(t=0),this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,this.color=o,this.reflectionCoeff=t}return o.prototype.getColor=function(){return this.color},o.prototype.getLambertCoeff=function(){return this.lambertCoeff},o.prototype.getPhongCoeff=function(){return this.phongCoeff},o.prototype.getReflectionValue=function(){return this.reflectionCoeff},o.prototype.setLambertCoeff=function(o){return this.lambertCoeff=o,this.phongCoeff=1-o,this},o.prototype.setPhongCoeff=function(o){return this.phongCoeff=o,this.lambertCoeff=1-o,this},o}();exports.Material=Material;


},{"./Color/Color":2,"./Color/RGBColor":4}],8:[function(require,module,exports){
var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],9:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RGBColor_1=require("../Color/RGBColor"),Vector_1=require("../Vector"),Polygon=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];t.call(this),this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(115,115,115)),0),this.type="surface",this.vertices=e}return __extends(e,t),e.prototype.getIntersectData=function(t){var r,o,c,i,s,n=this.getNormal();if(o=Vector_1.Vector.dot(this.vertices[0],n),s=Vector_1.Vector.dot(n,t.getDirection()),i=-Vector_1.Vector.dot(n,t.getOrigin())+o,r=i/s,!(r<RTMath_1.RTMath.EPSILON)){t.setDistance(r),c=t.getHitPoint();for(var a=0,l=this.vertices.length;l>a;a++){var u=this.vertices[a],h=void 0;if(h=a===l-1?this.vertices[0]:this.vertices[a+1],!e.checkSameClockDir(Vector_1.Vector.substract(h,u),Vector_1.Vector.substract(c,u),this.getNormal()))return}return r=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{point:c,distance:r}}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(){var t=Vector_1.Vector.substract(this.vertices[2],this.vertices[0]),e=Vector_1.Vector.substract(this.vertices[1],this.vertices[0]);return Vector_1.Vector.normalized(Vector_1.Vector.cross(t,e))},e.prototype.getType=function(){return this.type},e.prototype.setMaterial=function(t){return this.material=t,this},e.checkSameClockDir=function(t,e,r){var o=Vector_1.Vector.cross(e,t);return Vector_1.Vector.dot(o,r)>=0},e}(AbstractObject_1.AbstractObject);exports.Polygon=Polygon;


},{"../Color/Color":2,"../Color/RGBColor":4,"../Material":7,"../RTMath":11,"../Vector":15,"./AbstractObject":8}],10:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RGBColor_1=require("../Color/RGBColor"),Vector_1=require("../Vector"),Sphere=function(t){function e(e,r){t.call(this),this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,0,0)),0),this.type="surface",this.center=e,this.radius=r}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o,i,a,c,n,s=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(s,t.getDirection()),u=Vector_1.Vector.dot(s,s)-Math.pow(this.radius,2),l=Math.pow(h,2)-u;if(!(h>0||0>l||l>=0&&(e=-h+Math.sqrt(l),r=-h-Math.sqrt(l),o=Math.min(e,r),i=Math.max(e,r),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return c=Vector_1.Vector.add(Vector_1.Vector.scaled(t.getDirection(),a),t.getOrigin()),n=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{point:c,distance:n}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(t){return Vector_1.Vector.normalized(Vector_1.Vector.scaled(Vector_1.Vector.substract(t,this.center),1/this.radius))},e.prototype.getType=function(){return this.type},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Color/RGBColor":4,"../Material":7,"../RTMath":11,"../Vector":15,"./AbstractObject":8}],11:[function(require,module,exports){
var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],12:[function(require,module,exports){
var Vector_1=require("./Vector"),Ray=function(){function t(t,i,e){this.distance=0,this.iteration=8,this.origin=t,this.direction=Vector_1.Vector.normalized(i),e&&(this.iteration=e)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getDistance=function(){return this.distance},t.prototype.getIteration=function(){return this.iteration},t.prototype.getOrigin=function(){return this.origin},t.prototype.getHitPoint=function(){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scaled(this.direction,this.distance))},t.prototype.setDistance=function(t){this.distance=t},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":15}],13:[function(require,module,exports){
var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],14:[function(require,module,exports){
var Camera_1=require("./Camera"),Color_1=require("./Color/Color"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),Vector_1=require("./Vector"),SphericalLight_1=require("./Lights/SphericalLight"),Material_1=require("./Material"),Polygon_1=require("./Objects/Polygon"),Tracer=function(){function e(){this.raysPerPixel=8,this.screenWidth=250,this.screenHeight=250}return e.prototype.getColor=function(e,o){void 0===o&&(o=!0);var r=this.trace(e),t=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0));return null===r.owner?new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)):(t=this.getDiffuseColor(e,r,o),o&&(n=this.getReflectionColor(e,r)),t.add(n))},e.prototype.getDiffuseColor=function(e,o,r){void 0===r&&(r=!0);for(var t,n,a,l,c,i,_,w,C=50,V=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),s=0,g=this.scene.getLights();s<g.length;s++){var d=g[s];if("light"===o.ownerType)return o.owner.getMaterial().getColor();var h=this.getLightPower(o,d);if(t=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),a=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),l=Vector_1.Vector.normalized(Vector_1.Vector.substract(o.point,d.getPosition())),i=-Vector_1.Vector.dot(l,o.normal),t=t.add(o.owner.getMaterial().getColor().multiple(d.getMaterial().getColor().scaled(h*i*o.owner.getMaterial().getLambertCoeff()))),r)for(var R=function(e){for(;;){var o=new Vector_1.Vector(Math.random()-.5,Math.random()-.5,Math.random()-.5);if(!(Vector_1.Vector.dot(o,o)>1))return o=Vector_1.Vector.normalized(o),Vector_1.Vector.dot(o,e)<0&&(o=Vector_1.Vector.inverse(o)),o}},p=0;C>p;++p){var u=R(o.owner.getNormal(o.point)),f=this.getColor(new Ray_1.Ray(o.point,u),!1),M=Vector_1.Vector.dot(u,o.owner.getNormal(o.point));n=n.add(o.owner.getMaterial().getColor().divide(Math.PI).multiple(f.scaled(M)))}c=Vector_1.Vector.reflect(l,o.normal),_=-Vector_1.Vector.dot(c,e.getDirection()),_>0&&(w=Math.pow(_,35),a=a.add(o.owner.getMaterial().getColor().multiple(d.getMaterial().getColor().scaled(h*w*o.owner.getMaterial().getPhongCoeff())))),V=V.add(t.add(n.divide(C))).add(a)}return V},e.prototype.getReflectionColor=function(e,o){var r,t,n=o.owner.getMaterial().getReflectionValue();return e.setIteration(e.getIteration()-1),0===e.getIteration()||0===n?new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)):(t=Vector_1.Vector.reflect(e.getDirection(),o.normal),r=this.getColor(new Ray_1.Ray(o.point,t,e.getIteration())).scaled(n))},e.prototype.getPerspectiveVector=function(e,o,r,t){var n=this.scene.getCamera();return Vector_1.Vector.normalized(Vector_1.Vector.add(n.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scaled(n.getRightVector(),n.recenterX(e)),Vector_1.Vector.scaled(n.getUpVector(),n.recenterY(o)))))},e.prototype.getLightPower=function(e,o){for(var r,t=200,n=o.getPower(),a=0,l=0;t>l;l++){r=o.getRandomPoint();var c=this.trace(new Ray_1.Ray(e.point,Vector_1.Vector.substract(Vector_1.Vector.substract(o.getPosition(),r),e.point)));null!==c.point&&c.owner===o&&(a+=(n-Vector_1.Vector.substract(Vector_1.Vector.substract(o.getPosition(),r),e.point).getLength()*(n/o.getFadeRadius()))/t)}return a},e.prototype.trace=function(e){for(var o,r={distance:0,point:null,normal:null,owner:null,ownerType:null},t=this.scene.getObjects().concat(this.scene.getLights()),n=0,a=t;n<a.length;n++){var l=a[n];o=l.getIntersectData(e),o&&o.distance>0&&(null===r.owner||o.distance<r.distance)&&(r.distance=o.distance,r.point=o.point,r.owner=l,r.ownerType=l.getType(),r.normal=r.owner.getNormal(r.point))}return r},e.prototype.render=function(e,o,r,t){var n,a,l,c,i=.5;this.screenWidth=e,this.screenHeight=o,n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0));for(var _=0;_<this.raysPerPixel;_++)a=0,this.raysPerPixel>1&&(_%2?a+=Math.random()*i:a-=Math.random()*i),l=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(r+a,t+a,e,o)),n=n.add(this.getColor(l));n=n.divide(this.raysPerPixel);for(var w in n)n[w]=Color_1.Color.sRGBEncode(n[w]);c=Color_1.Color.toRGB(n),self.postMessage([r,t,c.red,c.green,c.blue])},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var o=e.data;"string"==typeof o&&(o=JSON.parse("["+o+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),o[0],o[1]),lights:[new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,640,0),1.2,50).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255))))],objects:[new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(-700,-700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(-700,700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(-700,700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,700,-700),new Vector_1.Vector(700,700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,0,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(-700,700,700),new Vector_1.Vector(-700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,0,0)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),0).setLambertCoeff(1)),new Sphere_1.Sphere(new Vector_1.Vector(-250,-500,450),200).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),1)),new Sphere_1.Sphere(new Vector_1.Vector(250,-500,400),200).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,255,0)),0))]})),r.render(o[0],o[1],o[2],o[3])};


},{"./Camera":1,"./Color/Color":2,"./Color/RGBColor":4,"./Lights/SphericalLight":6,"./Material":7,"./Objects/Polygon":9,"./Objects/Sphere":10,"./Ray":12,"./Scene":13,"./Vector":15}],15:[function(require,module,exports){
var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.scaled=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.inverse=function(n){return t.scaled(n,-1)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.normalized=function(n){return t.scaled(n,1/n.getLength())},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scaled(r,e))},t}();exports.Vector=Vector;


},{}]},{},[14])(14)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvc291cmNlL0NhbWVyYS50cyIsIi9zb3VyY2UvQ29sb3IvQ29sb3IudHMiLCIvc291cmNlL0NvbG9yL0Zsb2F0Q29sb3IudHMiLCIvc291cmNlL0NvbG9yL1JHQkNvbG9yLnRzIiwiL3NvdXJjZS9MaWdodHMvQWJzdHJhY3RMaWdodC50cyIsIi9zb3VyY2UvTGlnaHRzL1NwaGVyaWNhbExpZ2h0LmpzIiwiL3NvdXJjZS9MaWdodHMvU3BoZXJpY2FsTGlnaHQudHMiLCIvc291cmNlL01hdGVyaWFsLnRzIiwiL3NvdXJjZS9PYmplY3RzL0Fic3RyYWN0T2JqZWN0LnRzIiwiL3NvdXJjZS9PYmplY3RzL1BvbHlnb24uanMiLCIvc291cmNlL09iamVjdHMvUG9seWdvbi50cyIsIi9zb3VyY2UvT2JqZWN0cy9TcGhlcmUuanMiLCIvc291cmNlL09iamVjdHMvU3BoZXJlLnRzIiwiL3NvdXJjZS9SVE1hdGgudHMiLCIvc291cmNlL1JheS50cyIsIi9zb3VyY2UvU2NlbmUudHMiLCIvc291cmNlL1RyYWNlcldvcmtlci50cyIsIi9zb3VyY2UvVmVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsR0FBQSxVQUFBLFFBQXVCLFlBRXZCLE9BQUEsV0FTSSxRQUFBLEdBQWEsRUFBa0IsRUFBbUIsRUFBcUIsR0FDbkUsS0FBSyxTQUFXLEVBQ2hCLEtBQUssVUFBWSxTQUFBLE9BQU8sV0FBVyxHQUNuQyxLQUFLLFlBQWMsRUFDbkIsS0FBSyxhQUFlLEVBRXBCLEtBQUssY0FBZ0IsU0FBQSxPQUFPLFdBQVcsU0FBQSxPQUFPLFVBQVUsS0FBSyxVQUFXLEtBQUssV0FDN0UsS0FBSyxZQUFjLFNBQUEsT0FBTyxPQUN0QixTQUFBLE9BQU8sV0FDSCxTQUFBLE9BQU8sTUFDSCxLQUFLLGNBQ0wsR0FBSSxVQUFBLE9BQU8sRUFBRyxHQUFJ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dEIsR0FBSSxVQUFBLE9BQU8sSUFBSyxJQUFLLEtBQ3JCLEdBQUksVUFBQSxPQUFPLEtBQU0sSUFBSyxNQUN4QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLElBQUssSUFBSyxNQUFPLEdBQUcsZ0JBQWdCLElBRXRGLEdBQUksV0FBQSxRQUNBLEdBQUksVUFBQSxPQUFPLEtBQU0sSUFBSyxNQUN0QixHQUFJLFVBQUEsT0FBTyxLQUFNLElBQUssS0FDdEIsR0FBSSxVQUFBLE9BQU8sSUFBSyxJQUFLLEtBQ3JCLEdBQUksVUFBQSxPQUFPLElBQUssSUFBSyxPQUN2QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLElBQUssSUFBSyxNQUFPLEdBQUcsZ0JBQWdCLElBRXRGLEdBQUksV0FBQSxRQUNBLEdBQUksVUFBQSxPQUFPLElBQUssS0FBTSxLQUN0QixHQUFJLFVBQUEsT0FBTyxJQUFLLEtBQU0sTUFDdEIsR0FBSSxVQUFBLE9BQU8sSUFBSyxJQUFLLE1BQ3JCLEdBQUksVUFBQSxPQUFPLElBQUssSUFBSyxNQUN2QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLEVBQUcsRUFBRyxNQUFPLEdBQUcsZ0JBQWdCLElBRWxGLEdBQUksV0FBQSxRQUNBLEdBQUksVUFBQSxPQUFPLEtBQU0sS0FBTSxNQUN2QixHQUFJLFVBQUEsT0FBTyxLQUFNLEtBQU0sS0FDdkIsR0FBSSxVQUFBLE9BQU8sS0FBTSxJQUFLLEtBQ3RCLEdBQUksVUFBQSxPQUFPLEtBQU0sSUFBSyxPQUN4QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLElBQUssRUFBRyxJQUFLLEdBQUcsZ0JBQWdCLElBRWxGLEdBQUksV0FBQSxRQUNBLEdBQUksVUFBQSxPQUFPLElBQUssS0FBTSxNQUN0QixHQUFJLFVBQUEsT0FBTyxLQUFNLEtBQU0sTUFDdkIsR0FBSSxVQUFBLE9BQU8sS0FBTSxJQUFLLE1BQ3RCLEdBQUksVUFBQSxPQUFPLElBQUssSUFBSyxPQUN2QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLEVBQUcsRUFBRyxJQUFLLEdBQUcsZ0JBQWdCLElBQ2hGLEdBQUksVUFBQSxPQUFPLEdBQUksVUFBQSxPQUFPLEtBQU0sS0FBTSxLQUFNLEtBQ25DLFlBQVksR0FBSSxZQUFBLFNBQVMsR0FBSSxTQUFBLE1BQU0sR0FBSSxZQUFBLFNBQVMsRUFBRyxFQUFHLElBQUssSUFDaEUsR0FBSSxVQUFBLE9BQU8sR0FBSSxVQUFBLE9BQU8sSUFBSyxLQUFNLEtBQU0sS0FDbEMsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxFQUFHLElBQUssSUFBSyxRQUs5RSxFQUFPLE9BQU8sRUFBSyxHQUFJLEVBQUssR0FBSSxFQUFLLEdBQUksRUFBSzs7OztBQ2hjbEQsR0FBQSxRQUFBLFdBS0ksUUFBQSxHQUFhLEVBQVcsRUFBVyxHQUMvQixLQUFLLEVBQUksRUFDVCxLQUFLLEVBQUksRUFDVCxLQUFLLEVBQUksRUErRGpCLE1BNURJLEdBQUEsVUFBQSxlQUFBLFdBQ0ksT0FDSSxFQUFHLEtBQUssRUFDUixFQUFHLEtBQUssRUFDUixFQUFHLEtBQUssSUFJVCxFQUFBLFVBQUEsUUFBUCxXQUNJLE9BQ0ksS0FBSyxFQUNMLEtBQUssRUFDTCxLQUFLLElBSU4sRUFBQSxVQUFBLFVBQVAsV0FDSSxNQUFPLE1BQUssS0FBSyxLQUFBLElBQUEsS0FBSyxFQUFLLEdBQUksS0FBQSxJQUFBLEtBQUssRUFBSyxHQUFJLEtBQUEsSUFBQSxLQUFLLEVBQUssS0FHN0MsRUFBQSxJQUFkLFNBQW1CLEVBQWlCLEdBQ2hDLE1BQU8sSUFBSSxHQUFPLEVBQVEsRUFBSSxFQUFRLEVBQUcsRUFBUSxFQUFJLEVBQVEsRUFBRyxFQUFRLEVBQUksRUFBUSxJQUcxRSxFQUFBLFVBQWQsU0FBeUIsRUFBaUIsR0FDdEMsTUFBTyxJQUFJLEdBQU8sRUFBUSxFQUFJLEVBQVEsRUFBRyxFQUFRLEVBQUksRUFBUSxFQUFHLEVBQVEsRUFBSSxFQUFRLElBRzFFLEVBQUEsT0FBZCxTQUFzQixFQUFnQixHQUNsQyxNQUFPLElBQUksR0FBTyxFQUFPLEVBQUksRUFBWSxFQUFPLEVBQUksRUFBWSxFQUFPLEVBQUksSUFHakUsRUFBQSxNQUFkLFNBQXFCLEVBQWlCLEdBQ2xDLE1BQU8sSUFBSSxHQUNQLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFDNUMsRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUM1QyxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLElBSXRDLEVBQUEsUUFBZCxTQUF1QixHQUNuQixNQUFPLEdBQU8sT0FBTyxFQUFRLEtBR25CLEVBQUEsSUFBZCxTQUFtQixFQUFpQixHQUNoQyxNQUFPLEdBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxHQUdqRSxFQUFBLFdBQWQsU0FBMEIsR0FDdEIsTUFBTyxHQUFPLE9BQU8sRUFBUSxFQUFJLEVBQU8sY0FHOUIsRUFBQSxRQUFkLFNBQXVCLEVBQWdCLEdBQ25DLEdBQUksR0FBSSxFQUFJLEVBQU8sSUFBSSxFQUFRLEVBRS9CLE9BQU8sR0FBTyxVQUNWLEVBQ0EsRUFBTyxPQUFPLEVBQVEsS0FHbEMsSUF2RWEsU0FBQSxPQUFNIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcbiAgICBwcml2YXRlIGRpcmVjdGlvbjogVmVjdG9yO1xuICAgIHByaXZhdGUgcG9zaXRpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIGZvcndhcmRWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHJpZ2h0VmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSB1cFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgc2NyZWVuV2lkdGg6IG51bWJlcjtcbiAgICBwcml2YXRlIHNjcmVlbkhlaWdodDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHBvc2l0aW9uOiBWZWN0b3IsIGRpcmVjdGlvbjogVmVjdG9yLCBzY3JlZW5XaWR0aDogbnVtYmVyLCBzY3JlZW5IZWlnaHQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZWQoZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IgPSBWZWN0b3Iubm9ybWFsaXplZChWZWN0b3Iuc3Vic3RyYWN0KHRoaXMuZGlyZWN0aW9uLCB0aGlzLnBvc2l0aW9uKSk7XG4gICAgICAgIHRoaXMucmlnaHRWZWN0b3IgPSBWZWN0b3Iuc2NhbGVkKFxuICAgICAgICAgICAgVmVjdG9yLm5vcm1hbGl6ZWQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgLTEsIDApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy51cFZlY3RvciA9IFZlY3Rvci5zY2FsZWQoXG4gICAgICAgICAgICBWZWN0b3Iubm9ybWFsaXplZChcbiAgICAgICAgICAgICAgICBWZWN0b3IuY3Jvc3MoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yd2FyZFZlY3RvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodFZlY3RvclxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpcmVjdGlvbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcndhcmRWZWN0b3IgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcndhcmRWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJpZ2h0VmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VXBWZWN0b3IgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwVmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWNlbnRlclggKHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGxldCBhc3BlY3RDb2VmZiA9ICh0aGlzLnNjcmVlbkhlaWdodCAvIHRoaXMuc2NyZWVuV2lkdGgpICogMjtcblxuICAgICAgICByZXR1cm4gKHggLSAodGhpcy5zY3JlZW5XaWR0aCAvIDIpKSAvIGFzcGVjdENvZWZmIC8gdGhpcy5zY3JlZW5XaWR0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVjZW50ZXJZICh5OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gLSh5IC0gKHRoaXMuc2NyZWVuSGVpZ2h0IC8gMikpIC8gMiAvIHRoaXMuc2NyZWVuSGVpZ2h0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vUkdCQ29sb3JcIjtcbmltcG9ydCB7IEZsb2F0Q29sb3IgfSBmcm9tIFwiLi9GbG9hdENvbG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBDb2xvciB7XG4gICAgcmVkOiBudW1iZXI7XG4gICAgZ3JlZW46IG51bWJlcjtcbiAgICBibHVlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAoY29sb3I6IFJHQkNvbG9yfEZsb2F0Q29sb3IpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBjb2xvci5yZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBjb2xvci5ncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gY29sb3IuYmx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkIChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCArIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICsgY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICsgY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJzdHJhY3QgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkIC0gY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gLSBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgLSBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHNjYWxlZCAobXVsdGlwbGllcjogbnVtYmVyKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKiBtdWx0aXBsaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKiBtdWx0aXBsaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAqIG11bHRpcGxpZXJcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbXVsdGlwbGUgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICogY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKiBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKiBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGRpdmlkZSAodmFsdWU6IG51bWJlcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkIC8gdmFsdWUsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAvIHZhbHVlLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAvIHZhbHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzUkdCRW5jb2RlIChjb2xvcjogbnVtYmVyKSB7XG4gICAgICAgIGlmIChjb2xvciA8PSAwLjAwMzEzMDgpIHtcbiAgICAgICAgICAgIHJldHVybiAxMi45MiAqIGNvbG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDEuMDU1ICogKGNvbG9yICoqIDAuNDE2NjY2NykgLSAwLjA1NTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdG9SR0IgKGNvbG9yOiBDb2xvcik6IHtyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWQ6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5yZWQpICogMjU1KSxcbiAgICAgICAgICAgIGdyZWVuOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IuZ3JlZW4pICogMjU1KSxcbiAgICAgICAgICAgIGJsdWU6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5ibHVlKSAqIDI1NSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNsYW1wQ29sb3IgKGNvbG9yOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29sb3IgPiAxID8gMSA6IGNvbG9yO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGbG9hdENvbG9yIHtcbiAgICBwdWJsaWMgcmVkOiBudW1iZXI7XG4gICAgcHVibGljIGdyZWVuOiBudW1iZXI7XG4gICAgcHVibGljIGJsdWU6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucmVkID0gcmVkO1xuICAgICAgICB0aGlzLmdyZWVuID0gZ3JlZW47XG4gICAgICAgIHRoaXMuYmx1ZSA9IGJsdWU7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBSR0JDb2xvciB7XG4gICAgcHVibGljIHJlZDogbnVtYmVyO1xuICAgIHB1YmxpYyBncmVlbjogbnVtYmVyO1xuICAgIHB1YmxpYyBibHVlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJlZCA9IFJHQkNvbG9yLnRvRmxvYXQocmVkKTtcbiAgICAgICAgdGhpcy5ncmVlbiA9IFJHQkNvbG9yLnRvRmxvYXQoZ3JlZW4pO1xuICAgICAgICB0aGlzLmJsdWUgPSBSR0JDb2xvci50b0Zsb2F0KGJsdWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHRvRmxvYXQgKGNvbG9yOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29sb3IgPT09IDAgPyBjb2xvciA6IGNvbG9yIC8gMjU1O1xuICAgIH1cbn0iLCJpbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RMaWdodCB7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZhZGVSYWRpdXMgKCk6IG51bWJlcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0UG9zaXRpb24gKCk6IFZlY3RvcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0UG93ZXIgKCk6IG51bWJlcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0UmFkaXVzICgpOiBudW1iZXI7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55O1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXROb3JtYWwgKHBvaW50OiBWZWN0b3IpOiBWZWN0b3I7XG4gICAgcHVibGljIGFic3RyYWN0IGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbDtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0UmFuZG9tUG9pbnQgKCk6IFZlY3RvcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VHlwZSAoKTogc3RyaW5nO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcztcbn1cbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFic3RyYWN0TGlnaHRfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0TGlnaHRcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLy4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi8uLi9NYXRlcmlhbFwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIik7XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi8uLi9SVE1hdGhcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi8uLi9WZWN0b3JcIik7XG52YXIgU3BoZXJpY2FsTGlnaHQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGhlcmljYWxMaWdodCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmljYWxMaWdodChwb3NpdGlvbiwgcG93ZXIsIHJhZGl1cykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSA1MDtcbiAgICAgICAgdGhpcy5mYWRlUmFkaXVzID0gMjUwMDtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDI0NCwgMjQ0LCAyNDQpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbGlnaHQnO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG93ZXIgPSBwb3dlcjtcbiAgICAgICAgaWYgKHJhZGl1cykge1xuICAgICAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldEZhZGVSYWRpdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cyArIHRoaXMuZmFkZVJhZGl1cztcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UG93ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvd2VyO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldFJhbmRvbVBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdSA9IE1hdGgucmFuZG9tKCksIHYgPSBNYXRoLnJhbmRvbSgpLCBxID0gMiAqIE1hdGguUEkgKiB1LCBmID0gTWF0aC5wb3coTWF0aC5jb3MoMiAqIHYgLSAxKSwgLTEpO1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcl8xLlZlY3Rvcih0aGlzLnJhZGl1cyAqIE1hdGguY29zKHEpICogTWF0aC5zaW4oZiksIHRoaXMucmFkaXVzICogTWF0aC5zaW4ocSkgKiBNYXRoLnNpbihmKSwgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhmKSk7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0RGF0YSA9IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgdmFyIGsgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5wb3NpdGlvbiksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBwb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlZChyYXkuZ2V0RGlyZWN0aW9uKCksIGludGVyc2VjdGlvblBvaW50KSwgcmF5LmdldE9yaWdpbigpKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLmdldExlbmd0aCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9pbnQ6IHBvaW50LFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplZChWZWN0b3JfMS5WZWN0b3Iuc2NhbGVkKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMucG9zaXRpb24pLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5zZXRNYXRlcmlhbCA9IGZ1bmN0aW9uIChtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFNwaGVyaWNhbExpZ2h0O1xufSkoQWJzdHJhY3RMaWdodF8xLkFic3RyYWN0TGlnaHQpO1xuZXhwb3J0cy5TcGhlcmljYWxMaWdodCA9IFNwaGVyaWNhbExpZ2h0O1xuIiwiaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0Fic3RyYWN0TGlnaHRcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLy4uL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi8uLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4vLi4vUlRNYXRoXCJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLy4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgU3BoZXJpY2FsTGlnaHQgZXh0ZW5kcyBBYnN0cmFjdExpZ2h0IHtcbiAgICBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByYWRpdXM6IG51bWJlciA9IDUwO1xuICAgIHByaXZhdGUgcG93ZXI6IG51bWJlcjtcbiAgICBwcml2YXRlIGZhZGVSYWRpdXM6IG51bWJlciA9IDI1MDA7XG4gICAgcHJpdmF0ZSBtYXRlcmlhbDogTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNDQsIDI0NCwgMjQ0KSksIDApLnNldExhbWJlcnRDb2VmZigxKTtcbiAgICBwcml2YXRlIHR5cGU6IHN0cmluZyA9ICdsaWdodCc7XG5cbiAgICBjb25zdHJ1Y3RvciAocG9zaXRpb246IFZlY3RvciwgcG93ZXI6IG51bWJlciwgcmFkaXVzPzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBvd2VyID0gcG93ZXI7XG5cbiAgICAgICAgaWYgKHJhZGl1cykge1xuICAgICAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RmFkZVJhZGl1cyAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzICsgdGhpcy5mYWRlUmFkaXVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvd2VyICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3dlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFkaXVzICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgdSA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICB2ID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHEgPSAyICogTWF0aC5QSSAqIHUsXG4gICAgICAgICAgICBmID0gTWF0aC5wb3coTWF0aC5jb3MoMiAqIHYgLSAxKSwgLTEpO1xuXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhmKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBrID0gVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMucG9zaXRpb24pLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgcG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGVkKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIHBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50LFxuICAgICAgICAgICAgZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsIChwb2ludDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemVkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlZChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLnBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFR5cGUgKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIHtcbiAgICBwcml2YXRlIGNvbG9yOiBDb2xvcjtcbiAgICBwcml2YXRlIGxhbWJlcnRDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcGhvbmdDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcmVmbGVjdGlvbkNvZWZmOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBjb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMCwgMCkpLFxuICAgICAgICByZWZsZWN0aW9uQ29lZmY6IG51bWJlciA9IDBcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25Db2VmZiA9IHJlZmxlY3Rpb25Db2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sb3IgKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldExhbWJlcnRDb2VmZigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5sYW1iZXJ0Q29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBob25nQ29lZmYoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGhvbmdDb2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVmbGVjdGlvblZhbHVlICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIHNldExhbWJlcnRDb2VmZihsYW1iZXJ0Q29lZmY6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLmxhbWJlcnRDb2VmZiA9IGxhbWJlcnRDb2VmZjtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gMSAtIGxhbWJlcnRDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UGhvbmdDb2VmZihwaG9uZ0NvZWZmOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gcGhvbmdDb2VmZjtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSAxIC0gcGhvbmdDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59IiwiaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBhYnN0cmFjdCBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWw7XG4gICAgYWJzdHJhY3Qgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXM7XG4gICAgYWJzdHJhY3QgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnk7XG59XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBSVE1hdGhfMSA9IHJlcXVpcmUoXCIuLi9SVE1hdGhcIik7XG52YXIgQWJzdHJhY3RPYmplY3RfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0T2JqZWN0XCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi4vQ29sb3IvQ29sb3JcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuLi9NYXRlcmlhbFwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL1JHQkNvbG9yXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4uL1ZlY3RvclwiKTtcbnZhciBQb2x5Z29uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9seWdvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQb2x5Z29uKCkge1xuICAgICAgICB2YXIgdmVydGljZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZlcnRpY2VzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMTE1LCAxMTUsIDExNSkpLCAwKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ3N1cmZhY2UnO1xuICAgICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XG4gICAgfVxuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEludGVyc2VjdERhdGEgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBkaXN0YW5jZSwgZGlzdGFuY2VGcm9tQXhpc0NlbnRlciwgaGl0UG9pbnQsIG5vcm1hbCA9IHRoaXMuZ2V0Tm9ybWFsKCksIG51bWVyYXRvciwgZGVub21pbmF0b3I7XG4gICAgICAgIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KHRoaXMudmVydGljZXNbMF0sIG5vcm1hbCk7XG4gICAgICAgIGRlbm9taW5hdG9yID0gVmVjdG9yXzEuVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXREaXJlY3Rpb24oKSk7XG4gICAgICAgIG51bWVyYXRvciA9IC1WZWN0b3JfMS5WZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldE9yaWdpbigpKSArIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXI7XG4gICAgICAgIGRpc3RhbmNlID0gbnVtZXJhdG9yIC8gZGVub21pbmF0b3I7XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmF5LnNldERpc3RhbmNlKGRpc3RhbmNlKTtcbiAgICAgICAgaGl0UG9pbnQgPSByYXkuZ2V0SGl0UG9pbnQoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHZlcnRpY2VzTGVuZ3RoID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgPCB2ZXJ0aWNlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdmVydGV4MSA9IHRoaXMudmVydGljZXNbaV0sIHZlcnRleDIgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoaSA9PT0gdmVydGljZXNMZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyID0gdGhpcy52ZXJ0aWNlc1tpICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVBvbHlnb24uY2hlY2tTYW1lQ2xvY2tEaXIoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh2ZXJ0ZXgyLCB2ZXJ0ZXgxKSwgVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChoaXRQb2ludCwgdmVydGV4MSksIHRoaXMuZ2V0Tm9ybWFsKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChoaXRQb2ludCwgcmF5LmdldE9yaWdpbigpKS5nZXRMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRnZTEgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMl0sIHRoaXMudmVydGljZXNbMF0pLCBlZGdlMiA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodGhpcy52ZXJ0aWNlc1sxXSwgdGhpcy52ZXJ0aWNlc1swXSk7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplZChWZWN0b3JfMS5WZWN0b3IuY3Jvc3MoZWRnZTEsIGVkZ2UyKSk7XG4gICAgfTtcbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFBvbHlnb24uY2hlY2tTYW1lQ2xvY2tEaXIgPSBmdW5jdGlvbiAodmVjdG9yMSwgdmVjdG9yMiwgbm9ybWFsKSB7XG4gICAgICAgIHZhciBub3JtYWxWMVYyID0gVmVjdG9yXzEuVmVjdG9yLmNyb3NzKHZlY3RvcjIsIHZlY3RvcjEpO1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLmRvdChub3JtYWxWMVYyLCBub3JtYWwpID49IDA7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWdvbjtcbn0pKEFic3RyYWN0T2JqZWN0XzEuQWJzdHJhY3RPYmplY3QpO1xuZXhwb3J0cy5Qb2x5Z29uID0gUG9seWdvbjtcbiIsImltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLi9SVE1hdGhcIjtcbmltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFBvbHlnb24gZXh0ZW5kcyBBYnN0cmFjdE9iamVjdCB7XG4gICAgcHJpdmF0ZSB2ZXJ0aWNlczogVmVjdG9yW107XG4gICAgcHJpdmF0ZSBtYXRlcmlhbDogTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigxMTUsIDExNSwgMTE1KSksIDApO1xuICAgIHByaXZhdGUgdHlwZTogc3RyaW5nID0gJ3N1cmZhY2UnO1xuXG4gICAgY29uc3RydWN0b3IgKC4uLnZlcnRpY2VzOiBWZWN0b3JbXSkge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGRpc3RhbmNlOiBudW1iZXIsXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyOiBudW1iZXIsXG4gICAgICAgICAgICBoaXRQb2ludDogVmVjdG9yLFxuICAgICAgICAgICAgbm9ybWFsOiBWZWN0b3IgPSB0aGlzLmdldE5vcm1hbCgpLFxuICAgICAgICAgICAgbnVtZXJhdG9yOiBudW1iZXIsXG4gICAgICAgICAgICBkZW5vbWluYXRvcjogbnVtYmVyO1xuXG4gICAgICAgIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIgPSBWZWN0b3IuZG90KHRoaXMudmVydGljZXNbMF0sIG5vcm1hbCk7XG5cbiAgICAgICAgZGVub21pbmF0b3IgPSBWZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgbnVtZXJhdG9yID0gLVZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0T3JpZ2luKCkpICsgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjtcblxuICAgICAgICBkaXN0YW5jZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuXG4gICAgICAgIGlmIChkaXN0YW5jZSA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByYXkuc2V0RGlzdGFuY2UoZGlzdGFuY2UpO1xuXG4gICAgICAgIGhpdFBvaW50ID0gcmF5LmdldEhpdFBvaW50KCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHZlcnRpY2VzTGVuZ3RoID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgPCB2ZXJ0aWNlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdmVydGV4MTogVmVjdG9yID0gdGhpcy52ZXJ0aWNlc1tpXSxcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyOiBWZWN0b3I7XG5cbiAgICAgICAgICAgIGlmIChpID09PSB2ZXJ0aWNlc0xlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyID0gdGhpcy52ZXJ0aWNlc1swXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIVBvbHlnb24uY2hlY2tTYW1lQ2xvY2tEaXIoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QodmVydGV4MiwgdmVydGV4MSksXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHZlcnRleDEpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE5vcm1hbCgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAoKTogVmVjdG9yIHtcbiAgICAgICAgbGV0IGVkZ2UxOiBWZWN0b3IgPSBWZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMl0sIHRoaXMudmVydGljZXNbMF0pLFxuICAgICAgICAgICAgZWRnZTI6IFZlY3RvciA9IFZlY3Rvci5zdWJzdHJhY3QodGhpcy52ZXJ0aWNlc1sxXSwgdGhpcy52ZXJ0aWNlc1swXSk7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemVkKFZlY3Rvci5jcm9zcyhlZGdlMSwgZWRnZTIpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VHlwZSAoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2hlY2tTYW1lQ2xvY2tEaXIgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yLCBub3JtYWw6IFZlY3Rvcik6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgbm9ybWFsVjFWMjogVmVjdG9yID0gVmVjdG9yLmNyb3NzKHZlY3RvcjIsIHZlY3RvcjEpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3IuZG90KG5vcm1hbFYxVjIsIG5vcm1hbCkgPj0gMDtcbiAgICB9XG59XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBSVE1hdGhfMSA9IHJlcXVpcmUoXCIuLi9SVE1hdGhcIik7XG52YXIgQWJzdHJhY3RPYmplY3RfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0T2JqZWN0XCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi4vQ29sb3IvQ29sb3JcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuLi9NYXRlcmlhbFwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL1JHQkNvbG9yXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4uL1ZlY3RvclwiKTtcbnZhciBTcGhlcmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGhlcmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3BoZXJlKGNlbnRlciwgcmFkaXVzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMjU1LCAwLCAwKSksIDApO1xuICAgICAgICB0aGlzLnR5cGUgPSAnc3VyZmFjZSc7XG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICB9XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgayA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBwb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlZChyYXkuZ2V0RGlyZWN0aW9uKCksIGludGVyc2VjdGlvblBvaW50KSwgcmF5LmdldE9yaWdpbigpKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLmdldExlbmd0aCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9pbnQ6IHBvaW50LFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplZChWZWN0b3JfMS5WZWN0b3Iuc2NhbGVkKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSwgMSAvIHRoaXMucmFkaXVzKSk7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gU3BoZXJlO1xufSkoQWJzdHJhY3RPYmplY3RfMS5BYnN0cmFjdE9iamVjdCk7XG5leHBvcnRzLlNwaGVyZSA9IFNwaGVyZTtcbiIsImltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLi9SVE1hdGhcIjtcbmltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFNwaGVyZSBleHRlbmRzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBwcml2YXRlIGNlbnRlcjogVmVjdG9yO1xuICAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBtYXRlcmlhbDogTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDAsIDApKSwgMCk7XG4gICAgcHJpdmF0ZSB0eXBlOiBzdHJpbmcgPSAnc3VyZmFjZSc7XG5cbiAgICBjb25zdHJ1Y3RvciAoY2VudGVyOiBWZWN0b3IsIHJhZGl1czogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyICgpO1xuXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnkge1xuICAgICAgICBsZXQgayA9IFZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksXG4gICAgICAgICAgICBiOiBudW1iZXIgPSBWZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksXG4gICAgICAgICAgICBjOiBudW1iZXIgPSBWZWN0b3IuZG90KGssIGspIC0gdGhpcy5yYWRpdXMgKiogMixcbiAgICAgICAgICAgIGQ6IG51bWJlciA9IGIgKiogMiAtIGMsXG4gICAgICAgICAgICB0MTogbnVtYmVyLFxuICAgICAgICAgICAgdDI6IG51bWJlcixcbiAgICAgICAgICAgIG1pblQ6IG51bWJlcixcbiAgICAgICAgICAgIG1heFQ6IG51bWJlcixcbiAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50OiBudW1iZXIsXG4gICAgICAgICAgICBwb2ludDogVmVjdG9yLFxuICAgICAgICAgICAgZGlzdGFuY2U6IG51bWJlcjtcblxuICAgICAgICBpZiAoYiA+IDAgfHwgZCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcblxuICAgICAgICAgICAgaWYgKG1pblQgPiBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWluVDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtYXhUO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50ID0gVmVjdG9yLmFkZChcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgcG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9pbnQsXG4gICAgICAgICAgICBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsIChwb2ludDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemVkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlZChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLmNlbnRlciksXG4gICAgICAgICAgICAgICAgMSAvIHRoaXMucmFkaXVzXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFR5cGUgKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImV4cG9ydCBtb2R1bGUgUlRNYXRoIHtcbiAgICBleHBvcnQgY29uc3QgRVBTSUxPTiA9IDAuMDAxO1xufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgUmF5IHtcbiAgICBwcml2YXRlIG9yaWdpbjogVmVjdG9yO1xuICAgIHByaXZhdGUgZGlyZWN0aW9uOiAgVmVjdG9yO1xuICAgIHByaXZhdGUgZGlzdGFuY2U6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBpdGVyYXRpb246IG51bWJlciA9IDg7XG5cbiAgICBjb25zdHJ1Y3RvciAob3JpZ2luOiBWZWN0b3IsIGRpcmVjdGlvbjogVmVjdG9yLCBpdGVyYXRpb24/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZWQoZGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoaXRlcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLml0ZXJhdGlvbiA9IGl0ZXJhdGlvbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlzdGFuY2UgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJdGVyYXRpb24gKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T3JpZ2luICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW47XG4gICAgfVxuXG4gICAgcHVibGljIGdldEhpdFBvaW50ICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLmFkZCh0aGlzLm9yaWdpbiwgVmVjdG9yLnNjYWxlZCh0aGlzLmRpcmVjdGlvbiwgdGhpcy5kaXN0YW5jZSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXREaXN0YW5jZSAoZGlzdGFuY2U6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZXJhdGlvbiAoaXRlcmF0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSBpdGVyYXRpb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4vQ2FtZXJhXCI7XG5pbXBvcnQgeyBBYnN0cmFjdExpZ2h0IH0gZnJvbSBcIi4vTGlnaHRzL0Fic3RyYWN0TGlnaHRcIjtcblxuZXhwb3J0IGNsYXNzIFNjZW5lIHtcbiAgICBwcml2YXRlIGNhbWVyYTogQ2FtZXJhO1xuICAgIHByaXZhdGUgb2JqZWN0czogYW55W10gPSBbXTtcbiAgICBwcml2YXRlIGxpZ2h0czogQWJzdHJhY3RMaWdodFtdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvciAob2JqZWN0czogYW55KSB7XG4gICAgICAgIHRoaXMub2JqZWN0cyA9IG9iamVjdHMub2JqZWN0cztcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBvYmplY3RzLmNhbWVyYTtcbiAgICAgICAgdGhpcy5saWdodHMgPSBvYmplY3RzLmxpZ2h0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkT2JqZWN0IChvYmplY3Q6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDYW1lcmEgKCk6IENhbWVyYSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbWVyYTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGlnaHRzICgpOiBBYnN0cmFjdExpZ2h0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5saWdodHM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9iamVjdHMgKCk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cztcbiAgICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBuby1kZWZhdWx0LWxpYj1cInRydWVcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwibGliL2xpYi53ZWJ3b3JrZXIuZC50c1wiIC8+XG5cbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi9SVE1hdGhcIjtcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4vU2NlbmVcIjtcbmltcG9ydCB7IFNwaGVyZSB9IGZyb20gXCIuL09iamVjdHMvU3BoZXJlXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4vT2JqZWN0cy9QbGFuZVwiO1xuaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBTcGhlcmljYWxMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9TcGhlcmljYWxMaWdodFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuL09iamVjdHMvUG9seWdvblwiO1xuXG5jbGFzcyBUcmFjZXIge1xuICAgIHByaXZhdGUgc2NlbmU6IFNjZW5lO1xuICAgIHByaXZhdGUgcmF5c1BlclBpeGVsOiBudW1iZXIgPSA4O1xuICAgIHByaXZhdGUgc2NyZWVuV2lkdGg6IG51bWJlciA9IDI1MDtcbiAgICBwcml2YXRlIHNjcmVlbkhlaWdodDogbnVtYmVyID0gMjUwO1xuXG4gICAgcHJpdmF0ZSBnZXRDb2xvciAocmF5OiBSYXksIHJlY3VyY2l2ZTogYm9vbGVhbiA9IHRydWUpOiBDb2xvciB7XG4gICAgICAgIGxldCBpbnRlcnNlY3QgPSB0aGlzLnRyYWNlKHJheSksXG4gICAgICAgICAgICBkaWZmdXNlQ29sb3I6IENvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSksXG4gICAgICAgICAgICByZWZsZWN0Q29sb3I6IENvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSk7XG5cbiAgICAgICAgaWYgKGludGVyc2VjdFsnb3duZXInXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlmZnVzZUNvbG9yID0gdGhpcy5nZXREaWZmdXNlQ29sb3IocmF5LCBpbnRlcnNlY3QsIHJlY3VyY2l2ZSk7XG5cbiAgICAgICAgaWYgKHJlY3VyY2l2ZSkge1xuICAgICAgICAgICAgcmVmbGVjdENvbG9yID0gdGhpcy5nZXRSZWZsZWN0aW9uQ29sb3IocmF5LCBpbnRlcnNlY3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpZmZ1c2VDb2xvci5hZGQocmVmbGVjdENvbG9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERpZmZ1c2VDb2xvciAocmF5OiBSYXksIGludGVyc2VjdDogYW55LCByZWN1cnNpdmU6IGJvb2xlYW4gPSB0cnVlKTogQ29sb3Ige1xuICAgICAgICBjb25zdCByYWRpYW5jZVNhbXBsZXMgPSA1MDtcbiAgICAgICAgXG4gICAgICAgIGxldCBsYW1iQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmFkaWFuY2VDb2xvcjogQ29sb3IsXG4gICAgICAgICAgICBwaG9uZ0NvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHBpeGVsQ29sb3I6IENvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSksXG4gICAgICAgICAgICBsaWdodERpcmVjdGlvbjogVmVjdG9yLFxuICAgICAgICAgICAgcmVmbGVjdFBob25nVmVjdG9yRGlyOiBWZWN0b3IsXG4gICAgICAgICAgICBsYW1iQ29zOiBudW1iZXIsXG4gICAgICAgICAgICBwaG9uZ0NvczogbnVtYmVyLFxuICAgICAgICAgICAgcGhvbmc6IG51bWJlcjtcblxuICAgICAgICBmb3IgKGxldCBsaWdodCBvZiB0aGlzLnNjZW5lLmdldExpZ2h0cygpKSB7XG4gICAgICAgICAgICAvLyBpZiBsaWdodCAtIHJldHVybiBvbmx5IGxpZ2h0IGNvbG9yXG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0Wydvd25lclR5cGUnXSA9PT0gJ2xpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3RbJ293bmVyJ11cbiAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBsaWdodFBvd2VyID0gdGhpcy5nZXRMaWdodFBvd2VyKGludGVyc2VjdCwgbGlnaHQpO1xuXG4gICAgICAgICAgICBsYW1iQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIHJhZGlhbmNlQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIHBob25nQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZWQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0Wydwb2ludCddLFxuICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gbGFtYmVydFxuXG4gICAgICAgICAgICBsYW1iQ29zID0gLVZlY3Rvci5kb3QoXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0Wydub3JtYWwnXVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGFtYkNvbG9yID0gbGFtYkNvbG9yLmFkZChcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ293bmVyJ11cbiAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgLm11bHRpcGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIGxhbWJDb3MgKiBpbnRlcnNlY3RbJ293bmVyJ10uZ2V0TWF0ZXJpYWwoKS5nZXRMYW1iZXJ0Q29lZmYoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgIGxldCByYW5kRGlyID0gKG5vcm1hbDogVmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyOiBWZWN0b3IgPSBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgLSAwLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAtIDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpIC0gMC41XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmVjdG9yLmRvdChkaXIsIGRpcikgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpciA9IFZlY3Rvci5ub3JtYWxpemVkKGRpcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWN0b3IuZG90KGRpciwgbm9ybWFsKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXIgPSBWZWN0b3IuaW52ZXJzZShkaXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKmxldCB1MSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdTIgPSBNYXRoLnJhbmRvbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2luX3RoZXRhID0gTWF0aC5zcXJ0KHUxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3NfdGhldGEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0ICBwaGkgPSAyICogTWF0aC5QSSAqIHUyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyOiBWZWN0b3IgPSBuZXcgVmVjdG9yKHNpbl90aGV0YSAqIE1hdGguQ29zKHBoaSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zX3RoZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbl90aGV0YSAqIE1hdGguU2luKHBoaSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFuZ2VudDogVmVjdG9yO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsLnggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhbmdlbnQgPSBuZXcgVmVjdG9yKDEsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YW5nZW50ID0gVmVjdG9yLm5vcm1hbGl6ZWQobmV3IFZlY3Rvcihub3JtYWwueiwgMCwgLW5vcm1hbC54KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiaXRhbmdlbnQ6IFZlY3RvciA9IFZlY3Rvci5jcm9zcyh0YW5nZW50LCBub3JtYWwpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFzaXNUcmFuc2Zvcm0gPSBuZXcgTWF0cml4KHRhbmdlbnQsIG5vcm1hbCwgYml0YW5nZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemVkKGJhc2lzVHJhbnNmb3JtICogZGlyKTsqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFkaWFuY2VTYW1wbGVzOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpcjogVmVjdG9yID0gcmFuZERpcihpbnRlcnNlY3RbJ293bmVyJ10uZ2V0Tm9ybWFsKGludGVyc2VjdFsncG9pbnQnXSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFuY2VJblRoYXREaXI6IENvbG9yID0gdGhpcy5nZXRDb2xvcihuZXcgUmF5KGludGVyc2VjdFsncG9pbnQnXSwgZGlyKSwgZmFsc2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29zSTogbnVtYmVyID0gVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0Wydvd25lciddLmdldE5vcm1hbChpbnRlcnNlY3RbJ3BvaW50J10pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJhZGlhbmNlQ29sb3IgPSByYWRpYW5jZUNvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsnb3duZXInXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGl2aWRlKE1hdGguUEkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tdWx0aXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlhbmNlSW5UaGF0RGlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlZChjb3NJKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBob25nXG5cbiAgICAgICAgICAgIHJlZmxlY3RQaG9uZ1ZlY3RvckRpciA9IFZlY3Rvci5yZWZsZWN0KFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIGludGVyc2VjdFsnbm9ybWFsJ11cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwaG9uZ0NvcyA9IC1WZWN0b3IuZG90KHJlZmxlY3RQaG9uZ1ZlY3RvckRpciwgcmF5LmdldERpcmVjdGlvbigpKTtcblxuICAgICAgICAgICAgaWYgKHBob25nQ29zID4gMCkge1xuICAgICAgICAgICAgICAgIHBob25nID0gTWF0aC5wb3cocGhvbmdDb3MsIDM1KTtcbiAgICAgICAgICAgICAgICBwaG9uZ0NvbG9yID0gcGhvbmdDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsnb3duZXInXVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIHBob25nICogaW50ZXJzZWN0Wydvd25lciddLmdldE1hdGVyaWFsKCkuZ2V0UGhvbmdDb2VmZigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwaXhlbENvbG9yID0gcGl4ZWxDb2xvci5hZGQobGFtYkNvbG9yLmFkZChyYWRpYW5jZUNvbG9yLmRpdmlkZShyYWRpYW5jZVNhbXBsZXMpKSkuYWRkKHBob25nQ29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBpeGVsQ29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRSZWZsZWN0aW9uQ29sb3IgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSk6IGFueSB7XG4gICAgICAgIGxldCByZWZsZWN0aW9uQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmVmbGVjdGlvblZhbHVlOiBudW1iZXIgPSBpbnRlcnNlY3RbJ293bmVyJ10uZ2V0TWF0ZXJpYWwoKS5nZXRSZWZsZWN0aW9uVmFsdWUoKSxcbiAgICAgICAgICAgIHJlZmxlY3RlZFJheTogVmVjdG9yO1xuXG4gICAgICAgIHJheS5zZXRJdGVyYXRpb24ocmF5LmdldEl0ZXJhdGlvbigpIC0gMSk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmF5LmdldEl0ZXJhdGlvbigpID09PSAwIHx8XG4gICAgICAgICAgICByZWZsZWN0aW9uVmFsdWUgPT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWZsZWN0ZWRSYXkgPSBWZWN0b3IucmVmbGVjdChcbiAgICAgICAgICAgIHJheS5nZXREaXJlY3Rpb24oKSxcbiAgICAgICAgICAgIGludGVyc2VjdFsnbm9ybWFsJ11cbiAgICAgICAgKTtcblxuICAgICAgICByZWZsZWN0aW9uQ29sb3IgPSB0aGlzLmdldENvbG9yKFxuICAgICAgICAgICAgbmV3IFJheShpbnRlcnNlY3RbJ3BvaW50J10sIHJlZmxlY3RlZFJheSwgcmF5LmdldEl0ZXJhdGlvbigpKVxuICAgICAgICApLnNjYWxlZChyZWZsZWN0aW9uVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiByZWZsZWN0aW9uQ29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQZXJzcGVjdGl2ZVZlY3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHNjcmVlbldpZHRoOiBudW1iZXIsIHNjcmVlbkhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGxldCBjYW1lcmE6IENhbWVyYSA9IHRoaXMuc2NlbmUuZ2V0Q2FtZXJhKCk7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemVkKFxuICAgICAgICAgICAgVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0Rm9yd2FyZFZlY3RvcigpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0UmlnaHRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclgoeClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5nZXRVcFZlY3RvcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnJlY2VudGVyWSh5KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0TGlnaHRQb3dlciAoaW50ZXJzZWN0OiBhbnksIGxpZ2h0OiBBYnN0cmFjdExpZ2h0KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgc2FtcGxpbmcgPSAyMDA7XG5cbiAgICAgICAgbGV0IGxpZ2h0UG93ZXIgPSBsaWdodC5nZXRQb3dlcigpLFxuICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludDogVmVjdG9yLFxuICAgICAgICAgICAgcmVzdWx0UG93ZXIgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxpbmc7IGkrKykge1xuICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludCA9IGxpZ2h0LmdldFJhbmRvbVBvaW50KCk7XG5cbiAgICAgICAgICAgIGxldCBsaWdodFJheSA9IHRoaXMudHJhY2UoXG4gICAgICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0Wydwb2ludCddLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ3BvaW50J11cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChsaWdodFJheVsncG9pbnQnXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGlnaHRSYXlbJ293bmVyJ10gIT09IGxpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdFBvd2VyICs9IChcbiAgICAgICAgICAgICAgICBsaWdodFBvd2VyIC1cbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0LmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsncG9pbnQnXVxuICAgICAgICAgICAgICAgICAgICApLmdldExlbmd0aCgpICogKGxpZ2h0UG93ZXIgLyBsaWdodC5nZXRGYWRlUmFkaXVzKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSAvIHNhbXBsaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdFBvd2VyO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhY2UgKHJheTogUmF5KToge2Rpc3RhbmNlOiBudW1iZXIsIHBvaW50OiBWZWN0b3IsIG93bmVyOiBhbnksIG93bmVyVHlwZTogc3RyaW5nfSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgICAgICAgICAgcG9pbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbm9ybWFsOiBudWxsLFxuICAgICAgICAgICAgICAgIG93bmVyOiBudWxsLFxuICAgICAgICAgICAgICAgIG93bmVyVHlwZTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludGVyc2VjdERhdGE6IGFueSxcbiAgICAgICAgICAgIHNjZW5lT2JqZWN0c1dpdGhMaWdodHM6IGFueVtdID0gdGhpcy5zY2VuZS5nZXRPYmplY3RzKCkuY29uY2F0KHRoaXMuc2NlbmUuZ2V0TGlnaHRzKCkpO1xuXG4gICAgICAgIGZvciAobGV0IG9iamVjdCBvZiBzY2VuZU9iamVjdHNXaXRoTGlnaHRzKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3REYXRhID0gb2JqZWN0LmdldEludGVyc2VjdERhdGEocmF5KTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGEgJiZcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddID4gMCAmJlxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Wydvd25lciddID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10gPCByZXN1bHRbJ2Rpc3RhbmNlJ11cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbJ2Rpc3RhbmNlJ10gPSBpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddO1xuICAgICAgICAgICAgICAgIHJlc3VsdFsncG9pbnQnXSA9IGludGVyc2VjdERhdGFbJ3BvaW50J107XG4gICAgICAgICAgICAgICAgcmVzdWx0Wydvd25lciddID0gb2JqZWN0O1xuICAgICAgICAgICAgICAgIHJlc3VsdFsnb3duZXJUeXBlJ10gPSBvYmplY3QuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFsnbm9ybWFsJ10gPSByZXN1bHRbJ293bmVyJ10uZ2V0Tm9ybWFsKHJlc3VsdFsncG9pbnQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIgKHNjcmVlbldpZHRoOiBudW1iZXIsIHNjcmVlbkhlaWdodDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCByYW5kb011bHRpcGxpZXIgPSAwLjU7XG5cbiAgICAgICAgbGV0IGNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJhbmQ6IG51bWJlcixcbiAgICAgICAgICAgIHJheTogUmF5LFxuICAgICAgICAgICAgcmdiQ29sb3I6IHtcbiAgICAgICAgICAgICAgICByZWQ6IG51bWJlcixcbiAgICAgICAgICAgICAgICBncmVlbjogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGJsdWU6IG51bWJlclxuICAgICAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gc2NyZWVuV2lkdGg7XG4gICAgICAgIHRoaXMuc2NyZWVuSGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuXG4gICAgICAgIGNvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSk7XG5cbiAgICAgICAgZm9yIChsZXQgaXRlciA9IDA7IGl0ZXIgPCB0aGlzLnJheXNQZXJQaXhlbDsgaXRlcisrKSB7XG4gICAgICAgICAgICByYW5kID0gMDtcblxuICAgICAgICAgICAgaWYgKHRoaXMucmF5c1BlclBpeGVsID4gMSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyICUgMikge1xuICAgICAgICAgICAgICAgICAgICByYW5kICs9IE1hdGgucmFuZG9tKCkgKiByYW5kb011bHRpcGxpZXI7XG4gICAgICAgICAgICAgICAgfSAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmQgLT0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJheSA9IG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5nZXRDYW1lcmEoKS5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGVyc3BlY3RpdmVWZWN0b3IoeCArIHJhbmQsIHkgKyByYW5kLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29sb3IgPSBjb2xvci5hZGQodGhpcy5nZXRDb2xvcihyYXkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbG9yID0gY29sb3IuZGl2aWRlKHRoaXMucmF5c1BlclBpeGVsKTtcblxuICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgaW4gY29sb3IpIHtcbiAgICAgICAgICAgIGNvbG9yW2NvbXBvbmVudF0gPSBDb2xvci5zUkdCRW5jb2RlKGNvbG9yW2NvbXBvbmVudF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmdiQ29sb3IgPSBDb2xvci50b1JHQihjb2xvcik7XG5cbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShbeCwgeSwgcmdiQ29sb3IucmVkLCByZ2JDb2xvci5ncmVlbiwgcmdiQ29sb3IuYmx1ZV0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRTY2VuZSAoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB9XG59XG5cbm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIGRhdGEgPSBtZXNzYWdlLmRhdGE7XG5cbiAgICBpZiAodHlwZW9mKGRhdGEpID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKCdbJytkYXRhKyddJyk7XG4gICAgfVxuXG4gICAgbGV0IHRyYWNlciA9IG5ldyBUcmFjZXIoKTtcblxuICAgIHRyYWNlci5zZXRTY2VuZShcbiAgICAgICAgbmV3IFNjZW5lKHtcbiAgICAgICAgICAgIGNhbWVyYTogbmV3IENhbWVyYShcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDAsIC02OTkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgMSksXG4gICAgICAgICAgICAgICAgZGF0YVswXSxcbiAgICAgICAgICAgICAgICBkYXRhWzFdXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbGlnaHRzOiBbXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyaWNhbExpZ2h0KG5ldyBWZWN0b3IgKDAsIDY0MCwgMCksIDEuMiwgNTApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDI1NSwgMjU1KSkpKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG9iamVjdHM6IFtcbiAgICAgICAgICAgICAgICAvL25ldyBQbGFuZShuZXcgVmVjdG9yKDAsIDEsIDApLCAtNDAwKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigxMTUsIDExNSwgMTE1KSksIDApKSxcbiAgICAgICAgICAgICAgICAvLyBib3R0b20gcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDI1NSwgMjU1KSksIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gZnJvbnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyB0b3AgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL3JpZ2h0IHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAyNTUpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL2xlZnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDAsIDApKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyBiYWNrIHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCAtNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIG5ldyBTcGhlcmUobmV3IFZlY3RvcigtMjUwLCAtNTAwLCA0NTApLCAyMDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSksIDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJlKG5ldyBWZWN0b3IoMjUwLCAtNTAwLCA0MDApLCAyMDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAyNTUsIDApKSwgMCkpXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHRyYWNlci5yZW5kZXIoZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXSwgZGF0YVszXSk7XG59OyIsImV4cG9ydCBjbGFzcyBWZWN0b3Ige1xuICAgIHByaXZhdGUgeDogbnVtYmVyO1xuICAgIHByaXZhdGUgeTogbnVtYmVyO1xuICAgIHByaXZhdGUgejogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy56ID0gejtcbiAgICB9XG5cbiAgICBnZXRDb29yZGluYXRlcyAoKToge3g6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXJ9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgICAgIHo6IHRoaXMuelxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc0FycmF5ICgpOiBudW1iZXJbXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0aGlzLngsXG4gICAgICAgICAgICB0aGlzLnksXG4gICAgICAgICAgICB0aGlzLnpcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGVuZ3RoICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDIgKyB0aGlzLnogKiogMik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhZGQgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54ICsgdmVjdG9yMi54LCB2ZWN0b3IxLnkgKyB2ZWN0b3IyLnksIHZlY3RvcjEueiArIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdWJzdHJhY3QgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54IC0gdmVjdG9yMi54LCB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnksIHZlY3RvcjEueiAtIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzY2FsZWQgKHZlY3RvcjogVmVjdG9yLCBtdWx0aXBsaWVyOiBudW1iZXIpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IueCAqIG11bHRpcGxpZXIsIHZlY3Rvci55ICogbXVsdGlwbGllciwgdmVjdG9yLnogKiBtdWx0aXBsaWVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyb3NzICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdmVjdG9yMS55ICogdmVjdG9yMi56IC0gdmVjdG9yMS56ICogdmVjdG9yMi55LFxuICAgICAgICAgICAgdmVjdG9yMS56ICogdmVjdG9yMi54IC0gdmVjdG9yMS54ICogdmVjdG9yMi56LFxuICAgICAgICAgICAgdmVjdG9yMS54ICogdmVjdG9yMi55IC0gdmVjdG9yMS55ICogdmVjdG9yMi54XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbnZlcnNlICh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iuc2NhbGVkKHZlY3RvciwgLTEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZG90ICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB2ZWN0b3IxLnggKiB2ZWN0b3IyLnggKyB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnkgKyB2ZWN0b3IxLnogKiB2ZWN0b3IyLno7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBub3JtYWxpemVkICh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iuc2NhbGVkKHZlY3RvciwgMSAvIHZlY3Rvci5nZXRMZW5ndGgoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZWZsZWN0ICh2ZWN0b3I6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgZiA9IDIgKiBWZWN0b3IuZG90KHZlY3Rvciwgbm9ybWFsKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIHZlY3RvcixcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQobm9ybWFsLCBmKVxuICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==
