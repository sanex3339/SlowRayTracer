(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalize(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalize(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":15}],2:[function(require,module,exports){
"use strict";var RGBColor_1=require("./RGBColor"),FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.getColor=function(){return{red:this.red,green:this.green,blue:this.blue}},o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o.black=new o(new RGBColor_1.RGBColor(0,0,0)),o.white=new o(new RGBColor_1.RGBColor(255,255,255)),o.gray=new o(new RGBColor_1.RGBColor(127,127,127)),o.red=new o(new RGBColor_1.RGBColor(255,0,0)),o.green=new o(new RGBColor_1.RGBColor(0,255,0)),o.blue=new o(new RGBColor_1.RGBColor(0,0,255)),o}();exports.Color=Color;


},{"./FloatColor":3,"./RGBColor":4}],3:[function(require,module,exports){
"use strict";var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
"use strict";var RGBColor=function(){function t(o,r,n){this.red=t.toFloat(o),this.green=t.toFloat(r),this.blue=t.toFloat(n)}return t.toFloat=function(t){return 0===t?t:t/255},t}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
"use strict";var IntersectPoint=function(){function t(){this.intersected=!1}return t.prototype.getIntersect=function(){return this.intersected},t.prototype.getHitPoint=function(){return this.hitPoint},t.prototype.getNormal=function(){return this.normal},t.prototype.getOwner=function(){return this.owner},t.prototype.getDistanceFromOrigin=function(){return this.distanceFromOrigin},t.prototype.setIntersect=function(){this.intersected=!0},t.prototype.setHitPoint=function(t){this.hitPoint=t},t.prototype.setNormal=function(t){this.normal=t},t.prototype.setOwner=function(t){this.owner=t},t.prototype.setDistanceFromOrigin=function(t){this.distanceFromOrigin=t},t}();exports.IntersectPoint=IntersectPoint;


},{}],6:[function(require,module,exports){
"use strict";var Color_1=require("./Color/Color"),Material=function(){function t(t,o,e){this.emission=Color_1.Color.black,this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,t&&(this.color=t),o&&(this.emission=o),e&&(this.reflectionCoeff=e)}return t.prototype.getColor=function(){return this.color},t.prototype.getEmission=function(){return this.emission},t.prototype.getEmissionValue=function(){return(this.emission.getColor().red+this.emission.getColor().green+this.emission.getColor().blue)/3},t.prototype.getLambertCoeff=function(){return this.lambertCoeff},t.prototype.getPhongCoeff=function(){return this.phongCoeff},t.prototype.getReflectionValue=function(){return this.reflectionCoeff},t.prototype.setLambertCoeff=function(t){return this.lambertCoeff=t,this.phongCoeff=1-t,this},t.prototype.setPhongCoeff=function(t){return this.phongCoeff=t,this.lambertCoeff=1-t,this},t}();exports.Material=Material;


},{"./Color/Color":2}],7:[function(require,module,exports){
"use strict";var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],8:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RTMath_1=require("../RTMath"),Vector_1=require("../Vector"),Plane=function(t){function e(e,r){t.call(this),this.point=new Vector_1.Vector(0,0,0),this.material=new Material_1.Material(Color_1.Color.gray),this.normal=e,r&&(this.point=r)}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o=Vector_1.Vector.dot(Vector_1.Vector.substract(this.point,t.getOrigin()),this.normal)/Vector_1.Vector.dot(t.getDirection(),this.getNormal());if(!(o<=RTMath_1.RTMath.EPSILON))return r=Vector_1.Vector.add(t.getOrigin(),Vector_1.Vector.scale(t.getDirection(),o)),e=Vector_1.Vector.substract(r,t.getOrigin()).getLength(),{hitPoint:r,normal:this.getNormal(),distance:e}},e.prototype.getMaterial=function(){return this.material},e.prototype.getPosition=function(){return this.point},e.prototype.getRandomPoint=function(){return new Vector_1.Vector(0,0,0)},e.prototype.getNormal=function(){return this.normal},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Plane=Plane;


},{"../Color/Color":2,"../Material":6,"../RTMath":11,"../Vector":15,"./AbstractObject":7}],9:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Polygon=function(t){function r(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];t.call(this),this.material=new Material_1.Material(Color_1.Color.gray),this.vertices=r}return __extends(r,t),r.prototype.getIntersectData=function(t){var e,o,c,i,s,n=this.getNormal();if(o=Vector_1.Vector.dot(this.vertices[0],n),s=Vector_1.Vector.dot(n,t.getDirection()),i=-Vector_1.Vector.dot(n,t.getOrigin())+o,e=i/s,!(e<RTMath_1.RTMath.EPSILON)){c=t.getHitPoint(e);for(var a=0,u=this.vertices.length;u>a;a++){var h=this.vertices[a],l=void 0;if(l=a===u-1?this.vertices[0]:this.vertices[a+1],!r.checkSameClockDir(Vector_1.Vector.substract(l,h),Vector_1.Vector.substract(c,h),this.getNormal()))return}return{hitPoint:c,normal:n,distance:e}}},r.prototype.getMaterial=function(){return this.material},r.prototype.getNormal=function(){var t=Vector_1.Vector.substract(this.vertices[2],this.vertices[0]),r=Vector_1.Vector.substract(this.vertices[1],this.vertices[0]);return Vector_1.Vector.normalize(Vector_1.Vector.cross(t,r))},r.prototype.getPosition=function(){return this.vertices[0]},r.prototype.getRandomPoint=function(){return new Vector_1.Vector(0,0,0)},r.prototype.setMaterial=function(t){return this.material=t,this},r.checkSameClockDir=function(t,r,e){var o=Vector_1.Vector.cross(r,t);return Vector_1.Vector.dot(o,e)>=0},r}(AbstractObject_1.AbstractObject);exports.Polygon=Polygon;


},{"../Color/Color":2,"../Material":6,"../RTMath":11,"../Vector":15,"./AbstractObject":7}],10:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Sphere=function(t){function r(r,e){t.call(this),this.material=new Material_1.Material(Color_1.Color.red),this.position=r,this.radius=e}return __extends(r,t),r.prototype.getIntersectData=function(t){var r,e,o,i,a,n,s,c=Vector_1.Vector.substract(t.getOrigin(),this.position),h=Vector_1.Vector.dot(c,t.getDirection()),u=Vector_1.Vector.dot(c,c)-Math.pow(this.radius,2),p=Math.pow(h,2)-u;if(!(h>0||0>p||p>=0&&(r=-h+Math.sqrt(p),e=-h-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return n=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),a),t.getOrigin()),s=Vector_1.Vector.substract(n,t.getOrigin()).getLength(),{hitPoint:n,normal:this.getNormal(n),distance:s}},r.prototype.getMaterial=function(){return this.material},r.prototype.getPosition=function(){return this.position},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getRadius=function(){return this.radius},r.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.position),1/this.radius))},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Material":6,"../RTMath":11,"../Vector":15,"./AbstractObject":7}],11:[function(require,module,exports){
"use strict";var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],12:[function(require,module,exports){
"use strict";var Vector_1=require("./Vector"),Ray=function(){function t(t,i,r){this.iteration=0,this.origin=t,this.direction=Vector_1.Vector.normalize(i),r&&(this.iteration=r)}return t.prototype.getOrigin=function(){return this.origin},t.prototype.getDirection=function(){return this.direction},t.prototype.getIteration=function(){return this.iteration},t.prototype.getHitPoint=function(t){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scale(this.direction,t))},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":15}],13:[function(require,module,exports){
"use strict";var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],14:[function(require,module,exports){
"use strict";var Camera_1=require("./Camera"),Color_1=require("./Color/Color"),IntersectPoint_1=require("./IntersectPoint"),Material_1=require("./Material"),Plane_1=require("./Objects/Plane"),Polygon_1=require("./Objects/Polygon"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),RTMath_1=require("./RTMath"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),Vector_1=require("./Vector"),FloatColor_1=require("./Color/FloatColor"),Tracer=function(){function e(){this.buffer=[],this.screenWidth=250,this.screenHeight=250;for(var e=0;e<this.screenWidth*this.screenHeight*3;e++)this.buffer.push(Color_1.Color.black)}return e.prototype.cosineSampleHemisphere=function(e){var t,r,o=Math.random(),a=Math.random(),n=Math.sqrt(o),c=2*Math.PI*a;return t=Math.abs(e.getCoordinates().x)<.5?Vector_1.Vector.cross(e,new Vector_1.Vector(1,0,0)):Vector_1.Vector.cross(e,new Vector_1.Vector(0,1,0)),r=Vector_1.Vector.cross(e,t),Vector_1.Vector.add(Vector_1.Vector.scale(e,Math.sqrt(1-o)),Vector_1.Vector.add(Vector_1.Vector.scale(t,n*Math.cos(c)),Vector_1.Vector.scale(r,n*Math.sin(c))))},e.prototype.getColor=function(e){var t,r,o,a,n,c=Color_1.Color.black,i=this.trace(e),l=1,s=e.getIteration();if(s>=5){if(Math.random()<=.1)return Color_1.Color.black;l=1/.9}if(!i.getIntersect())return Color_1.Color.black;r=Color_1.Color.black;for(var _=0,g=this.scene.getObjects();_<g.length;_++){var V=g[_];V.getMaterial().getEmission()!=Color_1.Color.black&&(r=r.add(this.getLightPower(e,i,V)))}return c=r.scaled(e.getIteration()).add(i.getOwner().getMaterial().getColor().multiple(i.getOwner().getMaterial().getEmission().scaled(l))),o=this.cosineSampleHemisphere(i.getNormal()),a=Vector_1.Vector.dot(o,e.getDirection())>0?Vector_1.Vector.add(e.getOrigin(),Vector_1.Vector.scale(e.getDirection(),i.getDistanceFromOrigin()*(1+RTMath_1.RTMath.EPSILON))):Vector_1.Vector.add(e.getOrigin(),Vector_1.Vector.scale(e.getDirection(),i.getDistanceFromOrigin()*(1-RTMath_1.RTMath.EPSILON))),t=Vector_1.Vector.dot(o,i.getNormal()),n=this.getColor(new Ray_1.Ray(a,o,++s)),c.add(n.multiple(i.getOwner().getMaterial().getColor()).scaled(t).scaled(.1).scaled(l))},e.prototype.getReflectionColor=function(e,t){var r,o,a=t.getOwner().getMaterial().getReflectionValue();return 0===a?Color_1.Color.black:(o=Vector_1.Vector.reflect(e.getDirection(),t.getNormal()),r=this.getColor(new Ray_1.Ray(t.getHitPoint(),o,e.getIteration())).scaled(a))},e.prototype.getPerspectiveVector=function(e,t){var r=this.scene.getCamera();return Vector_1.Vector.normalize(Vector_1.Vector.add(r.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scale(r.getRightVector(),r.recenterX(e)),Vector_1.Vector.scale(r.getUpVector(),r.recenterY(t)))))},e.prototype.getLightPower=function(e,t,r){var o=r.getRandomPoint(),a=this.trace(new Ray_1.Ray(t.getHitPoint(),Vector_1.Vector.substract(Vector_1.Vector.substract(r.getPosition(),o),t.getHitPoint())));return a.getIntersect()&&a.getOwner().getMaterial().getEmissionValue()>0?t.getOwner().getMaterial().getColor():Color_1.Color.black},e.prototype.trace=function(e){for(var t,r=new IntersectPoint_1.IntersectPoint,o=1/0,a=this.scene.getObjects(),n=0,c=a;n<c.length;n++){var i=c[n];t=i.getIntersectData(e),t&&t.distance<o&&(o=t.distance,r.setIntersect(),r.setHitPoint(t.hitPoint),r.setNormal(t.normal),r.setDistanceFromOrigin(t.distance),r.setOwner(i))}return r},e.prototype.render=function(e,t){var r,o,a,n,c=.5,i=1;for(this.screenWidth=e,this.screenHeight=t;;){r=[];for(var l=0,s=0;s<this.screenHeight;s++)for(var _=0;_<this.screenWidth;_++){o=Color_1.Color.black;for(var g=0;i>g;g++)a=0,Math.random()>.5?a+=Math.random()*c:a-=Math.random()*c,n=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(_+a,s+a)),o=o.add(this.getColor(n));this.buffer[l]=o.divide(i);for(var V in this.buffer[l].getColor())this.buffer[l][V]=Color_1.Color.sRGBEncode(this.buffer[l][V]);r.push(this.buffer[l].getColor().red),r.push(this.buffer[l].getColor().green),r.push(this.buffer[l].getColor().blue),l++}for(var C=0;C<this.buffer.length;C++)this.buffer[C].getColor().red=0,this.buffer[C].getColor().green=0,this.buffer[C].getColor().blue=0;self.postMessage(r)}},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse("["+t+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),t[0],t[1]),objects:[new Polygon_1.Polygon(new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(700,700,-700),new Vector_1.Vector(-700,700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,191.25,191.25))).setLambertCoeff(1)),new Plane_1.Plane(new Vector_1.Vector(0,-1,0),new Vector_1.Vector(0,700,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(215,215,215)),new Color_1.Color(new FloatColor_1.FloatColor(30,30,30)))),new Plane_1.Plane(new Vector_1.Vector(-1,0,0),new Vector_1.Vector(700,0,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(76.5,255,25.5))).setLambertCoeff(1)),new Plane_1.Plane(new Vector_1.Vector(1,0,0),new Vector_1.Vector(-700,0,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,76.5,25.5))).setLambertCoeff(1)),new Plane_1.Plane(new Vector_1.Vector(0,0,-1),new Vector_1.Vector(0,0,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,191.25,191.25))).setLambertCoeff(1)),new Plane_1.Plane(new Vector_1.Vector(0,0,1),new Vector_1.Vector(0,0,-700)).setMaterial(new Material_1.Material(Color_1.Color.black).setLambertCoeff(1)),new Sphere_1.Sphere(new Vector_1.Vector(0,-300,400),400).setMaterial(new Material_1.Material(Color_1.Color.gray))]})),r.render(t[0],t[1])};


},{"./Camera":1,"./Color/Color":2,"./Color/FloatColor":3,"./Color/RGBColor":4,"./IntersectPoint":5,"./Material":6,"./Objects/Plane":8,"./Objects/Polygon":9,"./Objects/Sphere":10,"./RTMath":11,"./Ray":12,"./Scene":13,"./Vector":15}],15:[function(require,module,exports){
"use strict";var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.scale=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.normalize=function(n){return t.scale(n,1/n.getLength())},t.pow=function(n,r){return new t(Math.pow(n.y,r),Math.pow(n.z,r),Math.pow(n.x,r))},t.inverse=function(n){return t.scale(n,-1)},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scale(r,e))},t}();exports.Vector=Vector;


},{}]},{},[14])(14)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9zb3VyY2UvQ2FtZXJhLmpzIiwiL3NvdXJjZS9DYW1lcmEudHMiLCIvc291cmNlL0NvbG9yL0NvbG9yLmpzIiwiL3NvdXJjZS9Db2xvci9Db2xvci50cyIsIi9zb3VyY2UvQ29sb3IvRmxvYXRDb2xvci5qcyIsIi9zb3VyY2UvQ29sb3IvRmxvYXRDb2xvci50cyIsIi9zb3VyY2UvQ29sb3IvUkdCQ29sb3IuanMiLCIvc291cmNlL0NvbG9yL1JHQkNvbG9yLnRzIiwiL3NvdXJjZS9JbnRlcnNlY3RQb2ludC5qcyIsIi9zb3VyY2UvSW50ZXJzZWN0UG9pbnQudHMiLCIvc291cmNlL01hdGVyaWFsLmpzIiwiL3NvdXJjZS9NYXRlcmlhbC50cyIsIi9zb3VyY2UvT2JqZWN0cy9BYnN0cmFjdE9iamVjdC5qcyIsIi9zb3VyY2UvT2JqZWN0cy9BYnN0cmFjdE9iamVjdC50cyIsIi9zb3VyY2UvT2JqZWN0cy9QbGFuZS5qcyIsIi9zb3VyY2UvT2JqZWN0cy9QbGFuZS50cyIsIi9zb3VyY2UvT2JqZWN0cy9Qb2x5Z29uLmpzIiwiL3NvdXJjZS9PYmplY3RzL1BvbHlnb24udHMiLCIvc291cmNlL09iamVjdHMvU3BoZXJlLmpzIiwiL3NvdXJjZS9PYmplY3RzL1NwaGVyZS50cyIsIi9zb3VyY2UvUlRNYXRoLmpzIiwiL3NvdXJjZS9SVE1hdGgudHMiLCIvc291cmNlL1JheS5qcyIsIi9zb3VyY2UvUmF5LnRzIiwiL3NvdXJjZS9TY2VuZS5qcyIsIi9zb3VyY2UvU2NlbmUudHMiLCIvc291cmNlL1RyYWNlcldvcmtlci5qcyIsIi9zb3VyY2UvVHJhY2VyV29ya2VyLnRzIiwiL3NvdXJjZS9WZWN0b3IuanMiLCIvc291cmNlL1ZlY3Rvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLFlDQUEsSUFBQSxVQUFBLFFBQXVCLFlBRXZCLE9BQUEsV0FTSSxRQUFBLEdBQWEsRUFBa0IsRUFBbUIsRUFBcUIsR0FDbkUsS0FBSyxTQUFXLEVBQ2hCLEtBQUssVUFBWSxTQUFBLE9BQU8sVUFBVSxHQUNsQyxLQUFLLFlBQWMsRUFDbkIsS0FBSyxhQUFlLEVBRXBCLEtBQUssY0FBZ0IsU0FBQSxPQUFPLFVBQVUsU0FBQSxPQUFPLFVBQVUsS0FBSyxVQUFXLEtBQUssV0FDNUUsS0FBSyxZQUFjLFNBQUEsT0FBTyxNQUN0QixTQUFBLE9BQU8sVUFDSCxTQUFBLE9BQU8sTUFDSCxLQUFLLGNBQ0wsR0FBSSxVQUFBLE9BQU8sRUFBRyxHQUFJLEtBRzFCLEdBRUosS0FBSyxTQUFXLFNBQUEsT0FBTyxNQUNuQixTQUFBLE9BQU8sVUFDSCxTQUFBLE9BQU8sTUFDSCxLQUFLLGNBQ0wsS0FBSyxjQUdiLEdBaUNaLE1BN0JXLEdBQUEsVUFBQSxhQUFQLFdBQ0ksTUFBTyxNQUFLLFdBR1QsRUFBQSxVQUFBLFlBQVAsV0FDSSxNQUFPLE1BQUssVUFHVCxFQUFBLFVBQUEsaUJBQVAsV0FDSSxNQUFPLE1BQUssZUFHVCxFQUFBLFVBQUEsZUFBUCxXQUNJLE1BQU8sTUFBSyxhQUdULEVBQUEsVUFBQSxZQUFQLFdBQ0ksTUFBTyxNQUFLLFVBR1QsRUFBQSxVQUFBLFVBQVAsU0FBa0IsR0FDZCxHQUFJLEdBQWUsS0FBSyxhQUFlLEtBQUssWUFBZSxDQUUzRCxRQUFRLEVBQUssS0FBSyxZQUFjLEdBQU0sRUFBYyxLQUFLLGFBR3RELEVBQUEsVUFBQSxVQUFQLFNBQWtCLEdBQ2QsUUFBUyxFQUFLLEtBQUssYUFBZSxHQUFNLEVBQUksS0FBSyxjQUV6RCxJQWpFYSxTQUFBLE9BQU07Ozs7QUNGbkIsWUNBQSxJQUFBLFlBQUEsUUFBeUIsY0FDekIsYUFBQSxRQUEyQixnQkFFM0IsTUFBQSxXQVlJLFFBQUEsR0FBYSxHQUNULEtBQUssSUFBTSxFQUFNLElBQ2pCLEtBQUssTUFBUSxFQUFNLE1BQ25CLEtBQUssS0FBTyxFQUFNLEtBZ0YxQixNQTdFVyxHQUFBLFVBQUEsU0FBUCxXQUNJLE9BQ0ksSUFBSyxLQUFLLElBQ1YsTUFBTyxLQUFLLE1BQ1osS0FBTSxLQUFLLE9BSVosRUFBQSxVQUFBLElBQVAsU0FBWSxHQUNSLE1BQU8sSUFBSSxHQUNQLEdBQUksY0FBQSxXQUNBLEtBQUssSUFBTSxFQUFNLElBQ2pCLEtBQUssTUFBUSxFQUFNLE1BQ25CLEtBQUssS0FBTyxFQUFNLFFBS3ZCLEVBQUEsVUFBQSxVQUFQLFNBQWtCLEdBQ2QsTUFBTyxJQUFJLEdBQ1AsR0FBSSxjQUFBLFdBQ0EsS0FBSyxJQUFNLEVBQU0sSUFDakIsS0FBSyxNQUFRLEVBQU0sTUFDbkIsS0FBSyxLQUFPLEVBQU0sUUFLdkIsRUFBQSxVQUFBLE9BQVAsU0FBZSxHQUNYLE1BQU8sSUFBSSxHQUNQLEdBQUksY0FBQSxXQUNBLEtBQUssSUFBTSxFQUNYLEtBQUssTUFBUSxFQUNiLEtBQUssS0FBTyxLQUtqQixFQUFBLFVBQUEsU0FBUCxTQUFpQixHQUNiLE1BQU8sSUFBSSxHQUNQLEdBQUksY0FBQSxXQUNBLEtBQUssSUFBTSxFQUFNLElBQ2pCLEtBQUssTUFBUSxFQUFNLE1BQ25CLEtBQUssS0FBTyxFQUFNLFFBS3ZCLEVBQUEsVUFBQSxPQUFQLFNBQWUsR0FDWCxNQUFPLElBQUksR0FDUCxHQUFJLGNBQUEsV0FDQSxLQUFLLElBQU0sRUFDWCxLQUFLLE1BQVEsRUFDYixLQUFLLEtBQU8sS0FLVixFQUFBLFdBQWQsU0FBMEIsR0FDdEIsTUFBYSxVQUFULEVBQ08sTUFBUSxFQUVSLE1BQVMsS0FBQSxJQUFBLEVBQVMsVUFBYSxNQUloQyxFQUFBLE1BQWQsU0FBcUIsR0FDakIsT0FDSSxJQUFLLEtBQUssTUFBb0MsSUFBOUIsRUFBTSxXQUFXLEVBQU0sTUFDdkMsTUFBTyxLQUFLLE1BQXNDLElBQWhDLEVBQU0sV0FBVyxFQUFNLFFBQ3pDLEtBQU0sS0FBSyxNQUFxQyxJQUEvQixFQUFNLFdBQVcsRUFBTSxTQUlqQyxFQUFBLFdBQWYsU0FBMkIsR0FDdkIsTUFBTyxHQUFRLEVBQUksRUFBSSxHQXhGYixFQUFBLE1BQVEsR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLEVBQUcsRUFBRyxJQUNyQyxFQUFBLE1BQVEsR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLElBQUssSUFBSyxNQUN6QyxFQUFBLEtBQU8sR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLElBQUssSUFBSyxNQUN4QyxFQUFBLElBQU0sR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLElBQUssRUFBRyxJQUNyQyxFQUFBLE1BQVEsR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLEVBQUcsSUFBSyxJQUN2QyxFQUFBLEtBQU8sR0FBSSxHQUFNLEdBQUksWUFBQSxTQUFTLEVBQUcsRUFBRyxNQXFGdEQsSUEvRmEsU0FBQSxNQUFLOzs7O0FDSGxCLFlDQUEsSUFBQSxZQUFBLFdBS0ksUUFBQSxHQUFhLEVBQWEsRUFBZSxHQUNyQyxLQUFLLElBQU0sRUFDWCxLQUFLLE1BQVEsRUFDYixLQUFLLEtBQU8sRUFFcEIsTUFBQSxLQVZhLFNBQUEsV0FBVTs7OztBQ0F2QixZQ0FBLElBQUEsVUFBQSxXQUtJLFFBQUEsR0FBYSxFQUFhLEVBQWUsR0FDckMsS0FBSyxJQUFNLEVBQVMsUUFBUSxHQUM1QixLQUFLLE1BQVEsRUFBUyxRQUFRLEdBQzlCLEtBQUssS0FBTyxFQUFTLFFBQVEsR0FNckMsTUFIbUIsR0FBQSxRQUFmLFNBQXdCLEdBQ3BCLE1BQWlCLEtBQVYsRUFBYyxFQUFRLEVBQVEsS0FFN0MsSUFkYSxTQUFBLFNBQVE7Ozs7QUNBckIsWUNJQSxJQUFBLGdCQUFBLFdBQUEsUUFBQSxLQUNZLEtBQUEsYUFBdUIsRUE2Q25DLE1BdkNXLEdBQUEsVUFBQSxhQUFQLFdBQ0ksTUFBTyxNQUFLLGFBR1QsRUFBQSxVQUFBLFlBQVAsV0FDSSxNQUFPLE1BQUssVUFHVCxFQUFBLFVBQUEsVUFBUCxXQUNJLE1BQU8sTUFBSyxRQUdULEVBQUEsVUFBQSxTQUFQLFdBQ0ksTUFBTyxNQUFLLE9BR1QsRUFBQSxVQUFBLHNCQUFQLFdBQ0ksTUFBTyxNQUFLLG9CQUdULEVBQUEsVUFBQSxhQUFQLFdBQ0ksS0FBSyxhQUFjLEdBR2hCLEVBQUEsVUFBQSxZQUFQLFNBQW9CLEdBQ2hCLEtBQUssU0FBVyxHQUdiLEVBQUEsVUFBQSxVQUFQLFNBQWtCLEdBQ2QsS0FBSyxPQUFTLEdBR1gsRUFBQSxVQUFBLFNBQVAsU0FBaUIsR0FDYixLQUFLLE1BQVEsR0FHVixFQUFBLFVBQUEsc0JBQVAsU0FBOEIsR0FDMUIsS0FBSyxtQkFBcUIsR0FFbEMsSUE5Q2EsU0FBQSxlQUFjOzs7O0FDSjNCLFlDQUEsSUFBQSxTQUFBLFFBQXNCLGlCQUl0QixTQUFBLFdBT0ksUUFBQSxHQUNJLEVBQ0EsRUFDQSxHQVJJLEtBQUEsU0FBa0IsUUFBQSxNQUFNLE1BQ3hCLEtBQUEsYUFBdUIsR0FDdkIsS0FBQSxXQUFxQixHQUNyQixLQUFBLGdCQUEwQixFQU8xQixJQUNBLEtBQUssTUFBUSxHQUdiLElBQ0EsS0FBSyxTQUFXLEdBR2hCLElBQ0EsS0FBSyxnQkFBa0IsR0EyQ25DLE1BdkNXLEdBQUEsVUFBQSxTQUFQLFdBQ0ksTUFBTyxNQUFLLE9BR1QsRUFBQSxVQUFBLFlBQVAsV0FDSSxNQUFPLE1BQUssVUFHVCxFQUFBLFVBQUEsaUJBQVAsV0FDSSxPQUNJLEtBQUssU0FBUyxXQUFXLElBQU0sS0FBSyxTQUFTLFdBQVcsTUFBUSxLQUFLLFNBQVMsV0FBVyxNQUN6RixHQUdELEVBQUEsVUFBQSxnQkFBUCxXQUNJLE1BQU8sTUFBSyxjQUdULEVBQUEsVUFBQSxjQUFQLFdBQ0ksTUFBTyxNQUFLLFlBR1QsRUFBQSxVQUFBLG1CQUFQLFdBQ0ksTUFBTyxNQUFLLGlCQUdULEVBQUEsVUFBQSxnQkFBUCxTQUF1QixHQUluQixNQUhBLE1BQUssYUFBZSxFQUNwQixLQUFLLFdBQWEsRUFBSSxFQUVmLE1BR0osRUFBQSxVQUFBLGNBQVAsU0FBcUIsR0FJakIsTUFIQSxNQUFLLFdBQWEsRUFDbEIsS0FBSyxhQUFlLEVBQUksRUFFakIsTUFFZixJQWhFYSxTQUFBLFNBQVE7Ozs7QUNKckIsWUNJQSxJQUFBLGdCQUFBLFdBQUEsUUFBQSxNQU1BLE1BQUEsS0FOc0IsU0FBQSxlQUFjOzs7O0FDSnBDLFlBQ0EsSUFBSSxXQUFhLE1BQVEsS0FBSyxXQUFjLFNBQVUsRUFBRyxHQUVyRCxRQUFTLEtBQU8sS0FBSyxZQUFjLEVBRG5DLElBQUssR0FBSSxLQUFLLEdBQU8sRUFBRSxlQUFlLEtBQUksRUFBRSxHQUFLLEVBQUUsR0FFbkQsR0FBRSxVQUFrQixPQUFOLEVBQWEsT0FBTyxPQUFPLElBQU0sRUFBRyxVQUFZLEVBQUUsVUFBVyxHQUFJLEtDSm5GLGlCQUFBLFFBQStCLG9CQUMvQixRQUFBLFFBQXNCLGtCQUN0QixXQUFBLFFBQXlCLGVBRXpCLFNBQUEsUUFBdUIsYUFFdkIsU0FBQSxRQUF1QixhQUV2QixNQUFBLFNBQUEsR0FLSSxRQUFBLEdBQWEsRUFBZ0IsR0FDekIsRUFBQSxLQUFBLE1BSkksS0FBQSxNQUFnQixHQUFJLFVBQUEsT0FBTyxFQUFHLEVBQUcsR0FDakMsS0FBQSxTQUFxQixHQUFJLFlBQUEsU0FBUyxRQUFBLE1BQU0sTUFLNUMsS0FBSyxPQUFTLEVBRVYsSUFDQSxLQUFLLE1BQVEsR0FpRXpCLE1BNUUyQixXQUFBLEVBQUEsR0FlaEIsRUFBQSxVQUFBLGlCQUFQLFNBQXlCLEdBQ3JCLEdBQUksR0FDQSxFQUNBLEVBQ0EsU0FBQSxPQUFPLElBQ0gsU0FBQSxPQUFPLFVBQ0gsS0FBSyxNQUNMLEVBQUksYUFFUixLQUFLLFFBRVQsU0FBQSxPQUFPLElBQ0gsRUFBSSxlQUNKLEtBQUssWUFHYixNQUFJLEdBQUssU0FBQSxPQUFPLFNBaUJoQixNQWJBLEdBQVcsU0FBQSxPQUFPLElBQ2QsRUFBSSxZQUNKLFNBQUEsT0FBTyxNQUNILEVBQUksZUFDSixJQUlSLEVBQVcsU0FBQSxPQUFPLFVBQ2QsRUFDQSxFQUFJLGFBQ04sYUFHRSxTQUFVLEVBQ1YsT0FBUSxLQUFLLFlBQ2IsU0FBVSxJQUlYLEVBQUEsVUFBQSxZQUFQLFdBQ0ksTUFBTyxNQUFLLFVBR1QsRUFBQSxVQUFBLFlBQVAsV0FDSSxNQUFPLE1BQUssT0FHVCxFQUFBLFVBQUEsZUFBUCxXQUNJLE1BQU8sSUFBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLElBR3JCLEVBQUEsVUFBQSxVQUFQLFdBQ0ksTUFBTyxNQUFLLFFBR1QsRUFBQSxVQUFBLFlBQVAsU0FBb0IsR0FHaEIsTUFGQSxNQUFLLFNBQVcsRUFFVCxNQUVmLEdBNUUyQixpQkFBQSxlQUFkLFNBQUEsTUFBSzs7OztBQ1JsQixZQUNBLElBQUksV0FBYSxNQUFRLEtBQUssV0FBYyxTQUFVLEVBQUcsR0FFckQsUUFBUyxLQUFPLEtBQUssWUFBYyxFQURuQyxJQUFLLEdBQUksS0FBSyxHQUFPLEVBQUUsZUFBZSxLQUFJLEVBQUUsR0FBSyxFQUFFLEdBRW5ELEdBQUUsVUFBa0IsT0FBTixFQUFhLE9BQU8sT0FBTyxJQUFNLEVBQUcsVUFBWSxFQUFFLFVBQVcsR0FBSSxLQ0puRixTQUFBLFFBQXVCLGFBQ3ZCLGlCQUFBLFFBQStCLG9CQUMvQixRQUFBLFFBQXNCLGtCQUN0QixXQUFBLFFBQXlCLGVBR3pCLFNBQUEsUUFBdUIsYUFFdkIsUUFBQSxTQUFBLEdBSUksUUFBQSxLREdJLElDSFMsR0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLFVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLFVBQUEsRUFDVCxHQUFBLEtBQUEsTUFISSxLQUFBLFNBQXFCLEdBQUksWUFBQSxTQUFTLFFBQUEsTUFBTSxNQUs1QyxLQUFLLFNBQVcsRUFvRnhCLE1BM0Y2QixXQUFBLEVBQUEsR0FVbEIsRUFBQSxVQUFBLGlCQUFQLFNBQXlCLEdBQ3JCLEdBQUksR0FDQSxFQUNBLEVBRUEsRUFDQSxFQUZBLEVBQWlCLEtBQUssV0FXMUIsSUFQQSxFQUF5QixTQUFBLE9BQU8sSUFBSSxLQUFLLFNBQVMsR0FBSSxHQUV0RCxFQUFjLFNBQUEsT0FBTyxJQUFJLEVBQVEsRUFBSSxnQkFDckMsR0FBYSxTQUFBLE9BQU8sSUFBSSxFQUFRLEVBQUksYUFBZSxFQUVuRCxFQUFXLEVBQVksSUFFbkIsRUFBVyxTQUFBLE9BQU8sU0FBdEIsQ0FJQSxFQUFXLEVBQUksWUFBWSxFQUUzQixLQUFLLEdBQUksR0FBSSxFQUFHLEVBQWlCLEtBQUssU0FBUyxPQUFZLEVBQUosRUFBb0IsSUFBSyxDQUM1RSxHQUFJLEdBQWtCLEtBQUssU0FBUyxHQUNoQyxFQUFPLE1BUVgsSUFMSSxFQURBLElBQU0sRUFBaUIsRUFDYixLQUFLLFNBQVMsR0FFZCxLQUFLLFNBQVMsRUFBSSxJQUkzQixFQUFRLGtCQUNMLFNBQUEsT0FBTyxVQUFVLEVBQVMsR0FDMUIsU0FBQSxPQUFPLFVBQVUsRUFBVSxHQUMzQixLQUFLLGFBR1QsT0FJUixPQUNJLFNBQVUsRUFDVixPQUFRLEVBQ1IsU0FBVSxLQUlYLEVBQUEsVUFBQSxZQUFQLFdBQ0ksTUFBTyxNQUFLLFVBR1QsRUFBQSxVQUFBLFVBQVAsV0FDSSxHQUFJLEdBQWdCLFNBQUEsT0FBTyxVQUFVLEtBQUssU0FBUyxHQUFJLEtBQUssU0FBUyxJQUNqRSxFQUFnQixTQUFBLE9BQU8sVUFBVSxLQUFLLFNBQVMsR0FBSSxLQUFLLFNBQVMsR0FFckUsT0FBTyxVQUFBLE9BQU8sVUFBVSxTQUFBLE9BQU8sTUFBTSxFQUFPLEtBR3pDLEVBQUEsVUFBQSxZQUFQLFdBQ0ksTUFBTyxNQUFLLFNBQVMsSUFJbEIsRUFBQSxVQUFBLGVBQVAsV0FDSSxNQUFPLElBQUksVUFBQSxPQUFPLEVBQUcsRUFBRyxJQUlyQixFQUFBLFVBQUEsWUFBUCxTQUFvQixHQUdoQixNQUZBLE1BQUssU0FBVyxFQUVULE1BR0ksRUFBQSxrQkFBZixTQUFrQyxFQUFpQixFQUFpQixHQUNoRSxHQUFJLEdBQXFCLFNBQUEsT0FBTyxNQUFNLEVBQVMsRUFFL0MsT0FBTyxVQUFBLE9BQU8sSUFBSSxFQUFZLElBQVcsR0FFakQsR0EzRjZCLGlCQUFBLGVBQWhCLFNBQUEsUUFBTzs7OztBQ1JwQixZQUNBLElBQUksV0FBYSxNQUFRLEtBQUssV0FBYyxTQUFVLEVBQUcsR0FFckQsUUFBUyxLQUFPLEtBQUssWUFBYyxFQURuQyxJQUFLLEdBQUksS0FBSyxHQUFPLEVBQUUsZUFBZSxLQUFJLEVBQUUsR0FBSyxFQUFFLEdBRW5ELEdBQUUsVUFBa0IsT0FBTixFQUFhLE9BQU8sT0FBTyxJQUFNLEVBQUcsVUFBWSxFQUFFLFVBQVcsR0FBSSxLQ0puRixTQUFBLFFBQXVCLGFBQ3ZCLGlCQUFBLFFBQStCLG9CQUMvQixRQUFBLFFBQXNCLGtCQUN0QixXQUFBLFFBQXlCLGVBR3pCLFNBQUEsUUFBdUIsYUFFdkIsT0FBQSxTQUFBLEdBS0ksUUFBQSxHQUFhLEVBQWdCLEdBQ3pCLEVBQUEsS0FBQSxNQUhJLEtBQUEsU0FBcUIsR0FBSSxZQUFBLFNBQVMsUUFBQSxNQUFNLEtBSzVDLEtBQUssU0FBVyxFQUNoQixLQUFLLE9BQVMsRUE0RnRCLE1Bckc0QixXQUFBLEVBQUEsR0FZakIsRUFBQSxVQUFBLGlCQUFQLFNBQXlCLEdBQ3JCLEdBSUksR0FDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFWQSxFQUFJLFNBQUEsT0FBTyxVQUFVLEVBQUksWUFBYSxLQUFLLFVBQzNDLEVBQVksU0FBQSxPQUFPLElBQUksRUFBRyxFQUFJLGdCQUM5QixFQUFZLFNBQUEsT0FBTyxJQUFJLEVBQUcsR0FBSyxLQUFBLElBQUEsS0FBSyxPQUFVLEdBQzlDLEVBQVksS0FBQSxJQUFBLEVBQUssR0FBSSxDQVN6QixNQUFJLEVBQUksR0FBUyxFQUFKLEdBSVQsR0FBSyxJQUNMLEdBQU0sRUFBSSxLQUFLLEtBQUssR0FDcEIsR0FBTSxFQUFJLEtBQUssS0FBSyxHQUNwQixFQUFPLEtBQUssSUFBSSxFQUFJLEdBQ3BCLEVBQU8sS0FBSyxJQUFJLEVBQUksR0FHaEIsRUFEQSxFQUFPLFNBQUEsT0FBTyxRQUNNLEVBRUEsRUFHcEIsRUFBb0IsU0FBQSxPQUFPLFVBY25DLE1BVEEsR0FBVyxTQUFBLE9BQU8sSUFDZCxTQUFBLE9BQU8sTUFBTSxFQUFJLGVBQWdCLEdBQ2pDLEVBQUksYUFFUixFQUFXLFNBQUEsT0FBTyxVQUNkLEVBQ0EsRUFBSSxhQUNOLGFBR0UsU0FBVSxFQUNWLE9BQVEsS0FBSyxVQUFVLEdBQ3ZCLFNBQVUsSUFJWCxFQUFBLFVBQUEsWUFBUCxXQUNJLE1BQU8sTUFBSyxVQUdULEVBQUEsVUFBQSxZQUFQLFdBQ0ksTUFBTyxNQUFLLFVBR1QsRUFBQSxVQUFBLGVBQVAsV0FDSSxHQUFJLEdBQUksS0FBSyxTQUNULEVBQUksS0FBSyxTQUNULEVBQUksRUFBSSxLQUFLLEdBQUssRUFDbEIsRUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEVBQUksRUFBSSxHQUFJLEdBRXRDLE9BQU8sSUFBSSxVQUFBLE9BQ1AsS0FBSyxPQUFTLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxHQUNyQyxLQUFLLE9BQVMsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQ3JDLEtBQUssT0FBUyxLQUFLLElBQUksS0FJeEIsRUFBQSxVQUFBLFVBQVAsV0FDSSxNQUFPLE1BQUssUUFHVCxFQUFBLFVBQUEsVUFBUCxTQUFrQixHQUNkLE1BQU8sVUFBQSxPQUFPLFVBQ1YsU0FBQSxPQUFPLE1BQ0gsU0FBQSxPQUFPLFVBQVUsRUFBTyxLQUFLLFVBQzdCLEVBQUksS0FBSyxVQUtkLEVBQUEsVUFBQSxZQUFQLFNBQW9CLEdBR2hCLE1BRkEsTUFBSyxTQUFXLEVBRVQsTUFFZixHQXJHNEIsaUJBQUEsZUFBZixTQUFBLE9BQU07Ozs7QUNSbkIsWUNBQSxJQUFjLFNBQWQsU0FBYyxHQUNHLEVBQUEsUUFBVSxNQURiLE9BQUEsUUFBQSxTQUFBLFFBQUE7Ozs7QUNBZCxZQ0FBLElBQUEsVUFBQSxRQUF1QixZQUV2QixJQUFBLFdBS0ksUUFBQSxHQUFhLEVBQWdCLEVBQW1CLEdBRnhDLEtBQUEsVUFBb0IsRUFHeEIsS0FBSyxPQUFTLEVBQ2QsS0FBSyxVQUFZLFNBQUEsT0FBTyxVQUFVLEdBRTlCLElBQ0EsS0FBSyxVQUFZLEdBdUI3QixNQW5CVyxHQUFBLFVBQUEsVUFBUCxXQUNJLE1BQU8sTUFBSyxRQUdULEVBQUEsVUFBQSxhQUFQLFdBQ0ksTUFBTyxNQUFLLFdBR1QsRUFBQSxVQUFBLGFBQVAsV0FDSSxNQUFPLE1BQUssV0FHVCxFQUFBLFVBQUEsWUFBUCxTQUFvQixHQUNoQixNQUFPLFVBQUEsT0FBTyxJQUFJLEtBQUssT0FBUSxTQUFBLE9BQU8sTUFBTSxLQUFLLFVBQVcsS0FHekQsRUFBQSxVQUFBLGFBQVAsU0FBcUIsR0FDakIsS0FBSyxVQUFZLEdBRXpCLElBakNhLFNBQUEsSUFBRzs7OztBQ0ZoQixZQ0dBLElBQUEsT0FBQSxXQUtJLFFBQUEsR0FBYSxHQUhMLEtBQUEsV0FDQSxLQUFBLFVBR0osS0FBSyxRQUFVLEVBQVEsUUFDdkIsS0FBSyxPQUFTLEVBQVEsT0FDdEIsS0FBSyxPQUFTLEVBQVEsT0FrQjlCLE1BZlcsR0FBQSxVQUFBLFVBQVAsU0FBa0IsR0FDZCxLQUFLLFFBQVEsS0FBSyxJQUdmLEVBQUEsVUFBQSxVQUFQLFdBQ0ksTUFBTyxNQUFLLFFBR1QsRUFBQSxVQUFBLFVBQVAsV0FDSSxNQUFPLE1BQUssUUFHVCxFQUFBLFVBQUEsV0FBUCxXQUNJLE1BQU8sTUFBSyxTQUVwQixJQTFCYSxTQUFBLE1BQUs7Ozs7QUNEbEIsWUNHQSxJQUFBLFVBQUEsUUFBdUIsWUFDdkIsUUFBQSxRQUFzQixpQkFDdEIsaUJBQUEsUUFBK0Isb0JBQy9CLFdBQUEsUUFBeUIsY0FDekIsUUFBQSxRQUFzQixtQkFDdEIsVUFBQSxRQUF3QixxQkFDeEIsTUFBQSxRQUFvQixTQUNwQixXQUFBLFFBQXlCLG9CQUN6QixTQUFBLFFBQXVCLFlBQ3ZCLFFBQUEsUUFBc0IsV0FDdEIsU0FBQSxRQUF1QixvQkFFdkIsU0FBQSxRQUF1QixZQUN2QixhQUFBLFFBQXlCLHNCQUV6QixPQUFBLFdBTUksUUFBQSxLQUxRLEtBQUEsVUFFQSxLQUFBLFlBQXNCLElBQ3RCLEtBQUEsYUFBdUIsR0FHM0IsS0FBSyxHQUFJLEdBQUksRUFBRyxFQUFJLEtBQUssWUFBYyxLQUFLLGFBQWUsRUFBRyxJQUMxRCxLQUFLLE9BQU8sS0FBSyxRQUFBLE1BQU0sT0F3Vm5DLE1BcFZZLEdBQUEsVUFBQSx1QkFBUixTQUFnQyxHQUM1QixHQUlJLEdBQ0EsRUFMQSxFQUFZLEtBQUssU0FDakIsRUFBWSxLQUFLLFNBQ2pCLEVBQVksS0FBSyxLQUFLLEdBQ3RCLEVBQWdCLEVBQUksS0FBSyxHQUFLLENBWWxDLE9BUEksR0FEQSxLQUFLLElBQUksRUFBTyxpQkFBb0IsR0FBSyxHQUNsQyxTQUFBLE9BQU8sTUFBTSxFQUFRLEdBQUksVUFBQSxPQUFPLEVBQUUsRUFBRSxJQUVwQyxTQUFBLE9BQU8sTUFBTSxFQUFRLEdBQUksVUFBQSxPQUFPLEVBQUUsRUFBRSxJQUcvQyxFQUFPLFNBQUEsT0FBTyxNQUFNLEVBQVEsR0FFckIsU0FBQSxPQUFPLElBQ1YsU0FBQSxPQUFPLE1BQU0sRUFBUyxLQUFLLEtBQUssRUFBSSxJQUNwQyxTQUFBLE9BQU8sSUFDSCxTQUFBLE9BQU8sTUFBTSxFQUFNLEVBQUksS0FBSyxJQUFJLElBQ2hDLFNBQUEsT0FBTyxNQUFNLEVBQU0sRUFBSSxLQUFLLElBQUksT0FLcEMsRUFBQSxVQUFBLFNBQVIsU0FBa0IsR0FDZCxHQUNJLEdBRUEsRUFDQSxFQUNBLEVBR0EsRUFSQSxFQUFlLFFBQUEsTUFBTSxNQUVyQixFQUFlLEtBQUssTUFBTSxHQUkxQixFQUFhLEVBQ2IsRUFBdUIsRUFBSSxjQUcvQixJQUFJLEdBQWdCLEVBQUcsQ0FDbkIsR0FBSSxLQUFLLFVBQVksR0FDakIsTUFBTyxTQUFBLE1BQU0sS0FHakIsR0FBYSxFQUFJLEdBR3JCLElBQUssRUFBYSxlQUNkLE1BQU8sU0FBQSxNQUFNLEtBR2pCLEdBQXFCLFFBQUEsTUFBTSxLQUUzQixLQUFrQixHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUssTUFBTSxhQUF4QixFQUFBLEVBQUEsT0FBQSxJQUFxQyxDQUFyQyxHQUFJLEdBQUssRUFBQSxFQUNOLEdBQU0sY0FBYyxlQUFpQixRQUFBLE1BQU0sUUFJL0MsRUFBcUIsRUFDaEIsSUFBSSxLQUFLLGNBQWMsRUFBSyxFQUFjLEtBOENuRCxNQTNDQSxHQUFRLEVBQW1CLE9BQU8sRUFBSSxnQkFBZ0IsSUFDbEQsRUFDSyxXQUNBLGNBQ0EsV0FDQSxTQUNHLEVBQ0ssV0FDQSxjQUNBLGNBQ0EsT0FBTyxLQUl4QixFQUFlLEtBQUssdUJBQXVCLEVBQWEsYUFHcEQsRUFEQSxTQUFBLE9BQU8sSUFBSSxFQUFjLEVBQUksZ0JBQWtCLEVBQ3BDLFNBQUEsT0FBTyxJQUNkLEVBQUksWUFDSixTQUFBLE9BQU8sTUFDSCxFQUFJLGVBQ0osRUFBYSx5QkFBMkIsRUFBSSxTQUFBLE9BQU8sV0FJaEQsU0FBQSxPQUFPLElBQ2QsRUFBSSxZQUNKLFNBQUEsT0FBTyxNQUNILEVBQUksZUFDSixFQUFhLHlCQUEyQixFQUFJLFNBQUEsT0FBTyxXQUsvRCxFQUFPLFNBQUEsT0FBTyxJQUFJLEVBQWMsRUFBYSxhQUM3QyxFQUFZLEtBQUssU0FDYixHQUFJLE9BQUEsSUFDQSxFQUNBLElBQ0UsSUFJSCxFQUFNLElBQ1QsRUFDSyxTQUNHLEVBQ0ssV0FDQSxjQUNBLFlBRVIsT0FBTyxHQUNQLE9BQU8sSUFDUCxPQUFPLEtBSVosRUFBQSxVQUFBLG1CQUFSLFNBQTRCLEVBQVUsR0FDbEMsR0FBSSxHQUVBLEVBREEsRUFBMEIsRUFBVSxXQUFXLGNBQWMsb0JBR2pFLE9BQXdCLEtBQXBCLEVBQ08sUUFBQSxNQUFNLE9BR2pCLEVBQWUsU0FBQSxPQUFPLFFBQ2xCLEVBQUksZUFDSixFQUFVLGFBR2QsRUFBa0IsS0FBSyxTQUNuQixHQUFJLE9BQUEsSUFBSSxFQUFVLGNBQWUsRUFBYyxFQUFJLGlCQUNyRCxPQUFPLEtBS0wsRUFBQSxVQUFBLHFCQUFSLFNBQThCLEVBQVcsR0FDckMsR0FBSSxHQUFpQixLQUFLLE1BQU0sV0FFaEMsT0FBTyxVQUFBLE9BQU8sVUFDVixTQUFBLE9BQU8sSUFDSCxFQUFPLG1CQUNQLFNBQUEsT0FBTyxJQUNILFNBQUEsT0FBTyxNQUNILEVBQU8saUJBQ1AsRUFBTyxVQUFVLElBRXJCLFNBQUEsT0FBTyxNQUNILEVBQU8sY0FDUCxFQUFPLFVBQVUsUUFPN0IsRUFBQSxVQUFBLGNBQVIsU0FBdUIsRUFBVSxFQUFnQixHQUM3QyxHQUFJLEdBQUksRUFBTyxpQkFFWCxFQUFZLEtBQUssTUFDakIsR0FBSSxPQUFBLElBQ0EsRUFBVSxjQUNWLFNBQUEsT0FBTyxVQUNILFNBQUEsT0FBTyxVQUNILEVBQU8sY0FDUCxHQUVKLEVBQVUsZ0JBS3RCLE9BQ0ksR0FBVSxnQkFDVixFQUFVLFdBQVcsY0FBYyxtQkFBcUIsRUFFakQsRUFDRixXQUNBLGNBQ0EsV0FFRSxRQUFBLE1BQU0sT0FtRWIsRUFBQSxVQUFBLE1BQVIsU0FBZSxHQU1YLElBQW1CLEdBSmYsR0FEQSxFQUFlLEdBQUksa0JBQUEsZUFFbkIsRUFBc0IsRUFBQSxFQUN0QixFQUFpQyxLQUFLLE1BQU0sYUFFN0IsRUFBQSxFQUFBLEVBQUEsRUFBZCxFQUFBLEVBQUEsT0FBQSxJQUEyQixDQUEzQixHQUFJLEdBQU0sRUFBQSxFQUNYLEdBQWdCLEVBQU8saUJBQWlCLEdBR3BDLEdBQ0EsRUFBd0IsU0FBSSxJQUU1QixFQUFjLEVBQXdCLFNBRXRDLEVBQWEsZUFDYixFQUFhLFlBQVksRUFBd0IsVUFDakQsRUFBYSxVQUFVLEVBQXNCLFFBQzdDLEVBQWEsc0JBQXNCLEVBQXdCLFVBQzNELEVBQWEsU0FBUyxJQUk5QixNQUFPLElBR0osRUFBQSxVQUFBLE9BQVAsU0FBZSxFQUFxQixHQUNoQyxHQUdJLEdBQ0EsRUFDQSxFQUNBLEVBTkUsRUFBa0IsR0FDbEIsRUFBTSxDQVVaLEtBSEEsS0FBSyxZQUFjLEVBQ25CLEtBQUssYUFBZSxJQUVQLENBQ1QsSUFJQSxLQUFLLEdBRkQsR0FBSSxFQUVDLEVBQUksRUFBRyxFQUFJLEtBQUssYUFBYyxJQUNuQyxJQUFLLEdBQUksR0FBSSxFQUFHLEVBQUksS0FBSyxZQUFhLElBQUssQ0FDdkMsRUFBUSxRQUFBLE1BQU0sS0FFZCxLQUFLLEdBQUksR0FBWSxFQUFlLEVBQVosRUFBaUIsSUFDckMsRUFBTyxFQUVILEtBQUssU0FBVyxHQUNoQixHQUFRLEtBQUssU0FBVyxFQUV4QixHQUFRLEtBQUssU0FBVyxFQUc1QixFQUFNLEdBQUksT0FBQSxJQUNOLEtBQUssTUFBTSxZQUFZLGNBQ3ZCLEtBQUsscUJBQXFCLEVBQUksRUFBTSxFQUFJLElBRzVDLEVBQVEsRUFBTSxJQUFJLEtBQUssU0FBUyxHQUdwQyxNQUFLLE9BQU8sR0FBSyxFQUFNLE9BQU8sRUFFOUIsS0FBSyxHQUFJLEtBQWEsTUFBSyxPQUFPLEdBQUcsV0FDakMsS0FBSyxPQUFPLEdBQUcsR0FBYSxRQUFBLE1BQU0sV0FBVyxLQUFLLE9BQU8sR0FBRyxHQUdoRSxHQUFPLEtBQUssS0FBSyxPQUFPLEdBQUcsV0FBZ0IsS0FDM0MsRUFBTyxLQUFLLEtBQUssT0FBTyxHQUFHLFdBQWtCLE9BQzdDLEVBQU8sS0FBSyxLQUFLLE9BQU8sR0FBRyxXQUFpQixNQUU1QyxJQUlSLElBQUksR0FBSyxHQUFJLEVBQUcsRUFBSSxLQUFLLE9BQU8sT0FBUSxJQUNwQyxLQUFLLE9BQU8sR0FBRyxXQUFnQixJQUFJLEVBQ25DLEtBQUssT0FBTyxHQUFHLFdBQWtCLE1BQUksRUFDckMsS0FBSyxPQUFPLEdBQUcsV0FBaUIsS0FBSSxDQUd4QyxNQUFLLFlBQVksS0FJbEIsRUFBQSxVQUFBLFNBQVAsU0FBaUIsR0FDYixLQUFLLE1BQVEsR0FFckIsSUFFQSxXQUFZLFNBQVUsR0FDbEIsR0FBSSxHQUFPLEVBQVEsSUFFQyxpQkFBVixLQUNOLEVBQU8sS0FBSyxNQUFNLElBQUksRUFBSyxLQUcvQixJQUFJLEdBQVMsR0FBSSxPQUVqQixHQUFPLFNBQ0gsR0FBSSxTQUFBLE9BQ0EsT0FBUSxHQUFJLFVBQUEsT0FDUixHQUFJLFVBQUEsT0FBTyxFQUFHLEVBQUcsTUFDakIsR0FBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLEdBQ2pCLEVBQUssR0FDTCxFQUFLLElBRVQsU0FHSSxHQUFJLFdBQUEsUUFDQSxHQUFJLFVBQUEsT0FBTyxLQUFNLElBQUssTUFDdEIsR0FBSSxVQUFBLE9BQU8sSUFBSyxJQUFLLE1BQ3JCLEdBQUksVUFBQSxPQUFPLEtBQU0sSUFBSyxNQUN4QixZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLE9BQVksT0FBWSxVQUFjLGdCQUFnQixJQUN4RyxHQUFJLFNBQUEsTUFBTSxHQUFJLFVBQUEsT0FBTyxFQUFHLEdBQUksR0FBSSxHQUFJLFVBQUEsT0FBUSxFQUFHLElBQUssSUFDL0MsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssTUFBTyxHQUFJLFNBQUEsTUFBTSxHQUFJLGNBQUEsV0FBVyxHQUFJLEdBQUksT0FDdkcsR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sR0FBSSxFQUFHLEdBQUksR0FBSSxVQUFBLE9BQVEsSUFBSyxFQUFHLElBQUksWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxLQUFXLElBQUssUUFBYSxnQkFBZ0IsSUFDckosR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLEdBQUksR0FBSSxVQUFBLE9BQVEsS0FBTSxFQUFHLElBQUksWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLEtBQVcsUUFBYSxnQkFBZ0IsSUFDckosR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLElBQUssR0FBSSxVQUFBLE9BQVEsRUFBRyxFQUFHLE1BQU0sWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxPQUFZLE9BQVksVUFBYyxnQkFBZ0IsSUFDOUosR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLEdBQUksR0FBSSxVQUFBLE9BQVEsRUFBRyxFQUFHLE9BQU8sWUFBWSxHQUFJLFlBQUEsU0FBUyxRQUFBLE1BQU0sT0FBTyxnQkFBZ0IsSUFJOUcsR0FBSSxVQUFBLE9BQU8sR0FBSSxVQUFBLE9BQU8sRUFBRyxLQUFNLEtBQU0sS0FDaEMsWUFBWSxHQUFJLFlBQUEsU0FBUyxRQUFBLE1BQU0sV0FLaEQsRUFBTyxPQUFPLEVBQUssR0FBSSxFQUFLOzs7O0FDOVpoQyxZQ0FBLElBQUEsUUFBQSxXQUtJLFFBQUEsR0FBYSxFQUFXLEVBQVcsR0FDL0IsS0FBSyxFQUFJLEVBQ1QsS0FBSyxFQUFJLEVBQ1QsS0FBSyxFQUFJLEVBdUVqQixNQXBFSSxHQUFBLFVBQUEsZUFBQSxXQUNJLE9BQ0ksRUFBRyxLQUFLLEVBQ1IsRUFBRyxLQUFLLEVBQ1IsRUFBRyxLQUFLLElBSVQsRUFBQSxVQUFBLFFBQVAsV0FDSSxPQUNJLEtBQUssRUFDTCxLQUFLLEVBQ0wsS0FBSyxJQUlOLEVBQUEsVUFBQSxVQUFQLFdBQ0ksTUFBTyxNQUFLLEtBQUssS0FBQSxJQUFBLEtBQUssRUFBSyxHQUFJLEtBQUEsSUFBQSxLQUFLLEVBQUssR0FBSSxLQUFBLElBQUEsS0FBSyxFQUFLLEtBRzdDLEVBQUEsTUFBZCxTQUFxQixFQUFnQixHQUNqQyxNQUFPLElBQUksR0FBTyxFQUFPLEVBQUksRUFBWSxFQUFPLEVBQUksRUFBWSxFQUFPLEVBQUksSUFHakUsRUFBQSxJQUFkLFNBQW1CLEVBQWlCLEdBQ2hDLE1BQU8sSUFBSSxHQUFPLEVBQVEsRUFBSSxFQUFRLEVBQUcsRUFBUSxFQUFJLEVBQVEsRUFBRyxFQUFRLEVBQUksRUFBUSxJQUcxRSxFQUFBLFVBQWQsU0FBeUIsRUFBaUIsR0FDdEMsTUFBTyxJQUFJLEdBQU8sRUFBUSxFQUFJLEVBQVEsRUFBRyxFQUFRLEVBQUksRUFBUSxFQUFHLEVBQVEsRUFBSSxFQUFRLElBRzFFLEVBQUEsSUFBZCxTQUFtQixFQUFpQixHQUNoQyxNQUFPLEdBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxHQUdqRSxFQUFBLE1BQWQsU0FBcUIsRUFBaUIsR0FDbEMsTUFBTyxJQUFJLEdBQ1AsRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUM1QyxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQzVDLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsSUFJdEMsRUFBQSxVQUFkLFNBQXlCLEdBQ3JCLE1BQU8sR0FBTyxNQUFNLEVBQVEsRUFBSSxFQUFPLGNBRzdCLEVBQUEsSUFBZCxTQUFtQixFQUFnQixHQUMvQixNQUFPLElBQUksR0FDUCxLQUFBLElBQUEsRUFBTyxFQUFLLEdBQ1osS0FBQSxJQUFBLEVBQU8sRUFBSyxHQUNaLEtBQUEsSUFBQSxFQUFPLEVBQUssS0FJTixFQUFBLFFBQWQsU0FBdUIsR0FDbkIsTUFBTyxHQUFPLE1BQU0sRUFBUSxLQUdsQixFQUFBLFFBQWQsU0FBdUIsRUFBZ0IsR0FDbkMsR0FBSSxHQUFJLEVBQUksRUFBTyxJQUFJLEVBQVEsRUFFL0IsT0FBTyxHQUFPLFVBQ1YsRUFDQSxFQUFPLE1BQU0sRUFBUSxLQUdqQyxJQS9FYSxTQUFBLE9BQU0iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi9WZWN0b3JcIik7XG52YXIgQ2FtZXJhID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYW1lcmEocG9zaXRpb24sIGRpcmVjdGlvbiwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShkaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gc2NyZWVuV2lkdGg7XG4gICAgICAgIHRoaXMuc2NyZWVuSGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IgPSBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodGhpcy5kaXJlY3Rpb24sIHRoaXMucG9zaXRpb24pKTtcbiAgICAgICAgdGhpcy5yaWdodFZlY3RvciA9IFZlY3Rvcl8xLlZlY3Rvci5zY2FsZShWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplKFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyh0aGlzLmZvcndhcmRWZWN0b3IsIG5ldyBWZWN0b3JfMS5WZWN0b3IoMCwgLTEsIDApKSksIDMpO1xuICAgICAgICB0aGlzLnVwVmVjdG9yID0gVmVjdG9yXzEuVmVjdG9yLnNjYWxlKFZlY3Rvcl8xLlZlY3Rvci5ub3JtYWxpemUoVmVjdG9yXzEuVmVjdG9yLmNyb3NzKHRoaXMuZm9yd2FyZFZlY3RvciwgdGhpcy5yaWdodFZlY3RvcikpLCAzKTtcbiAgICB9XG4gICAgQ2FtZXJhLnByb3RvdHlwZS5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9O1xuICAgIENhbWVyYS5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH07XG4gICAgQ2FtZXJhLnByb3RvdHlwZS5nZXRGb3J3YXJkVmVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3J3YXJkVmVjdG9yO1xuICAgIH07XG4gICAgQ2FtZXJhLnByb3RvdHlwZS5nZXRSaWdodFZlY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHRWZWN0b3I7XG4gICAgfTtcbiAgICBDYW1lcmEucHJvdG90eXBlLmdldFVwVmVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cFZlY3RvcjtcbiAgICB9O1xuICAgIENhbWVyYS5wcm90b3R5cGUucmVjZW50ZXJYID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIGFzcGVjdENvZWZmID0gKHRoaXMuc2NyZWVuSGVpZ2h0IC8gdGhpcy5zY3JlZW5XaWR0aCkgKiAyO1xuICAgICAgICByZXR1cm4gKHggLSAodGhpcy5zY3JlZW5XaWR0aCAvIDIpKSAvIGFzcGVjdENvZWZmIC8gdGhpcy5zY3JlZW5XaWR0aDtcbiAgICB9O1xuICAgIENhbWVyYS5wcm90b3R5cGUucmVjZW50ZXJZID0gZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgcmV0dXJuIC0oeSAtICh0aGlzLnNjcmVlbkhlaWdodCAvIDIpKSAvIDIgLyB0aGlzLnNjcmVlbkhlaWdodDtcbiAgICB9O1xuICAgIHJldHVybiBDYW1lcmE7XG59KSgpO1xuZXhwb3J0cy5DYW1lcmEgPSBDYW1lcmE7XG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBmb3J3YXJkVmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByaWdodFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgdXBWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChwb3NpdGlvbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3Rvciwgc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemUoZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IgPSBWZWN0b3Iubm9ybWFsaXplKFZlY3Rvci5zdWJzdHJhY3QodGhpcy5kaXJlY3Rpb24sIHRoaXMucG9zaXRpb24pKTtcbiAgICAgICAgdGhpcy5yaWdodFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgLTEsIDApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy51cFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRWZWN0b3JcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3J3YXJkVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5mb3J3YXJkVmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSaWdodFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHRWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFVwVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy51cFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVjZW50ZXJYICh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgYXNwZWN0Q29lZmYgPSAodGhpcy5zY3JlZW5IZWlnaHQgLyB0aGlzLnNjcmVlbldpZHRoKSAqIDI7XG5cbiAgICAgICAgcmV0dXJuICh4IC0gKHRoaXMuc2NyZWVuV2lkdGggLyAyKSkgLyBhc3BlY3RDb2VmZiAvIHRoaXMuc2NyZWVuV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2VudGVyWSAoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0oeSAtICh0aGlzLnNjcmVlbkhlaWdodCAvIDIpKSAvIDIgLyB0aGlzLnNjcmVlbkhlaWdodDtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4vUkdCQ29sb3JcIik7XG52YXIgRmxvYXRDb2xvcl8xID0gcmVxdWlyZShcIi4vRmxvYXRDb2xvclwiKTtcbnZhciBDb2xvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sb3IoY29sb3IpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBjb2xvci5yZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBjb2xvci5ncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gY29sb3IuYmx1ZTtcbiAgICB9XG4gICAgQ29sb3IucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkOiB0aGlzLnJlZCxcbiAgICAgICAgICAgIGdyZWVuOiB0aGlzLmdyZWVuLFxuICAgICAgICAgICAgYmx1ZTogdGhpcy5ibHVlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBDb2xvci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IEZsb2F0Q29sb3JfMS5GbG9hdENvbG9yKHRoaXMucmVkICsgY29sb3IucmVkLCB0aGlzLmdyZWVuICsgY29sb3IuZ3JlZW4sIHRoaXMuYmx1ZSArIGNvbG9yLmJsdWUpKTtcbiAgICB9O1xuICAgIENvbG9yLnByb3RvdHlwZS5zdWJzdHJhY3QgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihuZXcgRmxvYXRDb2xvcl8xLkZsb2F0Q29sb3IodGhpcy5yZWQgLSBjb2xvci5yZWQsIHRoaXMuZ3JlZW4gLSBjb2xvci5ncmVlbiwgdGhpcy5ibHVlIC0gY29sb3IuYmx1ZSkpO1xuICAgIH07XG4gICAgQ29sb3IucHJvdG90eXBlLnNjYWxlZCA9IGZ1bmN0aW9uIChtdWx0aXBsaWVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IEZsb2F0Q29sb3JfMS5GbG9hdENvbG9yKHRoaXMucmVkICogbXVsdGlwbGllciwgdGhpcy5ncmVlbiAqIG11bHRpcGxpZXIsIHRoaXMuYmx1ZSAqIG11bHRpcGxpZXIpKTtcbiAgICB9O1xuICAgIENvbG9yLnByb3RvdHlwZS5tdWx0aXBsZSA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKG5ldyBGbG9hdENvbG9yXzEuRmxvYXRDb2xvcih0aGlzLnJlZCAqIGNvbG9yLnJlZCwgdGhpcy5ncmVlbiAqIGNvbG9yLmdyZWVuLCB0aGlzLmJsdWUgKiBjb2xvci5ibHVlKSk7XG4gICAgfTtcbiAgICBDb2xvci5wcm90b3R5cGUuZGl2aWRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IEZsb2F0Q29sb3JfMS5GbG9hdENvbG9yKHRoaXMucmVkIC8gdmFsdWUsIHRoaXMuZ3JlZW4gLyB2YWx1ZSwgdGhpcy5ibHVlIC8gdmFsdWUpKTtcbiAgICB9O1xuICAgIENvbG9yLnNSR0JFbmNvZGUgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgaWYgKGNvbG9yIDw9IDAuMDAzMTMwOCkge1xuICAgICAgICAgICAgcmV0dXJuIDEyLjkyICogY29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMS4wNTUgKiAoTWF0aC5wb3coY29sb3IsIDAuNDE2NjY2NykpIC0gMC4wNTU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbG9yLnRvUkdCID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWQ6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5yZWQpICogMjU1KSxcbiAgICAgICAgICAgIGdyZWVuOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IuZ3JlZW4pICogMjU1KSxcbiAgICAgICAgICAgIGJsdWU6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5ibHVlKSAqIDI1NSlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvbG9yLmNsYW1wQ29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID4gMSA/IDEgOiBjb2xvcjtcbiAgICB9O1xuICAgIENvbG9yLmJsYWNrID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICBDb2xvci53aGl0ZSA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3JfMS5SR0JDb2xvcigyNTUsIDI1NSwgMjU1KSk7XG4gICAgQ29sb3IuZ3JheSA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3JfMS5SR0JDb2xvcigxMjcsIDEyNywgMTI3KSk7XG4gICAgQ29sb3IucmVkID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDI1NSwgMCwgMCkpO1xuICAgIENvbG9yLmdyZWVuID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDAsIDI1NSwgMCkpO1xuICAgIENvbG9yLmJsdWUgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMCwgMCwgMjU1KSk7XG4gICAgcmV0dXJuIENvbG9yO1xufSkoKTtcbmV4cG9ydHMuQ29sb3IgPSBDb2xvcjtcbiIsImltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vUkdCQ29sb3JcIjtcbmltcG9ydCB7IEZsb2F0Q29sb3IgfSBmcm9tIFwiLi9GbG9hdENvbG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBDb2xvciB7XG4gICAgcHJpdmF0ZSByZWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIGdyZWVuOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBibHVlOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgc3RhdGljIGJsYWNrID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSk7XG4gICAgcHVibGljIHN0YXRpYyB3aGl0ZSA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAyNTUsIDI1NSkpO1xuICAgIHB1YmxpYyBzdGF0aWMgZ3JheSA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMTI3LCAxMjcsIDEyNykpO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVkID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDAsIDApKTtcbiAgICBwdWJsaWMgc3RhdGljIGdyZWVuID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAyNTUsIDApKTtcbiAgICBwdWJsaWMgc3RhdGljIGJsdWUgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDI1NSkpO1xuXG4gICAgY29uc3RydWN0b3IgKGNvbG9yOiBSR0JDb2xvcnxGbG9hdENvbG9yKSB7XG4gICAgICAgIHRoaXMucmVkID0gY29sb3IucmVkO1xuICAgICAgICB0aGlzLmdyZWVuID0gY29sb3IuZ3JlZW47XG4gICAgICAgIHRoaXMuYmx1ZSA9IGNvbG9yLmJsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENvbG9yICgpOiB7cmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcn0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkOiB0aGlzLnJlZCxcbiAgICAgICAgICAgIGdyZWVuOiB0aGlzLmdyZWVuLFxuICAgICAgICAgICAgYmx1ZTogdGhpcy5ibHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkIChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCArIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICsgY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICsgY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJzdHJhY3QgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkIC0gY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gLSBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgLSBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHNjYWxlZCAobXVsdGlwbGllcjogbnVtYmVyKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKiBtdWx0aXBsaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKiBtdWx0aXBsaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAqIG11bHRpcGxpZXJcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbXVsdGlwbGUgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICogY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKiBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKiBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGRpdmlkZSAodmFsdWU6IG51bWJlcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkIC8gdmFsdWUsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAvIHZhbHVlLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAvIHZhbHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzUkdCRW5jb2RlIChjb2xvcjogbnVtYmVyKSB7XG4gICAgICAgIGlmIChjb2xvciA8PSAwLjAwMzEzMDgpIHtcbiAgICAgICAgICAgIHJldHVybiAxMi45MiAqIGNvbG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDEuMDU1ICogKGNvbG9yICoqIDAuNDE2NjY2NykgLSAwLjA1NTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdG9SR0IgKGNvbG9yOiBDb2xvcik6IHtyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWQ6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5yZWQpICogMjU1KSxcbiAgICAgICAgICAgIGdyZWVuOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IuZ3JlZW4pICogMjU1KSxcbiAgICAgICAgICAgIGJsdWU6IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5ibHVlKSAqIDI1NSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNsYW1wQ29sb3IgKGNvbG9yOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29sb3IgPiAxID8gMSA6IGNvbG9yO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZsb2F0Q29sb3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZsb2F0Q29sb3IocmVkLCBncmVlbiwgYmx1ZSkge1xuICAgICAgICB0aGlzLnJlZCA9IHJlZDtcbiAgICAgICAgdGhpcy5ncmVlbiA9IGdyZWVuO1xuICAgICAgICB0aGlzLmJsdWUgPSBibHVlO1xuICAgIH1cbiAgICByZXR1cm4gRmxvYXRDb2xvcjtcbn0pKCk7XG5leHBvcnRzLkZsb2F0Q29sb3IgPSBGbG9hdENvbG9yO1xuIiwiZXhwb3J0IGNsYXNzIEZsb2F0Q29sb3Ige1xuICAgIHB1YmxpYyByZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZ3JlZW46IG51bWJlcjtcbiAgICBwdWJsaWMgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yZWQgPSByZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gYmx1ZTtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUkdCQ29sb3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJHQkNvbG9yKHJlZCwgZ3JlZW4sIGJsdWUpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBSR0JDb2xvci50b0Zsb2F0KHJlZCk7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBSR0JDb2xvci50b0Zsb2F0KGdyZWVuKTtcbiAgICAgICAgdGhpcy5ibHVlID0gUkdCQ29sb3IudG9GbG9hdChibHVlKTtcbiAgICB9XG4gICAgUkdCQ29sb3IudG9GbG9hdCA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICByZXR1cm4gY29sb3IgPT09IDAgPyBjb2xvciA6IGNvbG9yIC8gMjU1O1xuICAgIH07XG4gICAgcmV0dXJuIFJHQkNvbG9yO1xufSkoKTtcbmV4cG9ydHMuUkdCQ29sb3IgPSBSR0JDb2xvcjtcbiIsImV4cG9ydCBjbGFzcyBSR0JDb2xvciB7XG4gICAgcHVibGljIHJlZDogbnVtYmVyO1xuICAgIHB1YmxpYyBncmVlbjogbnVtYmVyO1xuICAgIHB1YmxpYyBibHVlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJlZCA9IFJHQkNvbG9yLnRvRmxvYXQocmVkKTtcbiAgICAgICAgdGhpcy5ncmVlbiA9IFJHQkNvbG9yLnRvRmxvYXQoZ3JlZW4pO1xuICAgICAgICB0aGlzLmJsdWUgPSBSR0JDb2xvci50b0Zsb2F0KGJsdWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHRvRmxvYXQgKGNvbG9yOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29sb3IgPT09IDAgPyBjb2xvciA6IGNvbG9yIC8gMjU1O1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBJbnRlcnNlY3RQb2ludCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSW50ZXJzZWN0UG9pbnQoKSB7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgSW50ZXJzZWN0UG9pbnQucHJvdG90eXBlLmdldEludGVyc2VjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0ZWQ7XG4gICAgfTtcbiAgICBJbnRlcnNlY3RQb2ludC5wcm90b3R5cGUuZ2V0SGl0UG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpdFBvaW50O1xuICAgIH07XG4gICAgSW50ZXJzZWN0UG9pbnQucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsO1xuICAgIH07XG4gICAgSW50ZXJzZWN0UG9pbnQucHJvdG90eXBlLmdldE93bmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vd25lcjtcbiAgICB9O1xuICAgIEludGVyc2VjdFBvaW50LnByb3RvdHlwZS5nZXREaXN0YW5jZUZyb21PcmlnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlRnJvbU9yaWdpbjtcbiAgICB9O1xuICAgIEludGVyc2VjdFBvaW50LnByb3RvdHlwZS5zZXRJbnRlcnNlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgSW50ZXJzZWN0UG9pbnQucHJvdG90eXBlLnNldEhpdFBvaW50ID0gZnVuY3Rpb24gKGhpdFBvaW50KSB7XG4gICAgICAgIHRoaXMuaGl0UG9pbnQgPSBoaXRQb2ludDtcbiAgICB9O1xuICAgIEludGVyc2VjdFBvaW50LnByb3RvdHlwZS5zZXROb3JtYWwgPSBmdW5jdGlvbiAobm9ybWFsKSB7XG4gICAgICAgIHRoaXMubm9ybWFsID0gbm9ybWFsO1xuICAgIH07XG4gICAgSW50ZXJzZWN0UG9pbnQucHJvdG90eXBlLnNldE93bmVyID0gZnVuY3Rpb24gKG93bmVyKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICB9O1xuICAgIEludGVyc2VjdFBvaW50LnByb3RvdHlwZS5zZXREaXN0YW5jZUZyb21PcmlnaW4gPSBmdW5jdGlvbiAoZGlzdGFuY2VGcm9tT3JpZ2luKSB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luID0gZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVyc2VjdFBvaW50O1xufSkoKTtcbmV4cG9ydHMuSW50ZXJzZWN0UG9pbnQgPSBJbnRlcnNlY3RQb2ludDtcbiIsImltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0cy9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIEludGVyc2VjdFBvaW50IHtcbiAgICBwcml2YXRlIGludGVyc2VjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBoaXRQb2ludDogVmVjdG9yO1xuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBkaXN0YW5jZUZyb21PcmlnaW46IG51bWJlcjtcbiAgICBwcml2YXRlIG93bmVyOiBBYnN0cmFjdE9iamVjdDtcblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3QgKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGl0UG9pbnQgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpdFBvaW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T3duZXIgKCk6IEFic3RyYWN0T2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpc3RhbmNlRnJvbU9yaWdpbiAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRJbnRlcnNlY3QgKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmludGVyc2VjdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SGl0UG9pbnQgKGhpdFBvaW50OiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oaXRQb2ludCA9IGhpdFBvaW50XG4gICAgfVxuXG4gICAgcHVibGljIHNldE5vcm1hbCAobm9ybWFsOiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE93bmVyIChvd25lcjogQWJzdHJhY3RPYmplY3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXREaXN0YW5jZUZyb21PcmlnaW4gKGRpc3RhbmNlRnJvbU9yaWdpbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luID0gZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi9Db2xvci9Db2xvclwiKTtcbnZhciBNYXRlcmlhbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWF0ZXJpYWwoY29sb3IsIGVtaXNzaW9uLCByZWZsZWN0aW9uQ29lZmYpIHtcbiAgICAgICAgdGhpcy5lbWlzc2lvbiA9IENvbG9yXzEuQ29sb3IuYmxhY2s7XG4gICAgICAgIHRoaXMubGFtYmVydENvZWZmID0gMC41O1xuICAgICAgICB0aGlzLnBob25nQ29lZmYgPSAwLjU7XG4gICAgICAgIHRoaXMucmVmbGVjdGlvbkNvZWZmID0gMDtcbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVtaXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXNzaW9uID0gZW1pc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlZmxlY3Rpb25Db2VmZikge1xuICAgICAgICAgICAgdGhpcy5yZWZsZWN0aW9uQ29lZmYgPSByZWZsZWN0aW9uQ29lZmY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9O1xuICAgIE1hdGVyaWFsLnByb3RvdHlwZS5nZXRFbWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1pc3Npb247XG4gICAgfTtcbiAgICBNYXRlcmlhbC5wcm90b3R5cGUuZ2V0RW1pc3Npb25WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmVtaXNzaW9uLmdldENvbG9yKCkucmVkICsgdGhpcy5lbWlzc2lvbi5nZXRDb2xvcigpLmdyZWVuICsgdGhpcy5lbWlzc2lvbi5nZXRDb2xvcigpLmJsdWUpIC8gMztcbiAgICB9O1xuICAgIE1hdGVyaWFsLnByb3RvdHlwZS5nZXRMYW1iZXJ0Q29lZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhbWJlcnRDb2VmZjtcbiAgICB9O1xuICAgIE1hdGVyaWFsLnByb3RvdHlwZS5nZXRQaG9uZ0NvZWZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waG9uZ0NvZWZmO1xuICAgIH07XG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLmdldFJlZmxlY3Rpb25WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNvZWZmO1xuICAgIH07XG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLnNldExhbWJlcnRDb2VmZiA9IGZ1bmN0aW9uIChsYW1iZXJ0Q29lZmYpIHtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSBsYW1iZXJ0Q29lZmY7XG4gICAgICAgIHRoaXMucGhvbmdDb2VmZiA9IDEgLSBsYW1iZXJ0Q29lZmY7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLnNldFBob25nQ29lZmYgPSBmdW5jdGlvbiAocGhvbmdDb2VmZikge1xuICAgICAgICB0aGlzLnBob25nQ29lZmYgPSBwaG9uZ0NvZWZmO1xuICAgICAgICB0aGlzLmxhbWJlcnRDb2VmZiA9IDEgLSBwaG9uZ0NvZWZmO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBNYXRlcmlhbDtcbn0pKCk7XG5leHBvcnRzLk1hdGVyaWFsID0gTWF0ZXJpYWw7XG4iLCJpbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIHtcbiAgICBwcml2YXRlIGNvbG9yOiBDb2xvcjtcbiAgICBwcml2YXRlIGVtaXNzaW9uOiBDb2xvciA9IENvbG9yLmJsYWNrO1xuICAgIHByaXZhdGUgbGFtYmVydENvZWZmOiBudW1iZXIgPSAwLjU7XG4gICAgcHJpdmF0ZSBwaG9uZ0NvZWZmOiBudW1iZXIgPSAwLjU7XG4gICAgcHJpdmF0ZSByZWZsZWN0aW9uQ29lZmY6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIGNvbG9yPzogQ29sb3IsXG4gICAgICAgIGVtaXNzaW9uPzogQ29sb3IsXG4gICAgICAgIHJlZmxlY3Rpb25Db2VmZj86IG51bWJlclxuICAgICkge1xuICAgICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbWlzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5lbWlzc2lvbiA9IGVtaXNzaW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZmxlY3Rpb25Db2VmZikge1xuICAgICAgICAgICAgdGhpcy5yZWZsZWN0aW9uQ29lZmYgPSByZWZsZWN0aW9uQ29lZmY7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sb3IgKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVtaXNzaW9uICgpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtaXNzaW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFbWlzc2lvblZhbHVlICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5lbWlzc2lvbi5nZXRDb2xvcigpLnJlZCArIHRoaXMuZW1pc3Npb24uZ2V0Q29sb3IoKS5ncmVlbiArIHRoaXMuZW1pc3Npb24uZ2V0Q29sb3IoKS5ibHVlXG4gICAgICAgICkgLyAzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMYW1iZXJ0Q29lZmYoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFtYmVydENvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQaG9uZ0NvZWZmKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBob25nQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlZmxlY3Rpb25WYWx1ZSAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRMYW1iZXJ0Q29lZmYobGFtYmVydENvZWZmOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSBsYW1iZXJ0Q29lZmY7XG4gICAgICAgIHRoaXMucGhvbmdDb2VmZiA9IDEgLSBsYW1iZXJ0Q29lZmY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBob25nQ29lZmYocGhvbmdDb2VmZjogbnVtYmVyKTogdGhpcyB7XG4gICAgICAgIHRoaXMucGhvbmdDb2VmZiA9IHBob25nQ29lZmY7XG4gICAgICAgIHRoaXMubGFtYmVydENvZWZmID0gMSAtIHBob25nQ29lZmY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFic3RyYWN0T2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBYnN0cmFjdE9iamVjdCgpIHtcbiAgICB9XG4gICAgcmV0dXJuIEFic3RyYWN0T2JqZWN0O1xufSkoKTtcbmV4cG9ydHMuQWJzdHJhY3RPYmplY3QgPSBBYnN0cmFjdE9iamVjdDtcbiIsImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdE9iamVjdCB7XG4gICAgYWJzdHJhY3QgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnk7XG4gICAgYWJzdHJhY3QgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsO1xuICAgIGFic3RyYWN0IGdldFBvc2l0aW9uICgpOiBWZWN0b3I7XG4gICAgYWJzdHJhY3QgZ2V0UmFuZG9tUG9pbnQgKCk6IFZlY3RvcjtcbiAgICBhYnN0cmFjdCBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcztcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgQWJzdHJhY3RPYmplY3RfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0T2JqZWN0XCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi4vQ29sb3IvQ29sb3JcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuLi9NYXRlcmlhbFwiKTtcbnZhciBSVE1hdGhfMSA9IHJlcXVpcmUoXCIuLi9SVE1hdGhcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi4vVmVjdG9yXCIpO1xudmFyIFBsYW5lID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGxhbmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGxhbmUobm9ybWFsLCBwb2ludCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wb2ludCA9IG5ldyBWZWN0b3JfMS5WZWN0b3IoMCwgMCwgMCk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxfMS5NYXRlcmlhbChDb2xvcl8xLkNvbG9yLmdyYXkpO1xuICAgICAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbDtcbiAgICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUGxhbmUucHJvdG90eXBlLmdldEludGVyc2VjdERhdGEgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBkaXN0YW5jZSwgaGl0UG9pbnQsIHQgPSBWZWN0b3JfMS5WZWN0b3IuZG90KFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodGhpcy5wb2ludCwgcmF5LmdldE9yaWdpbigpKSwgdGhpcy5ub3JtYWwpIC9cbiAgICAgICAgICAgIFZlY3Rvcl8xLlZlY3Rvci5kb3QocmF5LmdldERpcmVjdGlvbigpLCB0aGlzLmdldE5vcm1hbCgpKTtcbiAgICAgICAgaWYgKHQgPD0gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQocmF5LmdldE9yaWdpbigpLCBWZWN0b3JfMS5WZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCB0KSk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChoaXRQb2ludCwgcmF5LmdldE9yaWdpbigpKS5nZXRMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgUGxhbmUucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFBsYW5lLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnQ7XG4gICAgfTtcbiAgICBQbGFuZS5wcm90b3R5cGUuZ2V0UmFuZG9tUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIDAsIDApO1xuICAgIH07XG4gICAgUGxhbmUucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsO1xuICAgIH07XG4gICAgUGxhbmUucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gUGxhbmU7XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuUGxhbmUgPSBQbGFuZTtcbiIsImltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFBsYW5lIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBwb2ludDogVmVjdG9yID0gbmV3IFZlY3RvcigwLCAwLCAwKTtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChDb2xvci5ncmF5KTtcblxuICAgIGNvbnN0cnVjdG9yIChub3JtYWw6IFZlY3RvciwgcG9pbnQ/OiBWZWN0b3IpIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cbiAgICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnkge1xuICAgICAgICBsZXQgZGlzdGFuY2U6IG51bWJlcixcbiAgICAgICAgICAgIGhpdFBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICB0OiBudW1iZXIgPVxuICAgICAgICAgICAgVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50LFxuICAgICAgICAgICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHRoaXMubm9ybWFsXG4gICAgICAgICAgICApIC9cbiAgICAgICAgICAgIFZlY3Rvci5kb3QoXG4gICAgICAgICAgICAgICAgcmF5LmdldERpcmVjdGlvbigpLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Tm9ybWFsKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgaWYgKHQgPD0gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGhpdFBvaW50ID0gVmVjdG9yLmFkZChcbiAgICAgICAgICAgIHJheS5nZXRPcmlnaW4oKSxcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgdFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSYW5kb21Qb2ludCAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoMCwgMCwgMCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcyB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFJUTWF0aF8xID0gcmVxdWlyZShcIi4uL1JUTWF0aFwiKTtcbnZhciBBYnN0cmFjdE9iamVjdF8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RPYmplY3RcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9Db2xvclwiKTtcbnZhciBNYXRlcmlhbF8xID0gcmVxdWlyZShcIi4uL01hdGVyaWFsXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4uL1ZlY3RvclwiKTtcbnZhciBQb2x5Z29uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9seWdvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQb2x5Z29uKCkge1xuICAgICAgICB2YXIgdmVydGljZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZlcnRpY2VzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwoQ29sb3JfMS5Db2xvci5ncmF5KTtcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UsIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIsIGhpdFBvaW50LCBub3JtYWwgPSB0aGlzLmdldE5vcm1hbCgpLCBudW1lcmF0b3IsIGRlbm9taW5hdG9yO1xuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yXzEuVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuICAgICAgICBkZW5vbWluYXRvciA9IFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0RGlyZWN0aW9uKCkpO1xuICAgICAgICBudW1lcmF0b3IgPSAtVmVjdG9yXzEuVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXRPcmlnaW4oKSkgKyBkaXN0YW5jZUZyb21BeGlzQ2VudGVyO1xuICAgICAgICBkaXN0YW5jZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhpdFBvaW50ID0gcmF5LmdldEhpdFBvaW50KGRpc3RhbmNlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHZlcnRpY2VzTGVuZ3RoID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgPCB2ZXJ0aWNlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdmVydGV4MSA9IHRoaXMudmVydGljZXNbaV0sIHZlcnRleDIgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoaSA9PT0gdmVydGljZXNMZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyID0gdGhpcy52ZXJ0aWNlc1tpICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVBvbHlnb24uY2hlY2tTYW1lQ2xvY2tEaXIoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh2ZXJ0ZXgyLCB2ZXJ0ZXgxKSwgVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChoaXRQb2ludCwgdmVydGV4MSksIHRoaXMuZ2V0Tm9ybWFsKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IG5vcm1hbCxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRnZTEgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMl0sIHRoaXMudmVydGljZXNbMF0pLCBlZGdlMiA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodGhpcy52ZXJ0aWNlc1sxXSwgdGhpcy52ZXJ0aWNlc1swXSk7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplKFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyhlZGdlMSwgZWRnZTIpKTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNlc1swXTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFJhbmRvbVBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcl8xLlZlY3RvcigwLCAwLCAwKTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyID0gZnVuY3Rpb24gKHZlY3RvcjEsIHZlY3RvcjIsIG5vcm1hbCkge1xuICAgICAgICB2YXIgbm9ybWFsVjFWMiA9IFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsVjFWMiwgbm9ybWFsKSA+PSAwO1xuICAgIH07XG4gICAgcmV0dXJuIFBvbHlnb247XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuUG9seWdvbiA9IFBvbHlnb247XG4iLCJpbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgdmVydGljZXM6IFZlY3RvcltdO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKENvbG9yLmdyYXkpO1xuXG4gICAgY29uc3RydWN0b3IgKC4uLnZlcnRpY2VzOiBWZWN0b3JbXSkge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGRpc3RhbmNlOiBudW1iZXIsXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyOiBudW1iZXIsXG4gICAgICAgICAgICBoaXRQb2ludDogVmVjdG9yLFxuICAgICAgICAgICAgbm9ybWFsOiBWZWN0b3IgPSB0aGlzLmdldE5vcm1hbCgpLFxuICAgICAgICAgICAgbnVtZXJhdG9yOiBudW1iZXIsXG4gICAgICAgICAgICBkZW5vbWluYXRvcjogbnVtYmVyO1xuXG4gICAgICAgIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIgPSBWZWN0b3IuZG90KHRoaXMudmVydGljZXNbMF0sIG5vcm1hbCk7XG5cbiAgICAgICAgZGVub21pbmF0b3IgPSBWZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgbnVtZXJhdG9yID0gLVZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0T3JpZ2luKCkpICsgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjtcblxuICAgICAgICBkaXN0YW5jZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuXG4gICAgICAgIGlmIChkaXN0YW5jZSA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBoaXRQb2ludCA9IHJheS5nZXRIaXRQb2ludChkaXN0YW5jZSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHZlcnRpY2VzTGVuZ3RoID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgPCB2ZXJ0aWNlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdmVydGV4MTogVmVjdG9yID0gdGhpcy52ZXJ0aWNlc1tpXSxcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyOiBWZWN0b3I7XG5cbiAgICAgICAgICAgIGlmIChpID09PSB2ZXJ0aWNlc0xlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXgyID0gdGhpcy52ZXJ0aWNlc1swXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIVBvbHlnb24uY2hlY2tTYW1lQ2xvY2tEaXIoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QodmVydGV4MiwgdmVydGV4MSksXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHZlcnRleDEpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE5vcm1hbCgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogbm9ybWFsLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIGxldCBlZGdlMTogVmVjdG9yID0gVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSxcbiAgICAgICAgICAgIGVkZ2UyOiBWZWN0b3IgPSBWZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFZlY3Rvci5jcm9zcyhlZGdlMSwgZWRnZTIpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzWzBdO1xuICAgIH1cblxuXG4gICAgcHVibGljIGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcigwLCAwLCAwKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcyB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjaGVja1NhbWVDbG9ja0RpciAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IsIG5vcm1hbDogVmVjdG9yKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBub3JtYWxWMVYyOiBWZWN0b3IgPSBWZWN0b3IuY3Jvc3ModmVjdG9yMiwgdmVjdG9yMSk7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5kb3Qobm9ybWFsVjFWMiwgbm9ybWFsKSA+PSAwO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi4vVmVjdG9yXCIpO1xudmFyIFNwaGVyZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwaGVyZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmUoY2VudGVyLCByYWRpdXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxfMS5NYXRlcmlhbChDb2xvcl8xLkNvbG9yLnJlZCk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBjZW50ZXI7XG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgIH1cbiAgICBTcGhlcmUucHJvdG90eXBlLmdldEludGVyc2VjdERhdGEgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBrID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMucG9zaXRpb24pLCBiID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLCBjID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCBrKSAtIE1hdGgucG93KHRoaXMucmFkaXVzLCAyKSwgZCA9IE1hdGgucG93KGIsIDIpIC0gYywgdDEsIHQyLCBtaW5ULCBtYXhULCBpbnRlcnNlY3Rpb25Qb2ludCwgaGl0UG9pbnQsIGRpc3RhbmNlO1xuICAgICAgICBpZiAoYiA+IDAgfHwgZCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtYXhUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKFZlY3Rvcl8xLlZlY3Rvci5zY2FsZShyYXkuZ2V0RGlyZWN0aW9uKCksIGludGVyc2VjdGlvblBvaW50KSwgcmF5LmdldE9yaWdpbigpKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLmdldExlbmd0aCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldFJhbmRvbVBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdSA9IE1hdGgucmFuZG9tKCksIHYgPSBNYXRoLnJhbmRvbSgpLCBxID0gMiAqIE1hdGguUEkgKiB1LCBmID0gTWF0aC5wb3coTWF0aC5jb3MoMiAqIHYgLSAxKSwgLTEpO1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcl8xLlZlY3Rvcih0aGlzLnJhZGl1cyAqIE1hdGguY29zKHEpICogTWF0aC5zaW4oZiksIHRoaXMucmFkaXVzICogTWF0aC5zaW4ocSkgKiBNYXRoLnNpbihmKSwgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhmKSk7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzO1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXROb3JtYWwgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5ub3JtYWxpemUoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMucG9zaXRpb24pLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmU7XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuU3BoZXJlID0gU3BoZXJlO1xuIiwiaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgU3BoZXJlIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgcG9zaXRpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIHJhZGl1czogbnVtYmVyO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKENvbG9yLnJlZCk7XG5cbiAgICBjb25zdHJ1Y3RvciAoY2VudGVyOiBWZWN0b3IsIHJhZGl1czogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyICgpO1xuXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBjZW50ZXI7XG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBrID0gVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMucG9zaXRpb24pLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvc2l0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFuZG9tUG9pbnQgKCk6IFZlY3RvciB7XG4gICAgICAgIGxldCB1ID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHYgPSBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgcSA9IDIgKiBNYXRoLlBJICogdSxcbiAgICAgICAgICAgIGYgPSBNYXRoLnBvdyhNYXRoLmNvcygyICogdiAtIDEpLCAtMSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHEpICogTWF0aC5zaW4oZiksXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHEpICogTWF0aC5zaW4oZiksXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguY29zKGYpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhZGl1cyAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKHBvaW50OiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZShcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLnBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUlRNYXRoO1xuKGZ1bmN0aW9uIChSVE1hdGgpIHtcbiAgICBSVE1hdGguRVBTSUxPTiA9IDAuMDAxO1xufSkoUlRNYXRoID0gZXhwb3J0cy5SVE1hdGggfHwgKGV4cG9ydHMuUlRNYXRoID0ge30pKTtcbiIsImV4cG9ydCBtb2R1bGUgUlRNYXRoIHtcbiAgICBleHBvcnQgY29uc3QgRVBTSUxPTiA9IDAuMDAxO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vVmVjdG9yXCIpO1xudmFyIFJheSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmF5KG9yaWdpbiwgZGlyZWN0aW9uLCBpdGVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSAwO1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplKGRpcmVjdGlvbik7XG4gICAgICAgIGlmIChpdGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uID0gaXRlcmF0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJheS5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW47XG4gICAgfTtcbiAgICBSYXkucHJvdG90eXBlLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH07XG4gICAgUmF5LnByb3RvdHlwZS5nZXRJdGVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGlvbjtcbiAgICB9O1xuICAgIFJheS5wcm90b3R5cGUuZ2V0SGl0UG9pbnQgPSBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5hZGQodGhpcy5vcmlnaW4sIFZlY3Rvcl8xLlZlY3Rvci5zY2FsZSh0aGlzLmRpcmVjdGlvbiwgZGlzdGFuY2UpKTtcbiAgICB9O1xuICAgIFJheS5wcm90b3R5cGUuc2V0SXRlcmF0aW9uID0gZnVuY3Rpb24gKGl0ZXJhdGlvbikge1xuICAgICAgICB0aGlzLml0ZXJhdGlvbiA9IGl0ZXJhdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBSYXk7XG59KSgpO1xuZXhwb3J0cy5SYXkgPSBSYXk7XG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFJheSB7XG4gICAgcHJpdmF0ZSBvcmlnaW46IFZlY3RvcjtcbiAgICBwcml2YXRlIGRpcmVjdGlvbjogIFZlY3RvcjtcbiAgICBwcml2YXRlIGl0ZXJhdGlvbjogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yIChvcmlnaW46IFZlY3RvciwgZGlyZWN0aW9uOiBWZWN0b3IsIGl0ZXJhdGlvbj86IG51bWJlcikge1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBWZWN0b3Iubm9ybWFsaXplKGRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24gPSBpdGVyYXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T3JpZ2luICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW47XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpcmVjdGlvbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJdGVyYXRpb24gKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGl0UG9pbnQgKGRpc3RhbmNlOiBudW1iZXIpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLmFkZCh0aGlzLm9yaWdpbiwgVmVjdG9yLnNjYWxlKHRoaXMuZGlyZWN0aW9uLCBkaXN0YW5jZSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRJdGVyYXRpb24gKGl0ZXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uID0gaXRlcmF0aW9uO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIFNjZW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2VuZShvYmplY3RzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0cyA9IFtdO1xuICAgICAgICB0aGlzLmxpZ2h0cyA9IFtdO1xuICAgICAgICB0aGlzLm9iamVjdHMgPSBvYmplY3RzLm9iamVjdHM7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gb2JqZWN0cy5jYW1lcmE7XG4gICAgICAgIHRoaXMubGlnaHRzID0gb2JqZWN0cy5saWdodHM7XG4gICAgfVxuICAgIFNjZW5lLnByb3RvdHlwZS5hZGRPYmplY3QgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9iamVjdCk7XG4gICAgfTtcbiAgICBTY2VuZS5wcm90b3R5cGUuZ2V0Q2FtZXJhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW1lcmE7XG4gICAgfTtcbiAgICBTY2VuZS5wcm90b3R5cGUuZ2V0TGlnaHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saWdodHM7XG4gICAgfTtcbiAgICBTY2VuZS5wcm90b3R5cGUuZ2V0T2JqZWN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cztcbiAgICB9O1xuICAgIHJldHVybiBTY2VuZTtcbn0pKCk7XG5leHBvcnRzLlNjZW5lID0gU2NlbmU7XG4iLCJpbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9DYW1lcmFcIjtcbmltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvQWJzdHJhY3RMaWdodFwiO1xuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuICAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmE7XG4gICAgcHJpdmF0ZSBvYmplY3RzOiBhbnlbXSA9IFtdO1xuICAgIHByaXZhdGUgbGlnaHRzOiBBYnN0cmFjdExpZ2h0W10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yIChvYmplY3RzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5vYmplY3RzID0gb2JqZWN0cy5vYmplY3RzO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IG9iamVjdHMuY2FtZXJhO1xuICAgICAgICB0aGlzLmxpZ2h0cyA9IG9iamVjdHMubGlnaHRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRPYmplY3QgKG9iamVjdDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENhbWVyYSAoKTogQ2FtZXJhIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FtZXJhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMaWdodHMgKCk6IEFic3RyYWN0TGlnaHRbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZ2h0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T2JqZWN0cyAoKTogYW55W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPVwidHJ1ZVwiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJsaWIvbGliLndlYndvcmtlci5kLnRzXCIgLz5cblwidXNlIHN0cmljdFwiO1xudmFyIENhbWVyYV8xID0gcmVxdWlyZShcIi4vQ2FtZXJhXCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi9Db2xvci9Db2xvclwiKTtcbnZhciBJbnRlcnNlY3RQb2ludF8xID0gcmVxdWlyZShcIi4vSW50ZXJzZWN0UG9pbnRcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuL01hdGVyaWFsXCIpO1xudmFyIFBsYW5lXzEgPSByZXF1aXJlKFwiLi9PYmplY3RzL1BsYW5lXCIpO1xudmFyIFBvbHlnb25fMSA9IHJlcXVpcmUoXCIuL09iamVjdHMvUG9seWdvblwiKTtcbnZhciBSYXlfMSA9IHJlcXVpcmUoXCIuL1JheVwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4vQ29sb3IvUkdCQ29sb3JcIik7XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi9SVE1hdGhcIik7XG52YXIgU2NlbmVfMSA9IHJlcXVpcmUoXCIuL1NjZW5lXCIpO1xudmFyIFNwaGVyZV8xID0gcmVxdWlyZShcIi4vT2JqZWN0cy9TcGhlcmVcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi9WZWN0b3JcIik7XG52YXIgRmxvYXRDb2xvcl8xID0gcmVxdWlyZShcIi4vQ29sb3IvRmxvYXRDb2xvclwiKTtcbnZhciBUcmFjZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRyYWNlcigpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IDI1MDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSAyNTA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zY3JlZW5XaWR0aCAqIHRoaXMuc2NyZWVuSGVpZ2h0ICogMzsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKENvbG9yXzEuQ29sb3IuYmxhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRyYWNlci5wcm90b3R5cGUuY29zaW5lU2FtcGxlSGVtaXNwaGVyZSA9IGZ1bmN0aW9uIChub3JtYWwpIHtcbiAgICAgICAgdmFyIHUgPSBNYXRoLnJhbmRvbSgpLCB2ID0gTWF0aC5yYW5kb20oKSwgciA9IE1hdGguc3FydCh1KSwgYW5nbGUgPSAyICogTWF0aC5QSSAqIHYsIHNkaXIsIHRkaXI7XG4gICAgICAgIGlmIChNYXRoLmFicyhub3JtYWwuZ2V0Q29vcmRpbmF0ZXMoKVsneCddKSA8IDAuNSkge1xuICAgICAgICAgICAgc2RpciA9IFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyhub3JtYWwsIG5ldyBWZWN0b3JfMS5WZWN0b3IoMSwgMCwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2RpciA9IFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyhub3JtYWwsIG5ldyBWZWN0b3JfMS5WZWN0b3IoMCwgMSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIHRkaXIgPSBWZWN0b3JfMS5WZWN0b3IuY3Jvc3Mobm9ybWFsLCBzZGlyKTtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKG5vcm1hbCwgTWF0aC5zcXJ0KDEgLSB1KSksIFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHNkaXIsIHIgKiBNYXRoLmNvcyhhbmdsZSkpLCBWZWN0b3JfMS5WZWN0b3Iuc2NhbGUodGRpciwgciAqIE1hdGguc2luKGFuZ2xlKSkpKTtcbiAgICB9O1xuICAgIFRyYWNlci5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBjb2xvciA9IENvbG9yXzEuQ29sb3IuYmxhY2ssIGNvc3QsIGludGVyc2VjdGlvbiA9IHRoaXMudHJhY2UocmF5KSwgbGlnaHRTYW1wbGluZ0NvbG9yLCBuZXdEaXJlY3Rpb24sIG5ld1BvaW50LCByYW5kRmFjdG9yID0gMSwgcmF5SXRlcmF0aW9uID0gcmF5LmdldEl0ZXJhdGlvbigpLCB0ZW1wQ29sb3I7XG4gICAgICAgIGlmIChyYXlJdGVyYXRpb24gPj0gNSkge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPD0gMC4xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbG9yXzEuQ29sb3IuYmxhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByYW5kRmFjdG9yID0gMSAvICgxIC0gMC4xKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdGlvbi5nZXRJbnRlcnNlY3QoKSkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yXzEuQ29sb3IuYmxhY2s7XG4gICAgICAgIH1cbiAgICAgICAgbGlnaHRTYW1wbGluZ0NvbG9yID0gQ29sb3JfMS5Db2xvci5ibGFjaztcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc2NlbmUuZ2V0T2JqZWN0cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmdldE1hdGVyaWFsKCkuZ2V0RW1pc3Npb24oKSA9PSBDb2xvcl8xLkNvbG9yLmJsYWNrKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaWdodFNhbXBsaW5nQ29sb3IgPSBsaWdodFNhbXBsaW5nQ29sb3JcbiAgICAgICAgICAgICAgICAuYWRkKHRoaXMuZ2V0TGlnaHRQb3dlcihyYXksIGludGVyc2VjdGlvbiwgbGlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IGxpZ2h0U2FtcGxpbmdDb2xvci5zY2FsZWQocmF5LmdldEl0ZXJhdGlvbigpKS5hZGQoaW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAubXVsdGlwbGUoaW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgIC5nZXRFbWlzc2lvbigpXG4gICAgICAgICAgICAuc2NhbGVkKHJhbmRGYWN0b3IpKSk7XG4gICAgICAgIG5ld0RpcmVjdGlvbiA9IHRoaXMuY29zaW5lU2FtcGxlSGVtaXNwaGVyZShpbnRlcnNlY3Rpb24uZ2V0Tm9ybWFsKCkpO1xuICAgICAgICBpZiAoVmVjdG9yXzEuVmVjdG9yLmRvdChuZXdEaXJlY3Rpb24sIHJheS5nZXREaXJlY3Rpb24oKSkgPiAwKSB7XG4gICAgICAgICAgICBuZXdQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQocmF5LmdldE9yaWdpbigpLCBWZWN0b3JfMS5WZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb24uZ2V0RGlzdGFuY2VGcm9tT3JpZ2luKCkgKiAoMSArIFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKHJheS5nZXRPcmlnaW4oKSwgVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uLmdldERpc3RhbmNlRnJvbU9yaWdpbigpICogKDEgLSBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikpKTtcbiAgICAgICAgfVxuICAgICAgICBjb3N0ID0gVmVjdG9yXzEuVmVjdG9yLmRvdChuZXdEaXJlY3Rpb24sIGludGVyc2VjdGlvbi5nZXROb3JtYWwoKSk7XG4gICAgICAgIHRlbXBDb2xvciA9IHRoaXMuZ2V0Q29sb3IobmV3IFJheV8xLlJheShuZXdQb2ludCwgbmV3RGlyZWN0aW9uLCArK3JheUl0ZXJhdGlvbikpO1xuICAgICAgICByZXR1cm4gY29sb3IuYWRkKHRlbXBDb2xvclxuICAgICAgICAgICAgLm11bHRpcGxlKGludGVyc2VjdGlvblxuICAgICAgICAgICAgLmdldE93bmVyKClcbiAgICAgICAgICAgIC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAuZ2V0Q29sb3IoKSlcbiAgICAgICAgICAgIC5zY2FsZWQoY29zdClcbiAgICAgICAgICAgIC5zY2FsZWQoMC4xKVxuICAgICAgICAgICAgLnNjYWxlZChyYW5kRmFjdG9yKSk7XG4gICAgfTtcbiAgICBUcmFjZXIucHJvdG90eXBlLmdldFJlZmxlY3Rpb25Db2xvciA9IGZ1bmN0aW9uIChyYXksIGludGVyc2VjdCkge1xuICAgICAgICB2YXIgcmVmbGVjdGlvbkNvbG9yLCByZWZsZWN0aW9uVmFsdWUgPSBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldFJlZmxlY3Rpb25WYWx1ZSgpLCByZWZsZWN0ZWRSYXk7XG4gICAgICAgIGlmIChyZWZsZWN0aW9uVmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBDb2xvcl8xLkNvbG9yLmJsYWNrO1xuICAgICAgICB9XG4gICAgICAgIHJlZmxlY3RlZFJheSA9IFZlY3Rvcl8xLlZlY3Rvci5yZWZsZWN0KHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0LmdldE5vcm1hbCgpKTtcbiAgICAgICAgcmVmbGVjdGlvbkNvbG9yID0gdGhpcy5nZXRDb2xvcihuZXcgUmF5XzEuUmF5KGludGVyc2VjdC5nZXRIaXRQb2ludCgpLCByZWZsZWN0ZWRSYXksIHJheS5nZXRJdGVyYXRpb24oKSkpLnNjYWxlZChyZWZsZWN0aW9uVmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVmbGVjdGlvbkNvbG9yO1xuICAgIH07XG4gICAgVHJhY2VyLnByb3RvdHlwZS5nZXRQZXJzcGVjdGl2ZVZlY3RvciA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLnNjZW5lLmdldENhbWVyYSgpO1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3IuYWRkKGNhbWVyYS5nZXRGb3J3YXJkVmVjdG9yKCksIFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKGNhbWVyYS5nZXRSaWdodFZlY3RvcigpLCBjYW1lcmEucmVjZW50ZXJYKHgpKSwgVmVjdG9yXzEuVmVjdG9yLnNjYWxlKGNhbWVyYS5nZXRVcFZlY3RvcigpLCBjYW1lcmEucmVjZW50ZXJZKHkpKSkpKTtcbiAgICB9O1xuICAgIFRyYWNlci5wcm90b3R5cGUuZ2V0TGlnaHRQb3dlciA9IGZ1bmN0aW9uIChyYXksIGludGVyc2VjdCwgb2JqZWN0KSB7XG4gICAgICAgIHZhciBsID0gb2JqZWN0LmdldFJhbmRvbVBvaW50KCk7XG4gICAgICAgIHZhciBzaGFkb3dSYXkgPSB0aGlzLnRyYWNlKG5ldyBSYXlfMS5SYXkoaW50ZXJzZWN0LmdldEhpdFBvaW50KCksIFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChvYmplY3QuZ2V0UG9zaXRpb24oKSwgbCksIGludGVyc2VjdC5nZXRIaXRQb2ludCgpKSkpO1xuICAgICAgICBpZiAoc2hhZG93UmF5LmdldEludGVyc2VjdCgpICYmXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldEVtaXNzaW9uVmFsdWUoKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3RcbiAgICAgICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgIC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgLmdldENvbG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gQ29sb3JfMS5Db2xvci5ibGFjaztcbiAgICAgICAgfVxuICAgICAgICAvKmxldCBsaWdodFBvd2VyID0gb2JqZWN0LmdldE1hdGVyaWFsKCkuZ2V0RW1pc3Npb24oKSxcbiAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIHNoYWRvd1JheTogSW50ZXJzZWN0UG9pbnQsXG4gICAgICAgICAgICByZXN1bHRQb3dlcjogbnVtYmVyID0gMDtcblxuICAgICAgICBsaWdodFJhbmRvbVBvaW50ID0gb2JqZWN0LmdldFJhbmRvbVBvaW50KCk7XG5cbiAgICAgICAgc2hhZG93UmF5ID0gdGhpcy50cmFjZShcbiAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0SW50ZXJzZWN0KCkgJiZcbiAgICAgICAgICAgIHNoYWRvd1JheS5nZXRPd25lcigpLmdldE1hdGVyaWFsKCkuZ2V0RW1pc3Npb25WYWx1ZSgpID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3VsdFBvd2VyID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRQb3dlcjtcblxuICAgICAgICAvKmxpZ2h0UmFuZG9tUG9pbnQgPSB0aGlzLmNvc2luZVNhbXBsZUhlbWlzcGhlcmUoXG4gICAgICAgICAgICBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXROb3JtYWwoaW50ZXJzZWN0LmdldEhpdFBvaW50KCkpXG4gICAgICAgICk7XG5cbiAgICAgICAgc2hhZG93UmF5ID0gdGhpcy50cmFjZShcbiAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNoYWRvd1JheS5nZXRJbnRlcnNlY3QoKSAmJlxuICAgICAgICAgICAgc2hhZG93UmF5LmdldE93bmVyKCkgaW5zdGFuY2VvZiBBYnN0cmFjdExpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0UG93ZXIgPSAoXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKVxuICAgICAgICAgICAgICAgICAgICApLmdldExlbmd0aCgpICogKGxpZ2h0UG93ZXIgLyBsaWdodC5nZXRGYWRlUmFkaXVzKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdFBvd2VyIDwgMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFBvd2VyID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSovXG4gICAgICAgIC8qcmV0dXJuIHJlc3VsdFBvd2VyOyovXG4gICAgfTtcbiAgICBUcmFjZXIucHJvdG90eXBlLnRyYWNlID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gbmV3IEludGVyc2VjdFBvaW50XzEuSW50ZXJzZWN0UG9pbnQoKSwgaW50ZXJzZWN0RGF0YSwgbWluRGlzdGFuY2UgPSBJbmZpbml0eSwgc2NlbmVPYmplY3RzID0gdGhpcy5zY2VuZS5nZXRPYmplY3RzKCk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgc2NlbmVPYmplY3RzXzEgPSBzY2VuZU9iamVjdHM7IF9pIDwgc2NlbmVPYmplY3RzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0gc2NlbmVPYmplY3RzXzFbX2ldO1xuICAgICAgICAgICAgaW50ZXJzZWN0RGF0YSA9IG9iamVjdC5nZXRJbnRlcnNlY3REYXRhKHJheSk7XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0RGF0YSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10gPCBtaW5EaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0SW50ZXJzZWN0KCk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldEhpdFBvaW50KGludGVyc2VjdERhdGFbJ2hpdFBvaW50J10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXROb3JtYWwoaW50ZXJzZWN0RGF0YVsnbm9ybWFsJ10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXREaXN0YW5jZUZyb21PcmlnaW4oaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXSk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldE93bmVyKG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICB9O1xuICAgIFRyYWNlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgdmFyIHJhbmRvTXVsdGlwbGllciA9IDAuNSwgc3BwID0gMTtcbiAgICAgICAgdmFyIGJ1ZmZlciwgY29sb3IsIHJhbmQsIHJheTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLnNjcmVlbkhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLnNjcmVlbldpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBDb2xvcl8xLkNvbG9yLmJsYWNrO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVyYXRpb24gPSAwOyBpdGVyYXRpb24gPCBzcHA7IGl0ZXJhdGlvbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5kID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZCArPSBNYXRoLnJhbmRvbSgpICogcmFuZG9NdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZCAtPSBNYXRoLnJhbmRvbSgpICogcmFuZG9NdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmF5ID0gbmV3IFJheV8xLlJheSh0aGlzLnNjZW5lLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCksIHRoaXMuZ2V0UGVyc3BlY3RpdmVWZWN0b3IoeCArIHJhbmQsIHkgKyByYW5kKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGNvbG9yLmFkZCh0aGlzLmdldENvbG9yKHJheSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldID0gY29sb3IuZGl2aWRlKHNwcCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbXBvbmVudCBpbiB0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXVtjb21wb25lbnRdID0gQ29sb3JfMS5Db2xvci5zUkdCRW5jb2RlKHRoaXMuYnVmZmVyW2ldW2NvbXBvbmVudF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ3JlZCddKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2godGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsnZ3JlZW4nXSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ2JsdWUnXSk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwOyBpXzEgPCB0aGlzLmJ1ZmZlci5sZW5ndGg7IGlfMSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV8xXS5nZXRDb2xvcigpWydyZWQnXSA9IDAuMDtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXzFdLmdldENvbG9yKClbJ2dyZWVuJ10gPSAwLjA7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV8xXS5nZXRDb2xvcigpWydibHVlJ10gPSAwLjA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRyYWNlci5wcm90b3R5cGUuc2V0U2NlbmUgPSBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH07XG4gICAgcmV0dXJuIFRyYWNlcjtcbn0pKCk7XG5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgIGlmICh0eXBlb2YgKGRhdGEpID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKCdbJyArIGRhdGEgKyAnXScpO1xuICAgIH1cbiAgICB2YXIgdHJhY2VyID0gbmV3IFRyYWNlcigpO1xuICAgIHRyYWNlci5zZXRTY2VuZShuZXcgU2NlbmVfMS5TY2VuZSh7XG4gICAgICAgIGNhbWVyYTogbmV3IENhbWVyYV8xLkNhbWVyYShuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIDAsIC02OTkpLCBuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIDAsIDEpLCBkYXRhWzBdLCBkYXRhWzFdKSxcbiAgICAgICAgb2JqZWN0czogW1xuICAgICAgICAgICAgLypuZXcgU3BoZXJlKG5ldyBWZWN0b3IoMCwgNjMwLCAwKSwgMTUwKVxuICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuZ3JheSwgbmV3IENvbG9yKG5ldyBGbG9hdENvbG9yKDEwMDAwLCAxMDAwMCwgMTAwMDApKSkpLCovXG4gICAgICAgICAgICBuZXcgUG9seWdvbl8xLlBvbHlnb24obmV3IFZlY3Rvcl8xLlZlY3RvcigtNzAwLCA3MDAsIC03MDApLCBuZXcgVmVjdG9yXzEuVmVjdG9yKDcwMCwgNzAwLCAtNzAwKSwgbmV3IFZlY3Rvcl8xLlZlY3RvcigtNzAwLCA3MDAsIDcwMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUpKSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgIG5ldyBQbGFuZV8xLlBsYW5lKG5ldyBWZWN0b3JfMS5WZWN0b3IoMCwgLTEsIDApLCBuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIDcwMCwgMCkpXG4gICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDIxNSwgMjE1LCAyMTUpKSwgbmV3IENvbG9yXzEuQ29sb3IobmV3IEZsb2F0Q29sb3JfMS5GbG9hdENvbG9yKDMwLCAzMCwgMzApKSkpLFxuICAgICAgICAgICAgbmV3IFBsYW5lXzEuUGxhbmUobmV3IFZlY3Rvcl8xLlZlY3RvcigtMSwgMCwgMCksIG5ldyBWZWN0b3JfMS5WZWN0b3IoNzAwLCAwLCAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMC4zICogMjU1LCAyNTUsIDAuMSAqIDI1NSkpKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgbmV3IFBsYW5lXzEuUGxhbmUobmV3IFZlY3Rvcl8xLlZlY3RvcigxLCAwLCAwKSwgbmV3IFZlY3Rvcl8xLlZlY3RvcigtNzAwLCAwLCAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMjU1LCAwLjMgKiAyNTUsIDAuMSAqIDI1NSkpKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgbmV3IFBsYW5lXzEuUGxhbmUobmV3IFZlY3Rvcl8xLlZlY3RvcigwLCAwLCAtMSksIG5ldyBWZWN0b3JfMS5WZWN0b3IoMCwgMCwgNzAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMC43NSAqIDI1NSwgMC43NSAqIDI1NSwgMC43NSAqIDI1NSkpKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgbmV3IFBsYW5lXzEuUGxhbmUobmV3IFZlY3Rvcl8xLlZlY3RvcigwLCAwLCAxKSwgbmV3IFZlY3Rvcl8xLlZlY3RvcigwLCAwLCAtNzAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwoQ29sb3JfMS5Db2xvci5ibGFjaykuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgIC8vIGJvdHRvbSBwbGFuZVxuICAgICAgICAgICAgLypuZXcgU3BoZXJlKG5ldyBWZWN0b3IoLTI1MCwgLTUwMCwgNDUwKSwgMjAwKVxuICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuYmxhY2ssIDEpKSwqL1xuICAgICAgICAgICAgbmV3IFNwaGVyZV8xLlNwaGVyZShuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIC0zMDAsIDQwMCksIDQwMClcbiAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwoQ29sb3JfMS5Db2xvci5ncmF5KSlcbiAgICAgICAgXVxuICAgIH0pKTtcbiAgICB0cmFjZXIucmVuZGVyKGRhdGFbMF0sIGRhdGFbMV0pO1xufTtcbiIsIi8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPVwidHJ1ZVwiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJsaWIvbGliLndlYndvcmtlci5kLnRzXCIgLz5cblxuaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL09iamVjdHMvQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0UG9pbnQgfSBmcm9tIFwiLi9JbnRlcnNlY3RQb2ludFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi9PYmplY3RzL1BsYW5lXCI7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vT2JqZWN0cy9Qb2x5Z29uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuL1JUTWF0aFwiO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xuaW1wb3J0IHsgU3BoZXJlIH0gZnJvbSBcIi4vT2JqZWN0cy9TcGhlcmVcIjtcbmltcG9ydCB7IFNwaGVyaWNhbExpZ2h0IH0gZnJvbSBcIi4vTGlnaHRzL1NwaGVyaWNhbExpZ2h0XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcbmltcG9ydCB7RmxvYXRDb2xvcn0gZnJvbSBcIi4vQ29sb3IvRmxvYXRDb2xvclwiO1xuXG5jbGFzcyBUcmFjZXIge1xuICAgIHByaXZhdGUgYnVmZmVyOiBDb2xvcltdID0gW107XG4gICAgcHJpdmF0ZSBzY2VuZTogU2NlbmU7XG4gICAgcHJpdmF0ZSBzY3JlZW5XaWR0aDogbnVtYmVyID0gMjUwO1xuICAgIHByaXZhdGUgc2NyZWVuSGVpZ2h0OiBudW1iZXIgPSAyNTA7XG5cbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY3JlZW5XaWR0aCAqIHRoaXMuc2NyZWVuSGVpZ2h0ICogMzsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKENvbG9yLmJsYWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY29zaW5lU2FtcGxlSGVtaXNwaGVyZSAobm9ybWFsOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgdTogbnVtYmVyID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHY6IG51bWJlciA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICByOiBudW1iZXIgPSBNYXRoLnNxcnQodSksXG4gICAgICAgICAgICBhbmdsZTogbnVtYmVyID0gMiAqIE1hdGguUEkgKiB2LFxuICAgICAgICAgICAgc2RpcjogVmVjdG9yLFxuICAgICAgICAgICAgdGRpcjogVmVjdG9yO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhub3JtYWwuZ2V0Q29vcmRpbmF0ZXMoKVsneCddKSA8IDAuNSkge1xuICAgICAgICAgICAgc2RpciA9IFZlY3Rvci5jcm9zcyhub3JtYWwsIG5ldyBWZWN0b3IoMSwwLDApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNkaXIgPSBWZWN0b3IuY3Jvc3Mobm9ybWFsLCBuZXcgVmVjdG9yKDAsMSwwKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZGlyID0gVmVjdG9yLmNyb3NzKG5vcm1hbCwgc2Rpcik7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUobm9ybWFsLCAgTWF0aC5zcXJ0KDEgLSB1KSksXG4gICAgICAgICAgICBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZShzZGlyLCByICogTWF0aC5jb3MoYW5nbGUpKSxcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUodGRpciwgciAqIE1hdGguc2luKGFuZ2xlKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvbG9yIChyYXk6IFJheSk6IENvbG9yIHtcbiAgICAgICAgbGV0IGNvbG9yOiBDb2xvciA9IENvbG9yLmJsYWNrLFxuICAgICAgICAgICAgY29zdDogbnVtYmVyLFxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uID0gdGhpcy50cmFjZShyYXkpLFxuICAgICAgICAgICAgbGlnaHRTYW1wbGluZ0NvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIG5ld0RpcmVjdGlvbjogVmVjdG9yLFxuICAgICAgICAgICAgbmV3UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIHJhbmRGYWN0b3IgPSAxLFxuICAgICAgICAgICAgcmF5SXRlcmF0aW9uOiBudW1iZXIgPSByYXkuZ2V0SXRlcmF0aW9uKCksXG4gICAgICAgICAgICB0ZW1wQ29sb3I6IENvbG9yO1xuXG4gICAgICAgIGlmIChyYXlJdGVyYXRpb24gPj0gNSkge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPD0gMC4xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByYW5kRmFjdG9yID0gMSAvICgxIC0gMC4xKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaW50ZXJzZWN0aW9uLmdldEludGVyc2VjdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29sb3IuYmxhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBsaWdodFNhbXBsaW5nQ29sb3IgPSBDb2xvci5ibGFjaztcblxuICAgICAgICBmb3IgKGxldCBsaWdodCBvZiB0aGlzLnNjZW5lLmdldE9iamVjdHMoKSkge1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmdldE1hdGVyaWFsKCkuZ2V0RW1pc3Npb24oKSA9PSBDb2xvci5ibGFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaWdodFNhbXBsaW5nQ29sb3IgPSBsaWdodFNhbXBsaW5nQ29sb3JcbiAgICAgICAgICAgICAgICAuYWRkKHRoaXMuZ2V0TGlnaHRQb3dlcihyYXksIGludGVyc2VjdGlvbiwgbGlnaHQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbG9yID0gbGlnaHRTYW1wbGluZ0NvbG9yLnNjYWxlZChyYXkuZ2V0SXRlcmF0aW9uKCkpLmFkZChcbiAgICAgICAgICAgIGludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgIC5nZXRPd25lcigpXG4gICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgIC5tdWx0aXBsZShcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRFbWlzc2lvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKHJhbmRGYWN0b3IpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIG5ld0RpcmVjdGlvbiA9IHRoaXMuY29zaW5lU2FtcGxlSGVtaXNwaGVyZShpbnRlcnNlY3Rpb24uZ2V0Tm9ybWFsKCkpO1xuXG4gICAgICAgIGlmIChWZWN0b3IuZG90KG5ld0RpcmVjdGlvbiwgcmF5LmdldERpcmVjdGlvbigpKSA+IDApIHtcbiAgICAgICAgICAgIG5ld1BvaW50ID0gVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICByYXkuZ2V0T3JpZ2luKCksXG4gICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5nZXREaXN0YW5jZUZyb21PcmlnaW4oKSAqICgxICsgUlRNYXRoLkVQU0lMT04pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1BvaW50ID0gVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICByYXkuZ2V0T3JpZ2luKCksXG4gICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5nZXREaXN0YW5jZUZyb21PcmlnaW4oKSAqICgxIC0gUlRNYXRoLkVQU0lMT04pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvc3QgPSBWZWN0b3IuZG90KG5ld0RpcmVjdGlvbiwgaW50ZXJzZWN0aW9uLmdldE5vcm1hbCgpKTtcbiAgICAgICAgdGVtcENvbG9yID0gdGhpcy5nZXRDb2xvcihcbiAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgbmV3UG9pbnQsXG4gICAgICAgICAgICAgICAgbmV3RGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgICsrcmF5SXRlcmF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGNvbG9yLmFkZChcbiAgICAgICAgICAgIHRlbXBDb2xvclxuICAgICAgICAgICAgICAgIC5tdWx0aXBsZShcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5zY2FsZWQoY29zdClcbiAgICAgICAgICAgICAgICAuc2NhbGVkKDAuMSlcbiAgICAgICAgICAgICAgICAuc2NhbGVkKHJhbmRGYWN0b3IpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRSZWZsZWN0aW9uQ29sb3IgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSk6IGFueSB7XG4gICAgICAgIGxldCByZWZsZWN0aW9uQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmVmbGVjdGlvblZhbHVlOiBudW1iZXIgPSBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldFJlZmxlY3Rpb25WYWx1ZSgpLFxuICAgICAgICAgICAgcmVmbGVjdGVkUmF5OiBWZWN0b3I7XG5cbiAgICAgICAgaWYgKHJlZmxlY3Rpb25WYWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVmbGVjdGVkUmF5ID0gVmVjdG9yLnJlZmxlY3QoXG4gICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICBpbnRlcnNlY3QuZ2V0Tm9ybWFsKClcbiAgICAgICAgKTtcblxuICAgICAgICByZWZsZWN0aW9uQ29sb3IgPSB0aGlzLmdldENvbG9yKFxuICAgICAgICAgICAgbmV3IFJheShpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSwgcmVmbGVjdGVkUmF5LCByYXkuZ2V0SXRlcmF0aW9uKCkpXG4gICAgICAgICkuc2NhbGVkKHJlZmxlY3Rpb25WYWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlZmxlY3Rpb25Db2xvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBlcnNwZWN0aXZlVmVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBsZXQgY2FtZXJhOiBDYW1lcmEgPSB0aGlzLnNjZW5lLmdldENhbWVyYSgpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0Rm9yd2FyZFZlY3RvcigpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5nZXRSaWdodFZlY3RvcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnJlY2VudGVyWCh4KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0VXBWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclkoeSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExpZ2h0UG93ZXIgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSwgb2JqZWN0OiBBYnN0cmFjdE9iamVjdCk6IGFueSB7XG4gICAgICAgIGxldCBsID0gb2JqZWN0LmdldFJhbmRvbVBvaW50KCk7XG5cbiAgICAgICAgbGV0IHNoYWRvd1JheSA9IHRoaXMudHJhY2UoXG4gICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hhZG93UmF5LmdldEludGVyc2VjdCgpICYmXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldEVtaXNzaW9uVmFsdWUoKSA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0XG4gICAgICAgICAgICAgICAgLmdldE93bmVyKClcbiAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgLypsZXQgbGlnaHRQb3dlciA9IG9iamVjdC5nZXRNYXRlcmlhbCgpLmdldEVtaXNzaW9uKCksXG4gICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBzaGFkb3dSYXk6IEludGVyc2VjdFBvaW50LFxuICAgICAgICAgICAgcmVzdWx0UG93ZXI6IG51bWJlciA9IDA7XG5cbiAgICAgICAgbGlnaHRSYW5kb21Qb2ludCA9IG9iamVjdC5nZXRSYW5kb21Qb2ludCgpO1xuXG4gICAgICAgIHNoYWRvd1JheSA9IHRoaXMudHJhY2UoXG4gICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hhZG93UmF5LmdldEludGVyc2VjdCgpICYmXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldEVtaXNzaW9uVmFsdWUoKSA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXN1bHRQb3dlciA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0UG93ZXI7XG5cbiAgICAgICAgLypsaWdodFJhbmRvbVBvaW50ID0gdGhpcy5jb3NpbmVTYW1wbGVIZW1pc3BoZXJlKFxuICAgICAgICAgICAgaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0Tm9ybWFsKGludGVyc2VjdC5nZXRIaXRQb2ludCgpKVxuICAgICAgICApO1xuXG4gICAgICAgIHNoYWRvd1JheSA9IHRoaXMudHJhY2UoXG4gICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0SW50ZXJzZWN0KCkgJiZcbiAgICAgICAgICAgIHNoYWRvd1JheS5nZXRPd25lcigpIGluc3RhbmNlb2YgQWJzdHJhY3RMaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3VsdFBvd2VyID0gKFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICAgICAgKS5nZXRMZW5ndGgoKSAqIChsaWdodFBvd2VyIC8gbGlnaHQuZ2V0RmFkZVJhZGl1cygpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHRQb3dlciA8IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRQb3dlciA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0qL1xuXG4gICAgICAgIC8qcmV0dXJuIHJlc3VsdFBvd2VyOyovXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFjZSAocmF5OiBSYXkpOiBJbnRlcnNlY3RQb2ludCB7XG4gICAgICAgIGxldCBpbnRlcnNlY3Rpb24gPSBuZXcgSW50ZXJzZWN0UG9pbnQoKSxcbiAgICAgICAgICAgIGludGVyc2VjdERhdGE6IGFueSxcbiAgICAgICAgICAgIG1pbkRpc3RhbmNlOiBudW1iZXIgPSBJbmZpbml0eSxcbiAgICAgICAgICAgIHNjZW5lT2JqZWN0czogQWJzdHJhY3RPYmplY3RbXSA9IHRoaXMuc2NlbmUuZ2V0T2JqZWN0cygpO1xuXG4gICAgICAgIGZvciAobGV0IG9iamVjdCBvZiBzY2VuZU9iamVjdHMpIHtcbiAgICAgICAgICAgIGludGVyc2VjdERhdGEgPSBvYmplY3QuZ2V0SW50ZXJzZWN0RGF0YShyYXkpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0RGF0YSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10gPCBtaW5EaXN0YW5jZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddO1xuXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldEludGVyc2VjdCgpO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXRIaXRQb2ludChpbnRlcnNlY3REYXRhWydoaXRQb2ludCddKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0Tm9ybWFsKGludGVyc2VjdERhdGFbJ25vcm1hbCddKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0RGlzdGFuY2VGcm9tT3JpZ2luKGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXRPd25lcihvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyIChzY3JlZW5XaWR0aDogbnVtYmVyLCBzY3JlZW5IZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCByYW5kb011bHRpcGxpZXIgPSAwLjUsXG4gICAgICAgICAgICAgIHNwcCA9IDE7XG5cbiAgICAgICAgbGV0IGJ1ZmZlcjogbnVtYmVyW10sXG4gICAgICAgICAgICBjb2xvcjogQ29sb3IsXG4gICAgICAgICAgICByYW5kOiBudW1iZXIsXG4gICAgICAgICAgICByYXk6IFJheTtcblxuICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gc2NyZWVuV2lkdGg7XG4gICAgICAgIHRoaXMuc2NyZWVuSGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBidWZmZXIgPSBbXTtcblxuICAgICAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuc2NyZWVuSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuc2NyZWVuV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IENvbG9yLmJsYWNrO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZXJhdGlvbiA9IDA7IGl0ZXJhdGlvbiA8IHNwcDsgaXRlcmF0aW9uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgKz0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZCAtPSBNYXRoLnJhbmRvbSgpICogcmFuZG9NdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByYXkgPSBuZXcgUmF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2V0Q2FtZXJhKCkuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFBlcnNwZWN0aXZlVmVjdG9yKHggKyByYW5kLCB5ICsgcmFuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gY29sb3IuYWRkKHRoaXMuZ2V0Q29sb3IocmF5KSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldID0gY29sb3IuZGl2aWRlKHNwcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29tcG9uZW50IGluIHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldW2NvbXBvbmVudF0gPSBDb2xvci5zUkdCRW5jb2RlKHRoaXMuYnVmZmVyW2ldW2NvbXBvbmVudF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2godGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsncmVkJ10pO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaCh0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydncmVlbiddKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2godGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsnYmx1ZSddKTtcblxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IobGV0ICBpID0gMDsgaSA8IHRoaXMuYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsncmVkJ10gPSAwLjA7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsnZ3JlZW4nXSA9IDAuMDtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydibHVlJ10gPSAwLjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzZXRTY2VuZSAoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB9XG59XG5cbm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIGRhdGEgPSBtZXNzYWdlLmRhdGE7XG5cbiAgICBpZiAodHlwZW9mKGRhdGEpID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKCdbJytkYXRhKyddJyk7XG4gICAgfVxuXG4gICAgbGV0IHRyYWNlciA9IG5ldyBUcmFjZXIoKTtcblxuICAgIHRyYWNlci5zZXRTY2VuZShcbiAgICAgICAgbmV3IFNjZW5lKHtcbiAgICAgICAgICAgIGNhbWVyYTogbmV3IENhbWVyYShcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDAsIC02OTkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgMSksXG4gICAgICAgICAgICAgICAgZGF0YVswXSxcbiAgICAgICAgICAgICAgICBkYXRhWzFdXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgb2JqZWN0czogW1xuICAgICAgICAgICAgICAgIC8qbmV3IFNwaGVyZShuZXcgVmVjdG9yKDAsIDYzMCwgMCksIDE1MClcbiAgICAgICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ncmF5LCBuZXcgQ29sb3IobmV3IEZsb2F0Q29sb3IoMTAwMDAsIDEwMDAwLCAxMDAwMCkpKSksKi9cbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUpKSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAtMSwgMCksIG5ldyBWZWN0b3IgKDAsIDcwMCwgMCkpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyMTUsIDIxNSwgMjE1KSksIG5ldyBDb2xvcihuZXcgRmxvYXRDb2xvcigzMCwgMzAsIDMwKSkpKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigtMSwgMCwgMCksIG5ldyBWZWN0b3IgKDcwMCwgMCwgMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAuMyAqIDI1NSwgMjU1LCAwLjEgKiAyNTUpKSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigxLCAwLCAwKSwgbmV3IFZlY3RvciAoLTcwMCwgMCwgMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMC4zICogMjU1LCAwLjEgKiAyNTUpKSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAwLCAtMSksIG5ldyBWZWN0b3IgKDAsIDAsIDcwMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUpKSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAwLCAxKSwgbmV3IFZlY3RvciAoMCwgMCwgLTcwMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibGFjaykuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyBib3R0b20gcGxhbmVcbiAgICAgICAgICAgICAgICAvKm5ldyBTcGhlcmUobmV3IFZlY3RvcigtMjUwLCAtNTAwLCA0NTApLCAyMDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuYmxhY2ssIDEpKSwqL1xuICAgICAgICAgICAgICAgIG5ldyBTcGhlcmUobmV3IFZlY3RvcigwLCAtMzAwLCA0MDApLCA0MDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuZ3JheSkpXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHRyYWNlci5yZW5kZXIoZGF0YVswXSwgZGF0YVsxXSk7XG59OyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFZlY3RvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmVjdG9yKHgsIHksIHopIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy56ID0gejtcbiAgICB9XG4gICAgVmVjdG9yLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgICAgIHo6IHRoaXMuelxuICAgICAgICB9O1xuICAgIH07XG4gICAgVmVjdG9yLnByb3RvdHlwZS5hc0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdGhpcy54LFxuICAgICAgICAgICAgdGhpcy55LFxuICAgICAgICAgICAgdGhpcy56XG4gICAgICAgIF07XG4gICAgfTtcbiAgICBWZWN0b3IucHJvdG90eXBlLmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh0aGlzLngsIDIpICsgTWF0aC5wb3codGhpcy55LCAyKSArIE1hdGgucG93KHRoaXMueiwgMikpO1xuICAgIH07XG4gICAgVmVjdG9yLnNjYWxlID0gZnVuY3Rpb24gKHZlY3RvciwgbXVsdGlwbGllcikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IueCAqIG11bHRpcGxpZXIsIHZlY3Rvci55ICogbXVsdGlwbGllciwgdmVjdG9yLnogKiBtdWx0aXBsaWVyKTtcbiAgICB9O1xuICAgIFZlY3Rvci5hZGQgPSBmdW5jdGlvbiAodmVjdG9yMSwgdmVjdG9yMikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IxLnggKyB2ZWN0b3IyLngsIHZlY3RvcjEueSArIHZlY3RvcjIueSwgdmVjdG9yMS56ICsgdmVjdG9yMi56KTtcbiAgICB9O1xuICAgIFZlY3Rvci5zdWJzdHJhY3QgPSBmdW5jdGlvbiAodmVjdG9yMSwgdmVjdG9yMikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IxLnggLSB2ZWN0b3IyLngsIHZlY3RvcjEueSAtIHZlY3RvcjIueSwgdmVjdG9yMS56IC0gdmVjdG9yMi56KTtcbiAgICB9O1xuICAgIFZlY3Rvci5kb3QgPSBmdW5jdGlvbiAodmVjdG9yMSwgdmVjdG9yMikge1xuICAgICAgICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi54ICsgdmVjdG9yMS55ICogdmVjdG9yMi55ICsgdmVjdG9yMS56ICogdmVjdG9yMi56O1xuICAgIH07XG4gICAgVmVjdG9yLmNyb3NzID0gZnVuY3Rpb24gKHZlY3RvcjEsIHZlY3RvcjIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS55ICogdmVjdG9yMi56IC0gdmVjdG9yMS56ICogdmVjdG9yMi55LCB2ZWN0b3IxLnogKiB2ZWN0b3IyLnggLSB2ZWN0b3IxLnggKiB2ZWN0b3IyLnosIHZlY3RvcjEueCAqIHZlY3RvcjIueSAtIHZlY3RvcjEueSAqIHZlY3RvcjIueCk7XG4gICAgfTtcbiAgICBWZWN0b3Iubm9ybWFsaXplID0gZnVuY3Rpb24gKHZlY3Rvcikge1xuICAgICAgICByZXR1cm4gVmVjdG9yLnNjYWxlKHZlY3RvciwgMSAvIHZlY3Rvci5nZXRMZW5ndGgoKSk7XG4gICAgfTtcbiAgICBWZWN0b3IucG93ID0gZnVuY3Rpb24gKHZlY3RvciwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoTWF0aC5wb3codmVjdG9yLnksIHZhbHVlKSwgTWF0aC5wb3codmVjdG9yLnosIHZhbHVlKSwgTWF0aC5wb3codmVjdG9yLngsIHZhbHVlKSk7XG4gICAgfTtcbiAgICBWZWN0b3IuaW52ZXJzZSA9IGZ1bmN0aW9uICh2ZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zY2FsZSh2ZWN0b3IsIC0xKTtcbiAgICB9O1xuICAgIFZlY3Rvci5yZWZsZWN0ID0gZnVuY3Rpb24gKHZlY3Rvciwgbm9ybWFsKSB7XG4gICAgICAgIHZhciBmID0gMiAqIFZlY3Rvci5kb3QodmVjdG9yLCBub3JtYWwpO1xuICAgICAgICByZXR1cm4gVmVjdG9yLnN1YnN0cmFjdCh2ZWN0b3IsIFZlY3Rvci5zY2FsZShub3JtYWwsIGYpKTtcbiAgICB9O1xuICAgIHJldHVybiBWZWN0b3I7XG59KSgpO1xuZXhwb3J0cy5WZWN0b3IgPSBWZWN0b3I7XG4iLCJleHBvcnQgY2xhc3MgVmVjdG9yIHtcbiAgICBwcml2YXRlIHg6IG51bWJlcjtcbiAgICBwcml2YXRlIHk6IG51bWJlcjtcbiAgICBwcml2YXRlIHo6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMueiA9IHo7XG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMgKCk6IHt4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgICAgICB6OiB0aGlzLnpcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXNBcnJheSAoKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdGhpcy54LFxuICAgICAgICAgICAgdGhpcy55LFxuICAgICAgICAgICAgdGhpcy56XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldExlbmd0aCAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiogMiArIHRoaXMueSAqKiAyICsgdGhpcy56ICoqIDIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2NhbGUgKHZlY3RvcjogVmVjdG9yLCBtdWx0aXBsaWVyOiBudW1iZXIpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IueCAqIG11bHRpcGxpZXIsIHZlY3Rvci55ICogbXVsdGlwbGllciwgdmVjdG9yLnogKiBtdWx0aXBsaWVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGFkZCAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IxLnggKyB2ZWN0b3IyLngsIHZlY3RvcjEueSArIHZlY3RvcjIueSwgdmVjdG9yMS56ICsgdmVjdG9yMi56KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHN1YnN0cmFjdCAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih2ZWN0b3IxLnggLSB2ZWN0b3IyLngsIHZlY3RvcjEueSAtIHZlY3RvcjIueSwgdmVjdG9yMS56IC0gdmVjdG9yMi56KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGRvdCAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi54ICsgdmVjdG9yMS55ICogdmVjdG9yMi55ICsgdmVjdG9yMS56ICogdmVjdG9yMi56O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY3Jvc3MgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnogLSB2ZWN0b3IxLnogKiB2ZWN0b3IyLnksXG4gICAgICAgICAgICB2ZWN0b3IxLnogKiB2ZWN0b3IyLnggLSB2ZWN0b3IxLnggKiB2ZWN0b3IyLnosXG4gICAgICAgICAgICB2ZWN0b3IxLnggKiB2ZWN0b3IyLnkgLSB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIG5vcm1hbGl6ZSAodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLnNjYWxlKHZlY3RvciwgMSAvIHZlY3Rvci5nZXRMZW5ndGgoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBwb3cgKHZlY3RvcjogVmVjdG9yLCB2YWx1ZTogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB2ZWN0b3IueSAqKiB2YWx1ZSxcbiAgICAgICAgICAgIHZlY3Rvci56ICoqIHZhbHVlLFxuICAgICAgICAgICAgdmVjdG9yLnggKiogdmFsdWVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGludmVyc2UgKHZlY3RvcjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zY2FsZSh2ZWN0b3IsIC0xKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHJlZmxlY3QgKHZlY3RvcjogVmVjdG9yLCBub3JtYWw6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIGxldCBmID0gMiAqIFZlY3Rvci5kb3QodmVjdG9yLCBub3JtYWwpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgdmVjdG9yLFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKG5vcm1hbCwgZilcbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=
