(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalize(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalize(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":16}],2:[function(require,module,exports){
var RGBColor_1=require("./RGBColor"),FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.getColor=function(){return{red:this.red,green:this.green,blue:this.blue}},o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o.black=new o(new RGBColor_1.RGBColor(0,0,0)),o.white=new o(new RGBColor_1.RGBColor(255,255,255)),o.gray=new o(new RGBColor_1.RGBColor(127,127,127)),o.red=new o(new RGBColor_1.RGBColor(255,0,0)),o.green=new o(new RGBColor_1.RGBColor(0,255,0)),o.blue=new o(new RGBColor_1.RGBColor(0,0,255)),o}();exports.Color=Color;


},{"./FloatColor":3,"./RGBColor":4}],3:[function(require,module,exports){
var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
var RGBColor=function(){function o(t,r,n){this.red=o.toFloat(t),this.green=o.toFloat(r),this.blue=o.toFloat(n)}return o.toFloat=function(o){return 0===o?o:o/255},o}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
var IntersectPoint=function(){function t(){this.intersected=!1}return t.prototype.getIntersect=function(){return this.intersected},t.prototype.getHitPoint=function(){return this.hitPoint},t.prototype.getNormal=function(){return this.normal},t.prototype.getOwner=function(){return this.owner},t.prototype.getDistanceFromOrigin=function(){return this.distanceFromOrigin},t.prototype.setIntersect=function(){this.intersected=!0},t.prototype.setHitPoint=function(t){this.hitPoint=t},t.prototype.setNormal=function(t){this.normal=t},t.prototype.setOwner=function(t){this.owner=t},t.prototype.setDistanceFromOrigin=function(t){this.distanceFromOrigin=t},t}();exports.IntersectPoint=IntersectPoint;


},{}],6:[function(require,module,exports){
var AbstractLight=function(){function t(){}return t}();exports.AbstractLight=AbstractLight;


},{}],7:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},AbstractLight_1=require("./AbstractLight"),Color_1=require("./../Color/Color"),Material_1=require("./../Material"),RGBColor_1=require("./../Color/RGBColor"),RTMath_1=require("./../RTMath"),Vector_1=require("./../Vector"),SphericalLight=function(t){function r(r,e,o){t.call(this),this.radius=50,this.fadeRadius=2500,this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(244,244,244)),0).setLambertCoeff(1),this.center=r,this.power=e,o&&(this.radius=o)}return __extends(r,t),r.prototype.getFadeRadius=function(){return this.radius+this.fadeRadius},r.prototype.getPosition=function(){return this.center},r.prototype.getPower=function(){return this.power},r.prototype.getRadius=function(){return this.radius},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getIntersectData=function(t){var r,e,o,i,a,n,s,c=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(c,t.getDirection()),u=Vector_1.Vector.dot(c,c)-Math.pow(this.radius,2),p=Math.pow(h,2)-u;if(!(h>0||0>p||p>=0&&(r=-h+Math.sqrt(p),e=-h-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return n=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),a),t.getOrigin()),s=Vector_1.Vector.substract(n,t.getOrigin()).getLength(),{hitPoint:n,normal:this.getNormal(n),distance:s}},r.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},r.prototype.getMaterial=function(){return this.material},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractLight_1.AbstractLight);exports.SphericalLight=SphericalLight;


},{"./../Color/Color":2,"./../Color/RGBColor":4,"./../Material":8,"./../RTMath":12,"./../Vector":16,"./AbstractLight":6}],8:[function(require,module,exports){
var Color_1=require("./Color/Color"),RGBColor_1=require("./Color/RGBColor"),Material=function(){function o(o,t){void 0===o&&(o=new Color_1.Color(new RGBColor_1.RGBColor(255,0,0))),void 0===t&&(t=0),this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,this.color=o,this.reflectionCoeff=t}return o.prototype.getColor=function(){return this.color},o.prototype.getLambertCoeff=function(){return this.lambertCoeff},o.prototype.getPhongCoeff=function(){return this.phongCoeff},o.prototype.getReflectionValue=function(){return this.reflectionCoeff},o.prototype.setLambertCoeff=function(o){return this.lambertCoeff=o,this.phongCoeff=1-o,this},o.prototype.setPhongCoeff=function(o){return this.phongCoeff=o,this.lambertCoeff=1-o,this},o}();exports.Material=Material;


},{"./Color/Color":2,"./Color/RGBColor":4}],9:[function(require,module,exports){
var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],10:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RTMath_1=require("../RTMath"),Vector_1=require("../Vector"),Plane=function(t){function e(e,r){t.call(this),this.point=new Vector_1.Vector(0,0,0),this.material=new Material_1.Material(Color_1.Color.gray,0),this.normal=e,r&&(this.point=r)}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o=Vector_1.Vector.dot(Vector_1.Vector.substract(this.point,t.getOrigin()),this.normal)/Vector_1.Vector.dot(t.getDirection(),this.getNormal());if(!(o<=RTMath_1.RTMath.EPSILON))return r=Vector_1.Vector.add(t.getOrigin(),Vector_1.Vector.scale(t.getDirection(),o)),e=Vector_1.Vector.substract(r,t.getOrigin()).getLength(),{hitPoint:r,normal:this.getNormal(),distance:e}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(){return this.normal},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Plane=Plane;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],11:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Sphere=function(t){function e(e,r){t.call(this),this.material=new Material_1.Material(Color_1.Color.red,0),this.center=e,this.radius=r}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o,a,i,c,n,s=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(s,t.getDirection()),u=Vector_1.Vector.dot(s,s)-Math.pow(this.radius,2),_=Math.pow(h,2)-u;if(!(h>0||0>_||_>=0&&(e=-h+Math.sqrt(_),r=-h-Math.sqrt(_),o=Math.min(e,r),a=Math.max(e,r),i=o>RTMath_1.RTMath.EPSILON?o:a,i<RTMath_1.RTMath.EPSILON)))return c=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),i),t.getOrigin()),n=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{hitPoint:c,normal:this.getNormal(c),distance:n}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],12:[function(require,module,exports){
var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],13:[function(require,module,exports){
var Vector_1=require("./Vector"),Ray=function(){function t(t,i,r){this.iteration=5,this.origin=t,this.direction=Vector_1.Vector.normalize(i),r&&(this.iteration=r)}return t.prototype.getOrigin=function(){return this.origin},t.prototype.getDirection=function(){return this.direction},t.prototype.getIteration=function(){return this.iteration},t.prototype.getHitPoint=function(t){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scale(this.direction,t))},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":16}],14:[function(require,module,exports){
var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],15:[function(require,module,exports){
var AbstractLight_1=require("./Lights/AbstractLight"),Camera_1=require("./Camera"),Color_1=require("./Color/Color"),IntersectPoint_1=require("./IntersectPoint"),Material_1=require("./Material"),Plane_1=require("./Objects/Plane"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),SphericalLight_1=require("./Lights/SphericalLight"),Vector_1=require("./Vector"),Tracer=function(){function e(){this.buffer=[],this.screenWidth=250,this.screenHeight=250;for(var e=0;e<this.screenWidth*this.screenHeight*3;e++)this.buffer.push(Color_1.Color.black)}return e.prototype.cosineSampleHemisphere=function(e){var t,r,o=Math.random(),a=Math.random(),n=Math.sqrt(o),i=2*Math.PI*a;return t=Math.abs(e.getCoordinates().x)<.5?Vector_1.Vector.cross(e,new Vector_1.Vector(1,0,0)):Vector_1.Vector.cross(e,new Vector_1.Vector(0,1,0)),r=Vector_1.Vector.cross(e,t),Vector_1.Vector.add(Vector_1.Vector.scale(e,Math.sqrt(1-o)),Vector_1.Vector.add(Vector_1.Vector.scale(t,n*Math.cos(i)),Vector_1.Vector.scale(r,n*Math.sin(i))))},e.prototype.getColor=function(e){var t=this.trace(e),r=Color_1.Color.black,o=Color_1.Color.black,a=e.getIteration();return e.setIteration(--a),0===a?Color_1.Color.black:t.getIntersect()?(r=this.getDiffuseColor(e,t),o=this.getReflectionColor(e,t),r.add(o)):Color_1.Color.black},e.prototype.getDiffuseColor=function(e,t,r){void 0===r&&(r=!0);for(var o,a,n,i,c,l,s,g,_,h,C=Color_1.Color.black,V=0,w=this.scene.getLights();V<w.length;V++){var f=w[V];if(t.getOwner()instanceof AbstractLight_1.AbstractLight)return t.getOwner().getMaterial().getColor();l=this.getLightPower(t,f),o=Color_1.Color.black,a=Color_1.Color.black,n=Color_1.Color.black,c=Vector_1.Vector.normalize(Vector_1.Vector.substract(t.getHitPoint(),f.getPosition()));var u=void 0;i=this.cosineSampleHemisphere(t.getOwner().getNormal(t.getHitPoint())),u=this.getColor(new Ray_1.Ray(t.getHitPoint(),i,e.getIteration())),n=n.add(u),g=-Vector_1.Vector.dot(c,t.getNormal()),o=o.add(t.getOwner().getMaterial().getColor().multiple(f.getMaterial().getColor().scaled(l*g*t.getOwner().getMaterial().getLambertCoeff()).add(n.divide(Math.PI)))),s=Vector_1.Vector.reflect(c,t.getNormal()),_=-Vector_1.Vector.dot(s,e.getDirection()),_>0&&(h=Math.pow(_,35),a=a.add(t.getOwner().getMaterial().getColor().multiple(f.getMaterial().getColor().scaled(l*h*t.getOwner().getMaterial().getPhongCoeff())))),C=C.add(o.add(a))}return C},e.prototype.getReflectionColor=function(e,t){var r,o,a=t.getOwner().getMaterial().getReflectionValue();return 0===a?Color_1.Color.black:(o=Vector_1.Vector.reflect(e.getDirection(),t.getNormal()),r=this.getColor(new Ray_1.Ray(t.getHitPoint(),o,e.getIteration())).scaled(a))},e.prototype.getPerspectiveVector=function(e,t){var r=this.scene.getCamera();return Vector_1.Vector.normalize(Vector_1.Vector.add(r.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scale(r.getRightVector(),r.recenterX(e)),Vector_1.Vector.scale(r.getUpVector(),r.recenterY(t)))))},e.prototype.getLightPower=function(e,t){var r,o,a=t.getPower(),n=0;return r=this.cosineSampleHemisphere(e.getOwner().getNormal(e.getHitPoint())),o=this.trace(new Ray_1.Ray(e.getHitPoint(),r)),o.getIntersect()&&o.getOwner()instanceof AbstractLight_1.AbstractLight&&(n+=a-Vector_1.Vector.substract(Vector_1.Vector.substract(t.getPosition(),r),e.getHitPoint()).getLength()*(a/t.getFadeRadius())),n},e.prototype.trace=function(e){for(var t,r=new IntersectPoint_1.IntersectPoint,o=1/0,a=this.scene.getObjects().concat(this.scene.getLights()),n=0,i=a;n<i.length;n++){var c=i[n];t=c.getIntersectData(e),t&&t.distance<o&&(o=t.distance,r.setIntersect(),r.setHitPoint(t.hitPoint),r.setNormal(t.normal),r.setDistanceFromOrigin(t.distance),r.setOwner(c))}return r},e.prototype.render=function(e,t){var r,o,a,n=.5;for(this.screenWidth=e,this.screenHeight=t;;){r=[];for(var i=0;1>i;i++)for(var c=0,l=0;l<this.screenHeight;l++)for(var s=0;s<this.screenWidth;s++){o=0,Math.random()>.5?o+=Math.random()*n:o-=Math.random()*n,a=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(s+o,l+o)),this.buffer[c]=Color_1.Color.black.add(this.getColor(a));for(var g in this.buffer[c].getColor())this.buffer[c][g]=Color_1.Color.sRGBEncode(this.buffer[c][g]);r.push(this.buffer[c].getColor().red),r.push(this.buffer[c].getColor().green),r.push(this.buffer[c].getColor().blue),c++}for(var c=0;c<this.buffer.length;c++)this.buffer[c].getColor().red=0,this.buffer[c].getColor().green=0,this.buffer[c].getColor().blue=0;self.postMessage(r)}},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse("["+t+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),t[0],t[1]),lights:[new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,600,0),1,100).setMaterial(new Material_1.Material(Color_1.Color.white)),new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,0,0),.6,150).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,235,200))))],objects:[new Plane_1.Plane(new Vector_1.Vector(0,1,0),new Vector_1.Vector(0,-700,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,191.25,191.25)),0)),new Plane_1.Plane(new Vector_1.Vector(0,-1,0),new Vector_1.Vector(0,700,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,191.25,191.25)),0)),new Plane_1.Plane(new Vector_1.Vector(-1,0,0),new Vector_1.Vector(700,0,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(63.75,63.75,191.25)),0)),new Plane_1.Plane(new Vector_1.Vector(1,0,0),new Vector_1.Vector(-700,0,0)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,63.75,63.75)),0)),new Plane_1.Plane(new Vector_1.Vector(0,0,-1),new Vector_1.Vector(0,0,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(191.25,191.25,191.25)),0)),new Plane_1.Plane(new Vector_1.Vector(0,0,1),new Vector_1.Vector(0,0,-700)).setMaterial(new Material_1.Material(Color_1.Color.black,0)),new Sphere_1.Sphere(new Vector_1.Vector(-250,-500,450),200).setMaterial(new Material_1.Material(Color_1.Color.black,1)),new Sphere_1.Sphere(new Vector_1.Vector(250,-500,400),200).setMaterial(new Material_1.Material(Color_1.Color.green,0))]})),r.render(t[0],t[1])};


},{"./Camera":1,"./Color/Color":2,"./Color/RGBColor":4,"./IntersectPoint":5,"./Lights/AbstractLight":6,"./Lights/SphericalLight":7,"./Material":8,"./Objects/Plane":10,"./Objects/Sphere":11,"./Ray":13,"./Scene":14,"./Vector":16}],16:[function(require,module,exports){
var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.scale=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.normalize=function(n){return t.scale(n,1/n.getLength())},t.pow=function(n,r){return new t(Math.pow(n.y,r),Math.pow(n.z,r),Math.pow(n.x,r))},t.inverse=function(n){return t.scale(n,-1)},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scale(r,e))},t}();exports.Vector=Vector;


},{}]},{},[15])(15)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9zb3VyY2UvQ2FtZXJhLnRzIiwiL3NvdXJjZS9Db2xvci9Db2xvci50cyIsIi9zb3VyY2UvQ29sb3IvRmxvYXRDb2xvci50cyIsIi9zb3VyY2UvQ29sb3IvUkdCQ29sb3IudHMiLCIvc291cmNlL0ludGVyc2VjdFBvaW50LnRzIiwiL3NvdXJjZS9MaWdodHMvQWJzdHJhY3RMaWdodC50cyIsIi9zb3VyY2UvTGlnaHRzL1NwaGVyaWNhbExpZ2h0LmpzIiwiL3NvdXJjZS9MaWdodHMvU3BoZXJpY2FsTGlnaHQudHMiLCIvc291cmNlL01hdGVyaWFsLnRzIiwiL3NvdXJjZS9PYmplY3RzL0Fic3RyYWN0T2JqZWN0LnRzIiwiL3NvdXJjZS9PYmplY3RzL1BsYW5lLmpzIiwiL3NvdXJjZS9PYmplY3RzL1BsYW5lLnRzIiwiL3NvdXJjZS9PYmplY3RzL1NwaGVyZS5qcyIsIi9zb3VyY2UvT2JqZWN0cy9TcGhlcmUudHMiLCIvc291cmNlL1JUTWF0aC50cyIsIi9zb3VyY2UvUmF5LnRzIiwiL3NvdXJjZS9TY2VuZS50cyIsIi9zb3VyY2UvVHJhY2VyV29ya2VyLnRzIiwiL3NvdXJjZS9WZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxHQUFBLFVBQUEsUUFBdUIsWUFFdkIsT0FBQSxXQVNJLFFBQUEsR0FBYSxFQUFrQixFQUFtQixFQUFxQixHQUNuRSxLQUFLLFNBQVcsRUFDaEIsS0FBSyxVQUFZLFNBQUEsT0FBTyxVQUFVLEdBQ2xDLEtBQUssWUFBYyxFQUNuQixLQUFLLGFBQWUsRUFFcEIsS0FBSyxjQUFnQixTQUFBLE9BQU8sVUFBVSxTQUFBLE9BQU8sVUFBVSxLQUFLLFVBQVcsS0FBSyxXQUM1RSxLQUFLLFlBQWMsU0FBQSxPQUFPLE1BQ3RCLFNBQUEsT0FBTyxVQUNILFNB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QSxNQUFNLEdBQUksWUFBQSxTQUFTLE9BQVksT0FBWSxTQUFjLElBQzlJLEdBQUksU0FBQSxNQUFNLEdBQUksVUFBQSxPQUFPLEVBQUcsR0FBSSxHQUFJLEdBQUksVUFBQSxPQUFRLEVBQUcsSUFBSyxJQUFJLFlBQVksR0FBSSxZQUFBLFNBQVMsR0FBSSxTQUFBLE1BQU0sR0FBSSxZQUFBLFNBQVMsT0FBWSxPQUFZLFNBQWMsSUFDOUksR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sR0FBSSxFQUFHLEdBQUksR0FBSSxVQUFBLE9BQVEsSUFBSyxFQUFHLElBQUksWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxNQUFZLE1BQVksU0FBYyxJQUM5SSxHQUFJLFNBQUEsTUFBTSxHQUFJLFVBQUEsT0FBTyxFQUFHLEVBQUcsR0FBSSxHQUFJLFVBQUEsT0FBUSxLQUFNLEVBQUcsSUFBSSxZQUFZLEdBQUksWUFBQSxTQUFTLEdBQUksU0FBQSxNQUFNLEdBQUksWUFBQSxTQUFTLE9BQVksTUFBWSxRQUFjLElBQzlJLEdBQUksU0FBQSxNQUFNLEdBQUksVUFBQSxPQUFPLEVBQUcsRUFBRyxJQUFLLEdBQUksVUFBQSxPQUFRLEVBQUcsRUFBRyxNQUFNLFlBQVksR0FBSSxZQUFBLFNBQVMsR0FBSSxTQUFBLE1BQU0sR0FBSSxZQUFBLFNBQVMsT0FBWSxPQUFZLFNBQWMsSUFDOUksR0FBSSxTQUFBLE1BQU0sR0FBSSxVQUFBLE9BQU8sRUFBRyxFQUFHLEdBQUksR0FBSSxVQUFBLE9BQVEsRUFBRyxFQUFHLE9BQU8sWUFBWSxHQUFJLFlBQUEsU0FBUyxRQUFBLE1BQU0sTUFBTyxJQTJDOUYsR0FBSSxVQUFBLE9BQU8sR0FBSSxVQUFBLE9BQU8sS0FBTSxLQUFNLEtBQU0sS0FDbkMsWUFBWSxHQUFJLFlBQUEsU0FBUyxRQUFBLE1BQU0sTUFBTyxJQUMzQyxHQUFJLFVBQUEsT0FBTyxHQUFJLFVBQUEsT0FBTyxJQUFLLEtBQU0sS0FBTSxLQUNsQyxZQUFZLEdBQUksWUFBQSxTQUFTLFFBQUEsTUFBTSxNQUFPLFFBS3ZELEVBQU8sT0FBTyxFQUFLLEdBQUksRUFBSzs7OztBQ3BmaEMsR0FBQSxRQUFBLFdBS0ksUUFBQSxHQUFhLEVBQVcsRUFBVyxHQUMvQixLQUFLLEVBQUksRUFDVCxLQUFLLEVBQUksRUFDVCxLQUFLLEVBQUksRUF1RWpCLE1BcEVJLEdBQUEsVUFBQSxlQUFBLFdBQ0ksT0FDSSxFQUFHLEtBQUssRUFDUixFQUFHLEtBQUssRUFDUixFQUFHLEtBQUssSUFJVCxFQUFBLFVBQUEsUUFBUCxXQUNJLE9BQ0ksS0FBSyxFQUNMLEtBQUssRUFDTCxLQUFLLElBSU4sRUFBQSxVQUFBLFVBQVAsV0FDSSxNQUFPLE1BQUssS0FBSyxLQUFBLElBQUEsS0FBSyxFQUFLLEdBQUksS0FBQSxJQUFBLEtBQUssRUFBSyxHQUFJLEtBQUEsSUFBQSxLQUFLLEVBQUssS0FHN0MsRUFBQSxNQUFkLFNBQXFCLEVBQWdCLEdBQ2pDLE1BQU8sSUFBSSxHQUFPLEVBQU8sRUFBSSxFQUFZLEVBQU8sRUFBSSxFQUFZLEVBQU8sRUFBSSxJQUdqRSxFQUFBLElBQWQsU0FBbUIsRUFBaUIsR0FDaEMsTUFBTyxJQUFJLEdBQU8sRUFBUSxFQUFJLEVBQVEsRUFBRyxFQUFRLEVBQUksRUFBUSxFQUFHLEVBQVEsRUFBSSxFQUFRLElBRzFFLEVBQUEsVUFBZCxTQUF5QixFQUFpQixHQUN0QyxNQUFPLElBQUksR0FBTyxFQUFRLEVBQUksRUFBUSxFQUFHLEVBQVEsRUFBSSxFQUFRLEVBQUcsRUFBUSxFQUFJLEVBQVEsSUFHMUUsRUFBQSxJQUFkLFNBQW1CLEVBQWlCLEdBQ2hDLE1BQU8sR0FBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEdBR2pFLEVBQUEsTUFBZCxTQUFxQixFQUFpQixHQUNsQyxNQUFPLElBQUksR0FDUCxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQzVDLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFDNUMsRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxJQUl0QyxFQUFBLFVBQWQsU0FBeUIsR0FDckIsTUFBTyxHQUFPLE1BQU0sRUFBUSxFQUFJLEVBQU8sY0FHN0IsRUFBQSxJQUFkLFNBQW1CLEVBQWdCLEdBQy9CLE1BQU8sSUFBSSxHQUNQLEtBQUEsSUFBQSxFQUFPLEVBQUssR0FDWixLQUFBLElBQUEsRUFBTyxFQUFLLEdBQ1osS0FBQSxJQUFBLEVBQU8sRUFBSyxLQUlOLEVBQUEsUUFBZCxTQUF1QixHQUNuQixNQUFPLEdBQU8sTUFBTSxFQUFRLEtBR2xCLEVBQUEsUUFBZCxTQUF1QixFQUFnQixHQUNuQyxHQUFJLEdBQUksRUFBSSxFQUFPLElBQUksRUFBUSxFQUUvQixPQUFPLEdBQU8sVUFDVixFQUNBLEVBQU8sTUFBTSxFQUFRLEtBR2pDLElBL0VhLFNBQUEsT0FBTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBmb3J3YXJkVmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByaWdodFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgdXBWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChwb3NpdGlvbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3Rvciwgc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemUoZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IgPSBWZWN0b3Iubm9ybWFsaXplKFZlY3Rvci5zdWJzdHJhY3QodGhpcy5kaXJlY3Rpb24sIHRoaXMucG9zaXRpb24pKTtcbiAgICAgICAgdGhpcy5yaWdodFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgLTEsIDApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy51cFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRWZWN0b3JcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3J3YXJkVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5mb3J3YXJkVmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSaWdodFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHRWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFVwVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy51cFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVjZW50ZXJYICh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgYXNwZWN0Q29lZmYgPSAodGhpcy5zY3JlZW5IZWlnaHQgLyB0aGlzLnNjcmVlbldpZHRoKSAqIDI7XG5cbiAgICAgICAgcmV0dXJuICh4IC0gKHRoaXMuc2NyZWVuV2lkdGggLyAyKSkgLyBhc3BlY3RDb2VmZiAvIHRoaXMuc2NyZWVuV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2VudGVyWSAoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0oeSAtICh0aGlzLnNjcmVlbkhlaWdodCAvIDIpKSAvIDIgLyB0aGlzLnNjcmVlbkhlaWdodDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBGbG9hdENvbG9yIH0gZnJvbSBcIi4vRmxvYXRDb2xvclwiO1xuXG5leHBvcnQgY2xhc3MgQ29sb3Ige1xuICAgIHByaXZhdGUgcmVkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBncmVlbjogbnVtYmVyO1xuICAgIHByaXZhdGUgYmx1ZTogbnVtYmVyO1xuXG4gICAgcHVibGljIHN0YXRpYyBibGFjayA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgIHB1YmxpYyBzdGF0aWMgd2hpdGUgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKTtcbiAgICBwdWJsaWMgc3RhdGljIGdyYXkgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDEyNywgMTI3LCAxMjcpKTtcbiAgICBwdWJsaWMgc3RhdGljIHJlZCA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAwLCAwKSk7XG4gICAgcHVibGljIHN0YXRpYyBncmVlbiA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMjU1LCAwKSk7XG4gICAgcHVibGljIHN0YXRpYyBibHVlID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAyNTUpKTtcblxuICAgIGNvbnN0cnVjdG9yIChjb2xvcjogUkdCQ29sb3J8RmxvYXRDb2xvcikge1xuICAgICAgICB0aGlzLnJlZCA9IGNvbG9yLnJlZDtcbiAgICAgICAgdGhpcy5ncmVlbiA9IGNvbG9yLmdyZWVuO1xuICAgICAgICB0aGlzLmJsdWUgPSBjb2xvci5ibHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2xvciAoKToge3JlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXJ9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZDogdGhpcy5yZWQsXG4gICAgICAgICAgICBncmVlbjogdGhpcy5ncmVlbixcbiAgICAgICAgICAgIGJsdWU6IHRoaXMuYmx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFkZCAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKyBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiArIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSArIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3Vic3RyYWN0IChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAtIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuIC0gY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlIC0gY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzY2FsZWQgKG11bHRpcGxpZXI6IG51bWJlcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICogbXVsdGlwbGllcixcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICogbXVsdGlwbGllcixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKiBtdWx0aXBsaWVyXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIG11bHRpcGxlIChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAqIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICogY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICogY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaXZpZGUgKHZhbHVlOiBudW1iZXIpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAvIHZhbHVlLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gLyB2YWx1ZSxcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgLyB2YWx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc1JHQkVuY29kZSAoY29sb3I6IG51bWJlcikge1xuICAgICAgICBpZiAoY29sb3IgPD0gMC4wMDMxMzA4KSB7XG4gICAgICAgICAgICByZXR1cm4gMTIuOTIgKiBjb2xvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAxLjA1NSAqIChjb2xvciAqKiAwLjQxNjY2NjcpIC0gMC4wNTU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHRvUkdCIChjb2xvcjogQ29sb3IpOiB7cmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcn0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IucmVkKSAqIDI1NSksXG4gICAgICAgICAgICBncmVlbjogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLmdyZWVuKSAqIDI1NSksXG4gICAgICAgICAgICBibHVlOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IuYmx1ZSkgKiAyNTUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjbGFtcENvbG9yIChjb2xvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID4gMSA/IDEgOiBjb2xvcjtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRmxvYXRDb2xvciB7XG4gICAgcHVibGljIHJlZDogbnVtYmVyO1xuICAgIHB1YmxpYyBncmVlbjogbnVtYmVyO1xuICAgIHB1YmxpYyBibHVlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJlZCA9IHJlZDtcbiAgICAgICAgdGhpcy5ncmVlbiA9IGdyZWVuO1xuICAgICAgICB0aGlzLmJsdWUgPSBibHVlO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUkdCQ29sb3Ige1xuICAgIHB1YmxpYyByZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZ3JlZW46IG51bWJlcjtcbiAgICBwdWJsaWMgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBSR0JDb2xvci50b0Zsb2F0KHJlZCk7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBSR0JDb2xvci50b0Zsb2F0KGdyZWVuKTtcbiAgICAgICAgdGhpcy5ibHVlID0gUkdCQ29sb3IudG9GbG9hdChibHVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyB0b0Zsb2F0IChjb2xvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID09PSAwID8gY29sb3IgOiBjb2xvciAvIDI1NTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RzL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgSW50ZXJzZWN0UG9pbnQge1xuICAgIHByaXZhdGUgaW50ZXJzZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGhpdFBvaW50OiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBub3JtYWw6IFZlY3RvcjtcbiAgICBwcml2YXRlIGRpc3RhbmNlRnJvbU9yaWdpbjogbnVtYmVyO1xuICAgIHByaXZhdGUgb3duZXI6IEFic3RyYWN0T2JqZWN0O1xuXG4gICAgcHVibGljIGdldEludGVyc2VjdCAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdGVkO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIaXRQb2ludCAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0UG9pbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRPd25lciAoKTogQWJzdHJhY3RPYmplY3Qge1xuICAgICAgICByZXR1cm4gdGhpcy5vd25lcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlzdGFuY2VGcm9tT3JpZ2luICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZUZyb21PcmlnaW47XG4gICAgfVxuXG4gICAgcHVibGljIHNldEludGVyc2VjdCAoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRIaXRQb2ludCAoaGl0UG9pbnQ6IFZlY3Rvcik6IHZvaWQge1xuICAgICAgICB0aGlzLmhpdFBvaW50ID0gaGl0UG9pbnRcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Tm9ybWFsIChub3JtYWw6IFZlY3Rvcik6IHZvaWQge1xuICAgICAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0T3duZXIgKG93bmVyOiBBYnN0cmFjdE9iamVjdCk6IHZvaWQge1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgfVxuXG4gICAgcHVibGljIHNldERpc3RhbmNlRnJvbU9yaWdpbiAoZGlzdGFuY2VGcm9tT3JpZ2luOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXN0YW5jZUZyb21PcmlnaW4gPSBkaXN0YW5jZUZyb21PcmlnaW47XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TGlnaHQge1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGYWRlUmFkaXVzICgpOiBudW1iZXI7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvc2l0aW9uICgpOiBWZWN0b3I7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvd2VyICgpOiBudW1iZXI7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFJhZGl1cyAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Tm9ybWFsIChwb2ludDogVmVjdG9yKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWw7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3I7XG4gICAgcHVibGljIGFic3RyYWN0IHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzO1xufVxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgQWJzdHJhY3RMaWdodF8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RMaWdodFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4vLi4vQ29sb3IvQ29sb3JcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuLy4uL01hdGVyaWFsXCIpO1xudmFyIFJHQkNvbG9yXzEgPSByZXF1aXJlKFwiLi8uLi9Db2xvci9SR0JDb2xvclwiKTtcbnZhciBSVE1hdGhfMSA9IHJlcXVpcmUoXCIuLy4uL1JUTWF0aFwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLy4uL1ZlY3RvclwiKTtcbnZhciBTcGhlcmljYWxMaWdodCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwaGVyaWNhbExpZ2h0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNwaGVyaWNhbExpZ2h0KHBvc2l0aW9uLCBwb3dlciwgcmFkaXVzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IDUwO1xuICAgICAgICB0aGlzLmZhZGVSYWRpdXMgPSAyNTAwO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwobmV3IENvbG9yXzEuQ29sb3IobmV3IFJHQkNvbG9yXzEuUkdCQ29sb3IoMjQ0LCAyNDQsIDI0NCkpLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSk7XG4gICAgICAgIHRoaXMuY2VudGVyID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG93ZXIgPSBwb3dlcjtcbiAgICAgICAgaWYgKHJhZGl1cykge1xuICAgICAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldEZhZGVSYWRpdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cyArIHRoaXMuZmFkZVJhZGl1cztcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2VudGVyO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldFBvd2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3dlcjtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRSYWRpdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cztcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRSYW5kb21Qb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHUgPSBNYXRoLnJhbmRvbSgpLCB2ID0gTWF0aC5yYW5kb20oKSwgcSA9IDIgKiBNYXRoLlBJICogdSwgZiA9IE1hdGgucG93KE1hdGguY29zKDIgKiB2IC0gMSksIC0xKTtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3JfMS5WZWN0b3IodGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhxKSAqIE1hdGguc2luKGYpLCB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHEpICogTWF0aC5zaW4oZiksIHRoaXMucmFkaXVzICogTWF0aC5jb3MoZikpO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldEludGVyc2VjdERhdGEgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBrID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMuY2VudGVyKSwgYiA9IFZlY3Rvcl8xLlZlY3Rvci5kb3QoaywgcmF5LmdldERpcmVjdGlvbigpKSwgYyA9IFZlY3Rvcl8xLlZlY3Rvci5kb3QoaywgaykgLSBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMiksIGQgPSBNYXRoLnBvdyhiLCAyKSAtIGMsIHQxLCB0MiwgbWluVCwgbWF4VCwgaW50ZXJzZWN0aW9uUG9pbnQsIGhpdFBvaW50LCBkaXN0YW5jZTtcbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQgPj0gMCkge1xuICAgICAgICAgICAgdDEgPSAtYiArIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIHQyID0gLWIgLSBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICBtaW5UID0gTWF0aC5taW4odDEsIHQyKTtcbiAgICAgICAgICAgIG1heFQgPSBNYXRoLm1heCh0MSwgdDIpO1xuICAgICAgICAgICAgaWYgKG1pblQgPiBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWluVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25Qb2ludCA8IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhpdFBvaW50ID0gVmVjdG9yXzEuVmVjdG9yLmFkZChWZWN0b3JfMS5WZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksIHJheS5nZXRPcmlnaW4oKSk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChoaXRQb2ludCwgcmF5LmdldE9yaWdpbigpKS5nZXRMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoaGl0UG9pbnQpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3Iubm9ybWFsaXplKFZlY3Rvcl8xLlZlY3Rvci5zY2FsZShWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLmNlbnRlciksIDEgLyB0aGlzLnJhZGl1cykpO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5zZXRNYXRlcmlhbCA9IGZ1bmN0aW9uIChtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFNwaGVyaWNhbExpZ2h0O1xufSkoQWJzdHJhY3RMaWdodF8xLkFic3RyYWN0TGlnaHQpO1xuZXhwb3J0cy5TcGhlcmljYWxMaWdodCA9IFNwaGVyaWNhbExpZ2h0O1xuIiwiaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0Fic3RyYWN0TGlnaHRcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLy4uL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi8uLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4vLi4vUlRNYXRoXCJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLy4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgU3BoZXJpY2FsTGlnaHQgZXh0ZW5kcyBBYnN0cmFjdExpZ2h0IHtcbiAgICBwcml2YXRlIGNlbnRlcjogVmVjdG9yO1xuICAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXIgPSA1MDtcbiAgICBwcml2YXRlIHBvd2VyOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmYWRlUmFkaXVzOiBudW1iZXIgPSAyNTAwO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjQ0LCAyNDQsIDI0NCkpLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSk7XG5cbiAgICBjb25zdHJ1Y3RvciAocG9zaXRpb246IFZlY3RvciwgcG93ZXI6IG51bWJlciwgcmFkaXVzPzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5jZW50ZXIgPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5wb3dlciA9IHBvd2VyO1xuXG4gICAgICAgIGlmIChyYWRpdXMpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZhZGVSYWRpdXMgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cyArIHRoaXMuZmFkZVJhZGl1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbnRlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG93ZXIgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvd2VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSYWRpdXMgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFuZG9tUG9pbnQgKCk6IFZlY3RvciB7XG4gICAgICAgIGxldCB1ID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHYgPSBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgcSA9IDIgKiBNYXRoLlBJICogdSxcbiAgICAgICAgICAgIGYgPSBNYXRoLnBvdyhNYXRoLmNvcygyICogdiAtIDEpLCAtMSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHEpICogTWF0aC5zaW4oZiksXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHEpICogTWF0aC5zaW4oZiksXG4gICAgICAgICAgICB0aGlzLnJhZGl1cyAqIE1hdGguY29zKGYpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGsgPSBWZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsIChwb2ludDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgICAgIDEgLyB0aGlzLnJhZGl1c1xuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9SR0JDb2xvclwiO1xuXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuICAgIHByaXZhdGUgY29sb3I6IENvbG9yO1xuICAgIHByaXZhdGUgbGFtYmVydENvZWZmOiBudW1iZXIgPSAwLjU7XG4gICAgcHJpdmF0ZSBwaG9uZ0NvZWZmOiBudW1iZXIgPSAwLjU7XG4gICAgcHJpdmF0ZSByZWZsZWN0aW9uQ29lZmY6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIGNvbG9yOiBDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAwLCAwKSksXG4gICAgICAgIHJlZmxlY3Rpb25Db2VmZjogbnVtYmVyID0gMFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMucmVmbGVjdGlvbkNvZWZmID0gcmVmbGVjdGlvbkNvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2xvciAoKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGFtYmVydENvZWZmKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhbWJlcnRDb2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UGhvbmdDb2VmZigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5waG9uZ0NvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZWZsZWN0aW9uVmFsdWUgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25Db2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TGFtYmVydENvZWZmKGxhbWJlcnRDb2VmZjogbnVtYmVyKTogdGhpcyB7XG4gICAgICAgIHRoaXMubGFtYmVydENvZWZmID0gbGFtYmVydENvZWZmO1xuICAgICAgICB0aGlzLnBob25nQ29lZmYgPSAxIC0gbGFtYmVydENvZWZmO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRQaG9uZ0NvZWZmKHBob25nQ29lZmY6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLnBob25nQ29lZmYgPSBwaG9uZ0NvZWZmO1xuICAgICAgICB0aGlzLmxhbWJlcnRDb2VmZiA9IDEgLSBwaG9uZ0NvZWZmO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RPYmplY3Qge1xuICAgIGFic3RyYWN0IGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55O1xuICAgIGFic3RyYWN0IGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbDtcbiAgICBhYnN0cmFjdCBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcztcbn1cbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4uL1ZlY3RvclwiKTtcbnZhciBQbGFuZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBsYW5lLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBsYW5lKG5vcm1hbCwgcG9pbnQpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucG9pbnQgPSBuZXcgVmVjdG9yXzEuVmVjdG9yKDAsIDAsIDApO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwoQ29sb3JfMS5Db2xvci5ncmF5LCAwKTtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgIGlmIChwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5wb2ludCA9IHBvaW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIFBsYW5lLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UsIGhpdFBvaW50LCB0ID0gVmVjdG9yXzEuVmVjdG9yLmRvdChWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMucG9pbnQsIHJheS5nZXRPcmlnaW4oKSksIHRoaXMubm9ybWFsKSAvXG4gICAgICAgICAgICBWZWN0b3JfMS5WZWN0b3IuZG90KHJheS5nZXREaXJlY3Rpb24oKSwgdGhpcy5nZXROb3JtYWwoKSk7XG4gICAgICAgIGlmICh0IDw9IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKHJheS5nZXRPcmlnaW4oKSwgVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgdCkpO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IHRoaXMuZ2V0Tm9ybWFsKCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFBsYW5lLnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBQbGFuZS5wcm90b3R5cGUuZ2V0Tm9ybWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWw7XG4gICAgfTtcbiAgICBQbGFuZS5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBQbGFuZTtcbn0pKEFic3RyYWN0T2JqZWN0XzEuQWJzdHJhY3RPYmplY3QpO1xuZXhwb3J0cy5QbGFuZSA9IFBsYW5lO1xuIiwiaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgUGxhbmUgZXh0ZW5kcyBBYnN0cmFjdE9iamVjdCB7XG4gICAgcHJpdmF0ZSBub3JtYWw6IFZlY3RvcjtcbiAgICBwcml2YXRlIHBvaW50OiBWZWN0b3IgPSBuZXcgVmVjdG9yKDAsIDAsIDApO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKENvbG9yLmdyYXksIDApO1xuXG4gICAgY29uc3RydWN0b3IgKG5vcm1hbDogVmVjdG9yLCBwb2ludD86IFZlY3Rvcikge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblxuICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIHQ6IG51bWJlciA9XG4gICAgICAgICAgICBWZWN0b3IuZG90KFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIHJheS5nZXRPcmlnaW4oKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdGhpcy5ub3JtYWxcbiAgICAgICAgICAgICkgL1xuICAgICAgICAgICAgVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgdGhpcy5nZXROb3JtYWwoKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBpZiAodCA8PSBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpLFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgIHJheS5nZXREaXJlY3Rpb24oKSxcbiAgICAgICAgICAgICAgICB0XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbCgpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi4vVmVjdG9yXCIpO1xudmFyIFNwaGVyZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwaGVyZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmUoY2VudGVyLCByYWRpdXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxfMS5NYXRlcmlhbChDb2xvcl8xLkNvbG9yLnJlZCwgMCk7XG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICB9XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgayA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBoaXRQb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLCByYXkuZ2V0T3JpZ2luKCkpO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IHRoaXMuZ2V0Tm9ybWFsKGhpdFBvaW50KSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3Iuc2NhbGUoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmU7XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuU3BoZXJlID0gU3BoZXJlO1xuIiwiaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgU3BoZXJlIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgY2VudGVyOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByYWRpdXM6IG51bWJlcjtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChDb2xvci5yZWQsIDApO1xuXG4gICAgY29uc3RydWN0b3IgKGNlbnRlcjogVmVjdG9yLCByYWRpdXM6IG51bWJlcikge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGsgPSBWZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IG1vZHVsZSBSVE1hdGgge1xuICAgIGV4cG9ydCBjb25zdCBFUFNJTE9OID0gMC4wMDE7XG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBSYXkge1xuICAgIHByaXZhdGUgb3JpZ2luOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246ICBWZWN0b3I7XG4gICAgcHJpdmF0ZSBpdGVyYXRpb246IG51bWJlciA9IDU7XG5cbiAgICBjb25zdHJ1Y3RvciAob3JpZ2luOiBWZWN0b3IsIGRpcmVjdGlvbjogVmVjdG9yLCBpdGVyYXRpb24/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZShkaXJlY3Rpb24pO1xuXG4gICAgICAgIGlmIChpdGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uID0gaXRlcmF0aW9uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9yaWdpbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlcmF0aW9uICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldEhpdFBvaW50IChkaXN0YW5jZTogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5hZGQodGhpcy5vcmlnaW4sIFZlY3Rvci5zY2FsZSh0aGlzLmRpcmVjdGlvbiwgZGlzdGFuY2UpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SXRlcmF0aW9uIChpdGVyYXRpb246IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLml0ZXJhdGlvbiA9IGl0ZXJhdGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9DYW1lcmFcIjtcbmltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvQWJzdHJhY3RMaWdodFwiO1xuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuICAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmE7XG4gICAgcHJpdmF0ZSBvYmplY3RzOiBhbnlbXSA9IFtdO1xuICAgIHByaXZhdGUgbGlnaHRzOiBBYnN0cmFjdExpZ2h0W10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yIChvYmplY3RzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5vYmplY3RzID0gb2JqZWN0cy5vYmplY3RzO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IG9iamVjdHMuY2FtZXJhO1xuICAgICAgICB0aGlzLmxpZ2h0cyA9IG9iamVjdHMubGlnaHRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRPYmplY3QgKG9iamVjdDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENhbWVyYSAoKTogQ2FtZXJhIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FtZXJhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMaWdodHMgKCk6IEFic3RyYWN0TGlnaHRbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZ2h0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T2JqZWN0cyAoKTogYW55W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPVwidHJ1ZVwiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJsaWIvbGliLndlYndvcmtlci5kLnRzXCIgLz5cblxuaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL09iamVjdHMvQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0UG9pbnQgfSBmcm9tIFwiLi9JbnRlcnNlY3RQb2ludFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi9PYmplY3RzL1BsYW5lXCI7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vT2JqZWN0cy9Qb2x5Z29uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuL1JUTWF0aFwiO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xuaW1wb3J0IHsgU3BoZXJlIH0gZnJvbSBcIi4vT2JqZWN0cy9TcGhlcmVcIjtcbmltcG9ydCB7IFNwaGVyaWNhbExpZ2h0IH0gZnJvbSBcIi4vTGlnaHRzL1NwaGVyaWNhbExpZ2h0XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuY2xhc3MgVHJhY2VyIHtcbiAgICBwcml2YXRlIGJ1ZmZlcjogQ29sb3JbXSA9IFtdO1xuICAgIHByaXZhdGUgc2NlbmU6IFNjZW5lO1xuICAgIHByaXZhdGUgc2NyZWVuV2lkdGg6IG51bWJlciA9IDI1MDtcbiAgICBwcml2YXRlIHNjcmVlbkhlaWdodDogbnVtYmVyID0gMjUwO1xuXG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NyZWVuV2lkdGggKiB0aGlzLnNjcmVlbkhlaWdodCAqIDM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChDb2xvci5ibGFjayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNvc2luZVNhbXBsZUhlbWlzcGhlcmUgKG5vcm1hbDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgbGV0IHUgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBsZXQgdiA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgIGxldCByID0gTWF0aC5zcXJ0KHUpO1xuICAgICAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIHY7XG5cbiAgICAgICAgbGV0IHNkaXIsXG4gICAgICAgICAgICB0ZGlyO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhub3JtYWwuZ2V0Q29vcmRpbmF0ZXMoKVsneCddKSA8IDAuNSkge1xuICAgICAgICAgICAgc2RpciA9IFZlY3Rvci5jcm9zcyhub3JtYWwsIG5ldyBWZWN0b3IoMSwwLDApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNkaXIgPSBWZWN0b3IuY3Jvc3Mobm9ybWFsLCBuZXcgVmVjdG9yKDAsMSwwKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZGlyID0gVmVjdG9yLmNyb3NzKG5vcm1hbCwgc2Rpcik7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUobm9ybWFsLCAgTWF0aC5zcXJ0KDEgLSB1KSksXG4gICAgICAgICAgICBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZShzZGlyLCByICogTWF0aC5jb3MoYW5nbGUpKSxcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUodGRpciwgciAqIE1hdGguc2luKGFuZ2xlKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvbG9yIChyYXk6IFJheSk6IENvbG9yIHtcbiAgICAgICAgbGV0IGludGVyc2VjdGlvbiA9IHRoaXMudHJhY2UocmF5KSxcbiAgICAgICAgICAgIGRpZmZ1c2VDb2xvcjogQ29sb3IgPSBDb2xvci5ibGFjayxcbiAgICAgICAgICAgIHJlZmxlY3RDb2xvcjogQ29sb3IgPSBDb2xvci5ibGFjayxcbiAgICAgICAgICAgIHJheUl0ZXJhdGlvbjogbnVtYmVyID0gcmF5LmdldEl0ZXJhdGlvbigpO1xuXG4gICAgICAgIHJheS5zZXRJdGVyYXRpb24oLS1yYXlJdGVyYXRpb24pO1xuXG4gICAgICAgIGlmIChyYXlJdGVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBDb2xvci5ibGFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaW50ZXJzZWN0aW9uLmdldEludGVyc2VjdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29sb3IuYmxhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBkaWZmdXNlQ29sb3IgPSB0aGlzLmdldERpZmZ1c2VDb2xvcihyYXksIGludGVyc2VjdGlvbik7XG4gICAgICAgIHJlZmxlY3RDb2xvciA9IHRoaXMuZ2V0UmVmbGVjdGlvbkNvbG9yKHJheSwgaW50ZXJzZWN0aW9uKTtcblxuICAgICAgICByZXR1cm4gZGlmZnVzZUNvbG9yLmFkZChyZWZsZWN0Q29sb3IpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RGlmZnVzZUNvbG9yIChyYXk6IFJheSwgaW50ZXJzZWN0OiBhbnksIHJlY3Vyc2l2ZTogYm9vbGVhbiA9IHRydWUpOiBDb2xvciB7XG4gICAgICAgIGxldCBsYW1iQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcGhvbmdDb2xvcjogQ29sb3IsXG4gICAgICAgICAgICByYWRpYW5jZUNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHBpeGVsQ29sb3I6IENvbG9yID0gQ29sb3IuYmxhY2ssXG4gICAgICAgICAgICByYWRpYW5jZVJhbmRvbURpcmVjdGlvbjogVmVjdG9yLFxuICAgICAgICAgICAgbGlnaHREaXJlY3Rpb246IFZlY3RvcixcbiAgICAgICAgICAgIGxpZ2h0UG93ZXI6IG51bWJlcixcbiAgICAgICAgICAgIHJlZmxlY3RQaG9uZ1ZlY3RvckRpcjogVmVjdG9yLFxuICAgICAgICAgICAgbGFtYkNvczogbnVtYmVyLFxuICAgICAgICAgICAgcGhvbmdDb3M6IG51bWJlcixcbiAgICAgICAgICAgIHBob25nOiBudW1iZXI7XG5cbiAgICAgICAgZm9yIChsZXQgbGlnaHQgb2YgdGhpcy5zY2VuZS5nZXRMaWdodHMoKSkge1xuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5nZXRPd25lcigpIGluc3RhbmNlb2YgQWJzdHJhY3RMaWdodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3QuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGlnaHRQb3dlciA9IHRoaXMuZ2V0TGlnaHRQb3dlcihpbnRlcnNlY3QsIGxpZ2h0KTtcblxuICAgICAgICAgICAgbGFtYkNvbG9yID0gQ29sb3IuYmxhY2s7XG4gICAgICAgICAgICBwaG9uZ0NvbG9yID0gQ29sb3IuYmxhY2s7XG4gICAgICAgICAgICByYWRpYW5jZUNvbG9yID0gQ29sb3IuYmxhY2s7XG5cbiAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZShcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cblxuXG4gICAgICAgICAgICAvL2dpXG4gICAgICAgICAgICBsZXQgcmFkaWFuY2VJblJhbmRvbURpcmVjdGlvbjogQ29sb3I7XG5cbiAgICAgICAgICAgIHJhZGlhbmNlUmFuZG9tRGlyZWN0aW9uID0gdGhpcy5jb3NpbmVTYW1wbGVIZW1pc3BoZXJlKFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRPd25lcigpLmdldE5vcm1hbChpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJhZGlhbmNlSW5SYW5kb21EaXJlY3Rpb24gPSB0aGlzLmdldENvbG9yKFxuICAgICAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgICAgICByYWRpYW5jZVJhbmRvbURpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmF5LmdldEl0ZXJhdGlvbigpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmFkaWFuY2VDb2xvciA9IHJhZGlhbmNlQ29sb3JcbiAgICAgICAgICAgICAgICAuYWRkKHJhZGlhbmNlSW5SYW5kb21EaXJlY3Rpb24pO1xuXG5cblxuICAgICAgICAgICAgLy8gbGFtYmVydFxuXG4gICAgICAgICAgICBsYW1iQ29zID0gLVZlY3Rvci5kb3QoXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldE5vcm1hbCgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsYW1iQ29sb3IgPSBsYW1iQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgIGludGVyc2VjdFxuICAgICAgICAgICAgICAgICAgICAuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFBvd2VyICogbGFtYkNvcyAqIGludGVyc2VjdC5nZXRPd25lcigpLmdldE1hdGVyaWFsKCkuZ2V0TGFtYmVydENvZWZmKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZChyYWRpYW5jZUNvbG9yLmRpdmlkZShNYXRoLlBJKSlcblxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG5cblxuICAgICAgICAgICAgLy8gcGhvbmdcblxuICAgICAgICAgICAgcmVmbGVjdFBob25nVmVjdG9yRGlyID0gVmVjdG9yLnJlZmxlY3QoXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldE5vcm1hbCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcGhvbmdDb3MgPSAtVmVjdG9yLmRvdChyZWZsZWN0UGhvbmdWZWN0b3JEaXIsIHJheS5nZXREaXJlY3Rpb24oKSk7XG5cbiAgICAgICAgICAgIGlmIChwaG9uZ0NvcyA+IDApIHtcbiAgICAgICAgICAgICAgICBwaG9uZyA9IE1hdGgucG93KHBob25nQ29zLCAzNSk7XG4gICAgICAgICAgICAgICAgcGhvbmdDb2xvciA9IHBob25nQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIHBob25nICogaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0TWF0ZXJpYWwoKS5nZXRQaG9uZ0NvZWZmKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vYW1iaWVudCBvY2NsdXNpb25cbiAgICAgICAgICAgIC8qbGV0IGMgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW9TYW1wbGVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyID0gdGhpcy5jb3NpbmVTYW1wbGVIZW1pc3BoZXJlKGludGVyc2VjdC5nZXRPd25lcigpLmdldE5vcm1hbChpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSkpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGFvSW50ZXJzZWN0ID0gdGhpcy50cmFjZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFhb0ludGVyc2VjdC5nZXRJbnRlcnNlY3QoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYW9JbnRlcnNlY3QuZ2V0RGlzdGFuY2VGcm9tT3JpZ2luKCkgPiAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYysrO1xuICAgICAgICAgICAgfSovXG5cbiAgICAgICAgICAgIC8qcGl4ZWxDb2xvciA9IHBpeGVsQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgIGxhbWJDb2xvci5tdWx0aXBsZShDb2xvci53aGl0ZS5zY2FsZWQoMSAtIChjICogMC42NyAvIHRoaXMuYW9TYW1wbGVzKSkpLmFkZChwaG9uZ0NvbG9yKVxuICAgICAgICAgICAgKTsqL1xuXG4gICAgICAgICAgICBwaXhlbENvbG9yID0gcGl4ZWxDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgbGFtYkNvbG9yLmFkZChwaG9uZ0NvbG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwaXhlbENvbG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UmVmbGVjdGlvbkNvbG9yIChyYXk6IFJheSwgaW50ZXJzZWN0OiBhbnkpOiBhbnkge1xuICAgICAgICBsZXQgcmVmbGVjdGlvbkNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJlZmxlY3Rpb25WYWx1ZTogbnVtYmVyID0gaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0TWF0ZXJpYWwoKS5nZXRSZWZsZWN0aW9uVmFsdWUoKSxcbiAgICAgICAgICAgIHJlZmxlY3RlZFJheTogVmVjdG9yO1xuXG4gICAgICAgIGlmIChyZWZsZWN0aW9uVmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBDb2xvci5ibGFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZmxlY3RlZFJheSA9IFZlY3Rvci5yZWZsZWN0KFxuICAgICAgICAgICAgcmF5LmdldERpcmVjdGlvbigpLFxuICAgICAgICAgICAgaW50ZXJzZWN0LmdldE5vcm1hbCgpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmVmbGVjdGlvbkNvbG9yID0gdGhpcy5nZXRDb2xvcihcbiAgICAgICAgICAgIG5ldyBSYXkoaW50ZXJzZWN0LmdldEhpdFBvaW50KCksIHJlZmxlY3RlZFJheSwgcmF5LmdldEl0ZXJhdGlvbigpKVxuICAgICAgICApLnNjYWxlZChyZWZsZWN0aW9uVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiByZWZsZWN0aW9uQ29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQZXJzcGVjdGl2ZVZlY3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGNhbWVyYTogQ2FtZXJhID0gdGhpcy5zY2VuZS5nZXRDYW1lcmEoKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZShcbiAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgY2FtZXJhLmdldEZvcndhcmRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0UmlnaHRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclgoeClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLmdldFVwVmVjdG9yKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEucmVjZW50ZXJZKHkpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMaWdodFBvd2VyIChpbnRlcnNlY3Q6IGFueSwgbGlnaHQ6IEFic3RyYWN0TGlnaHQpOiBudW1iZXIge1xuICAgICAgICBsZXQgbGlnaHRQb3dlciA9IGxpZ2h0LmdldFBvd2VyKCksXG4gICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBzaGFkb3dSYXk6IEludGVyc2VjdFBvaW50LFxuICAgICAgICAgICAgcmVzdWx0UG93ZXI6IG51bWJlciA9IDA7XG5cbiAgICAgICAgLypsaWdodFJhbmRvbVBvaW50ID0gbGlnaHQuZ2V0UmFuZG9tUG9pbnQoKTtcblxuICAgICAgICBzaGFkb3dSYXkgPSB0aGlzLnRyYWNlKFxuICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSxcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hhZG93UmF5LmdldEludGVyc2VjdCgpICYmXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0T3duZXIoKSBpbnN0YW5jZW9mIEFic3RyYWN0TGlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXN1bHRQb3dlciArPSAoXG4gICAgICAgICAgICAgICAgbGlnaHRQb3dlciAtXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKVxuICAgICAgICAgICAgICAgICAgICApLmdldExlbmd0aCgpICogKGxpZ2h0UG93ZXIgLyBsaWdodC5nZXRGYWRlUmFkaXVzKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSovXG5cblxuICAgICAgICBsaWdodFJhbmRvbVBvaW50ID0gdGhpcy5jb3NpbmVTYW1wbGVIZW1pc3BoZXJlKFxuICAgICAgICAgICAgaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0Tm9ybWFsKGludGVyc2VjdC5nZXRIaXRQb2ludCgpKVxuICAgICAgICApO1xuXG4gICAgICAgIHNoYWRvd1JheSA9IHRoaXMudHJhY2UoXG4gICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0SW50ZXJzZWN0KCkgJiZcbiAgICAgICAgICAgIHNoYWRvd1JheS5nZXRPd25lcigpIGluc3RhbmNlb2YgQWJzdHJhY3RMaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3VsdFBvd2VyICs9IChcbiAgICAgICAgICAgICAgICBsaWdodFBvd2VyIC1cbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0LmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRSYW5kb21Qb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpXG4gICAgICAgICAgICAgICAgICAgICkuZ2V0TGVuZ3RoKCkgKiAobGlnaHRQb3dlciAvIGxpZ2h0LmdldEZhZGVSYWRpdXMoKSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdFBvd2VyO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhY2UgKHJheTogUmF5KTogSW50ZXJzZWN0UG9pbnQge1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW9uID0gbmV3IEludGVyc2VjdFBvaW50KCksXG4gICAgICAgICAgICBpbnRlcnNlY3REYXRhOiBhbnksXG4gICAgICAgICAgICBtaW5EaXN0YW5jZTogbnVtYmVyID0gSW5maW5pdHksXG4gICAgICAgICAgICBzY2VuZU9iamVjdHM6IEFic3RyYWN0T2JqZWN0W10mQWJzdHJhY3RMaWdodFtdID0gdGhpcy5zY2VuZS5nZXRPYmplY3RzKCkuY29uY2F0KHRoaXMuc2NlbmUuZ2V0TGlnaHRzKCkpO1xuXG4gICAgICAgIGZvciAobGV0IG9iamVjdCBvZiBzY2VuZU9iamVjdHMpIHtcbiAgICAgICAgICAgIGludGVyc2VjdERhdGEgPSBvYmplY3QuZ2V0SW50ZXJzZWN0RGF0YShyYXkpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0RGF0YSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10gPCBtaW5EaXN0YW5jZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddO1xuXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldEludGVyc2VjdCgpO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXRIaXRQb2ludChpbnRlcnNlY3REYXRhWydoaXRQb2ludCddKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0Tm9ybWFsKGludGVyc2VjdERhdGFbJ25vcm1hbCddKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0RGlzdGFuY2VGcm9tT3JpZ2luKGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXRPd25lcihvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyIChzY3JlZW5XaWR0aDogbnVtYmVyLCBzY3JlZW5IZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCByYW5kb011bHRpcGxpZXIgPSAwLjU7XG5cbiAgICAgICAgbGV0IGJ1ZmZlcjogbnVtYmVyW10sXG4gICAgICAgICAgICBjb2xvcjogQ29sb3IsXG4gICAgICAgICAgICByYW5kOiBudW1iZXIsXG4gICAgICAgICAgICByYXk6IFJheTtcblxuICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gc2NyZWVuV2lkdGg7XG4gICAgICAgIHRoaXMuc2NyZWVuSGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBidWZmZXIgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaXRlcmF0aW9uID0gMDsgaXRlcmF0aW9uIDwgMTsgaXRlcmF0aW9uKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuc2NyZWVuSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnNjcmVlbldpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgKz0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgLT0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmF5ID0gbmV3IFJheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQZXJzcGVjdGl2ZVZlY3Rvcih4ICsgcmFuZCwgeSArIHJhbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXSA9IENvbG9yLmJsYWNrLmFkZCh0aGlzLmdldENvbG9yKHJheSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgaW4gdGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldW2NvbXBvbmVudF0gPSBDb2xvci5zUkdCRW5jb2RlKHRoaXMuYnVmZmVyW2ldW2NvbXBvbmVudF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaCh0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydyZWQnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaCh0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydncmVlbiddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ2JsdWUnXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yKGxldCAgaSA9IDA7IGkgPCB0aGlzLmJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ3JlZCddID0gMC4wO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ2dyZWVuJ10gPSAwLjA7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsnYmx1ZSddID0gMC4wO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0U2NlbmUgKHNjZW5lOiBTY2VuZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgfVxufVxuXG5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBkYXRhID0gbWVzc2FnZS5kYXRhO1xuXG4gICAgaWYgKHR5cGVvZihkYXRhKSA9PSAnc3RyaW5nJykge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZSgnWycrZGF0YSsnXScpO1xuICAgIH1cblxuICAgIGxldCB0cmFjZXIgPSBuZXcgVHJhY2VyKCk7XG5cbiAgICB0cmFjZXIuc2V0U2NlbmUoXG4gICAgICAgIG5ldyBTY2VuZSh7XG4gICAgICAgICAgICBjYW1lcmE6IG5ldyBDYW1lcmEoXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwLCAtNjk5KSxcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDAsIDEpLFxuICAgICAgICAgICAgICAgIGRhdGFbMF0sXG4gICAgICAgICAgICAgICAgZGF0YVsxXVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGxpZ2h0czogW1xuICAgICAgICAgICAgICAgIG5ldyBTcGhlcmljYWxMaWdodChuZXcgVmVjdG9yICgwLCA2MDAsIDApLCAxLCAxMDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUpKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJpY2FsTGlnaHQobmV3IFZlY3RvciAoMCwgMCwgMCksIDAuNiwgMTUwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAyMzUsIDIwMCkpKSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBvYmplY3RzOiBbXG4gICAgICAgICAgICAgICAgbmV3IFBsYW5lKG5ldyBWZWN0b3IoMCwgMSwgMCksIG5ldyBWZWN0b3IgKDAsIC03MDAsIDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLjc1ICogMjU1LCAwLjc1ICogMjU1LCAwLjc1ICogMjU1KSksIDApKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAtMSwgMCksIG5ldyBWZWN0b3IgKDAsIDcwMCwgMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUpKSwgMCkpLFxuICAgICAgICAgICAgICAgIG5ldyBQbGFuZShuZXcgVmVjdG9yKC0xLCAwLCAwKSwgbmV3IFZlY3RvciAoNzAwLCAwLCAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMC4yNSAqIDI1NSwgMC4yNSAqIDI1NSwgMC43NSAqIDI1NSkpLCAwKSksXG4gICAgICAgICAgICAgICAgbmV3IFBsYW5lKG5ldyBWZWN0b3IoMSwgMCwgMCksIG5ldyBWZWN0b3IgKC03MDAsIDAsIDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLjc1ICogMjU1LCAwLjI1ICogMjU1LCAwLjI1ICogMjU1KSksIDApKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAwLCAtMSksIG5ldyBWZWN0b3IgKDAsIDAsIDcwMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUsIDAuNzUgKiAyNTUpKSwgMCkpLFxuICAgICAgICAgICAgICAgIG5ldyBQbGFuZShuZXcgVmVjdG9yKDAsIDAsIDEpLCBuZXcgVmVjdG9yICgwLCAwLCAtNzAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmJsYWNrLCAwKSksXG4gICAgICAgICAgICAgICAgLy8gYm90dG9tIHBsYW5lXG4gICAgICAgICAgICAgICAgLypuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUsIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gZnJvbnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci53aGl0ZSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyB0b3AgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci53aGl0ZSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL3JpZ2h0IHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuYmx1ZSkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL2xlZnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IucmVkLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIC03MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuYmxhY2ssIDApLnNldExhbWJlcnRDb2VmZigxKSksKi9cbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJlKG5ldyBWZWN0b3IoLTI1MCwgLTUwMCwgNDUwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmJsYWNrLCAxKSksXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyZShuZXcgVmVjdG9yKDI1MCwgLTUwMCwgNDAwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmdyZWVuLCAwKSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgdHJhY2VyLnJlbmRlcihkYXRhWzBdLCBkYXRhWzFdKTtcbn07IiwiZXhwb3J0IGNsYXNzIFZlY3RvciB7XG4gICAgcHJpdmF0ZSB4OiBudW1iZXI7XG4gICAgcHJpdmF0ZSB5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSB6OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnogPSB6O1xuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGVzICgpOiB7eDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcn0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55LFxuICAgICAgICAgICAgejogdGhpcy56XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGFzQXJyYXkgKCk6IG51bWJlcltdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHRoaXMueCxcbiAgICAgICAgICAgIHRoaXMueSxcbiAgICAgICAgICAgIHRoaXMuelxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMZW5ndGggKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICoqIDIgKyB0aGlzLnkgKiogMiArIHRoaXMueiAqKiAyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlICh2ZWN0b3I6IFZlY3RvciwgbXVsdGlwbGllcjogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yLnggKiBtdWx0aXBsaWVyLCB2ZWN0b3IueSAqIG11bHRpcGxpZXIsIHZlY3Rvci56ICogbXVsdGlwbGllcik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhZGQgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54ICsgdmVjdG9yMi54LCB2ZWN0b3IxLnkgKyB2ZWN0b3IyLnksIHZlY3RvcjEueiArIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdWJzdHJhY3QgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54IC0gdmVjdG9yMi54LCB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnksIHZlY3RvcjEueiAtIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBkb3QgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHZlY3RvcjEueCAqIHZlY3RvcjIueCArIHZlY3RvcjEueSAqIHZlY3RvcjIueSArIHZlY3RvcjEueiAqIHZlY3RvcjIuejtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyb3NzICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdmVjdG9yMS55ICogdmVjdG9yMi56IC0gdmVjdG9yMS56ICogdmVjdG9yMi55LFxuICAgICAgICAgICAgdmVjdG9yMS56ICogdmVjdG9yMi54IC0gdmVjdG9yMS54ICogdmVjdG9yMi56LFxuICAgICAgICAgICAgdmVjdG9yMS54ICogdmVjdG9yMi55IC0gdmVjdG9yMS55ICogdmVjdG9yMi54XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBub3JtYWxpemUgKHZlY3RvcjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zY2FsZSh2ZWN0b3IsIDEgLyB2ZWN0b3IuZ2V0TGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcG93ICh2ZWN0b3I6IFZlY3RvciwgdmFsdWU6IG51bWJlcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdmVjdG9yLnkgKiogdmFsdWUsXG4gICAgICAgICAgICB2ZWN0b3IueiAqKiB2YWx1ZSxcbiAgICAgICAgICAgIHZlY3Rvci54ICoqIHZhbHVlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbnZlcnNlICh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iuc2NhbGUodmVjdG9yLCAtMSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZWZsZWN0ICh2ZWN0b3I6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgZiA9IDIgKiBWZWN0b3IuZG90KHZlY3Rvciwgbm9ybWFsKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIHZlY3RvcixcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShub3JtYWwsIGYpXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19
