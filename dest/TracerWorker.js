(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalize(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalize(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":16}],2:[function(require,module,exports){
var RGBColor_1=require("./RGBColor"),FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o.black=new o(new RGBColor_1.RGBColor(0,0,0)),o.white=new o(new RGBColor_1.RGBColor(255,255,255)),o.gray=new o(new RGBColor_1.RGBColor(127,127,127)),o.red=new o(new RGBColor_1.RGBColor(255,0,0)),o.green=new o(new RGBColor_1.RGBColor(0,255,0)),o.blue=new o(new RGBColor_1.RGBColor(0,0,255)),o}();exports.Color=Color;


},{"./FloatColor":3,"./RGBColor":4}],3:[function(require,module,exports){
var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
var RGBColor=function(){function o(t,r,n){this.red=o.toFloat(t),this.green=o.toFloat(r),this.blue=o.toFloat(n)}return o.toFloat=function(o){return 0===o?o:o/255},o}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
var IntersectPoint=function(){function t(){this.intersected=!1}return t.prototype.getIntersect=function(){return this.intersected},t.prototype.getHitPoint=function(){return this.hitPoint},t.prototype.getNormal=function(){return this.normal},t.prototype.getOwner=function(){return this.owner},t.prototype.getDistanceFromOrigin=function(){return this.distanceFromOrigin},t.prototype.setIntersect=function(){this.intersected=!0},t.prototype.setHitPoint=function(t){this.hitPoint=t},t.prototype.setNormal=function(t){this.normal=t},t.prototype.setOwner=function(t){this.owner=t},t.prototype.setDistanceFromOrigin=function(t){this.distanceFromOrigin=t},t}();exports.IntersectPoint=IntersectPoint;


},{}],6:[function(require,module,exports){
var AbstractLight=function(){function t(){}return t}();exports.AbstractLight=AbstractLight;


},{}],7:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},AbstractLight_1=require("./AbstractLight"),Color_1=require("./../Color/Color"),Material_1=require("./../Material"),RGBColor_1=require("./../Color/RGBColor"),RTMath_1=require("./../RTMath"),Vector_1=require("./../Vector"),SphericalLight=function(t){function r(r,e,o){t.call(this),this.radius=50,this.fadeRadius=2500,this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(244,244,244)),0).setLambertCoeff(1),this.center=r,this.power=e,o&&(this.radius=o)}return __extends(r,t),r.prototype.getFadeRadius=function(){return this.radius+this.fadeRadius},r.prototype.getPosition=function(){return this.center},r.prototype.getPower=function(){return this.power},r.prototype.getRadius=function(){return this.radius},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getIntersectData=function(t){var r,e,o,i,a,n,s,c=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(c,t.getDirection()),u=Vector_1.Vector.dot(c,c)-Math.pow(this.radius,2),p=Math.pow(h,2)-u;if(!(h>0||0>p||p>=0&&(r=-h+Math.sqrt(p),e=-h-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return n=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),a),t.getOrigin()),s=Vector_1.Vector.substract(n,t.getOrigin()).getLength(),{hitPoint:n,normal:this.getNormal(n),distance:s}},r.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},r.prototype.getMaterial=function(){return this.material},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractLight_1.AbstractLight);exports.SphericalLight=SphericalLight;


},{"./../Color/Color":2,"./../Color/RGBColor":4,"./../Material":8,"./../RTMath":12,"./../Vector":16,"./AbstractLight":6}],8:[function(require,module,exports){
var Color_1=require("./Color/Color"),RGBColor_1=require("./Color/RGBColor"),Material=function(){function o(o,t){void 0===o&&(o=new Color_1.Color(new RGBColor_1.RGBColor(255,0,0))),void 0===t&&(t=0),this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,this.color=o,this.reflectionCoeff=t}return o.prototype.getColor=function(){return this.color},o.prototype.getLambertCoeff=function(){return this.lambertCoeff},o.prototype.getPhongCoeff=function(){return this.phongCoeff},o.prototype.getReflectionValue=function(){return this.reflectionCoeff},o.prototype.setLambertCoeff=function(o){return this.lambertCoeff=o,this.phongCoeff=1-o,this},o.prototype.setPhongCoeff=function(o){return this.phongCoeff=o,this.lambertCoeff=1-o,this},o}();exports.Material=Material;


},{"./Color/Color":2,"./Color/RGBColor":4}],9:[function(require,module,exports){
var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],10:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Polygon=function(t){function r(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];t.call(this),this.material=new Material_1.Material(Color_1.Color.gray,0),this.vertices=r}return __extends(r,t),r.prototype.getIntersectData=function(t){var e,o,c,i,s,a=this.getNormal();if(o=Vector_1.Vector.dot(this.vertices[0],a),s=Vector_1.Vector.dot(a,t.getDirection()),i=-Vector_1.Vector.dot(a,t.getOrigin())+o,e=i/s,!(e<RTMath_1.RTMath.EPSILON)){c=t.getHitPoint(e);for(var n=0,h=this.vertices.length;h>n;n++){var l=this.vertices[n],u=void 0;if(u=n===h-1?this.vertices[0]:this.vertices[n+1],!r.checkSameClockDir(Vector_1.Vector.substract(u,l),Vector_1.Vector.substract(c,l),this.getNormal()))return}return{hitPoint:c,normal:a,distance:e}}},r.prototype.getMaterial=function(){return this.material},r.prototype.getNormal=function(){var t=Vector_1.Vector.substract(this.vertices[2],this.vertices[0]),r=Vector_1.Vector.substract(this.vertices[1],this.vertices[0]);return Vector_1.Vector.normalize(Vector_1.Vector.cross(t,r))},r.prototype.setMaterial=function(t){return this.material=t,this},r.checkSameClockDir=function(t,r,e){var o=Vector_1.Vector.cross(r,t);return Vector_1.Vector.dot(o,e)>=0},r}(AbstractObject_1.AbstractObject);exports.Polygon=Polygon;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],11:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Sphere=function(t){function e(e,r){t.call(this),this.material=new Material_1.Material(Color_1.Color.red,0),this.center=e,this.radius=r}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o,a,i,c,n,s=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(s,t.getDirection()),u=Vector_1.Vector.dot(s,s)-Math.pow(this.radius,2),_=Math.pow(h,2)-u;if(!(h>0||0>_||_>=0&&(e=-h+Math.sqrt(_),r=-h-Math.sqrt(_),o=Math.min(e,r),a=Math.max(e,r),i=o>RTMath_1.RTMath.EPSILON?o:a,i<RTMath_1.RTMath.EPSILON)))return c=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),i),t.getOrigin()),n=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{hitPoint:c,normal:this.getNormal(c),distance:n}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],12:[function(require,module,exports){
var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],13:[function(require,module,exports){
var Vector_1=require("./Vector"),Ray=function(){function t(t,i,r){this.iteration=5,this.origin=t,this.direction=Vector_1.Vector.normalize(i),r&&(this.iteration=r)}return t.prototype.getOrigin=function(){return this.origin},t.prototype.getDirection=function(){return this.direction},t.prototype.getIteration=function(){return this.iteration},t.prototype.getHitPoint=function(t){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scale(this.direction,t))},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":16}],14:[function(require,module,exports){
var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],15:[function(require,module,exports){
var AbstractLight_1=require("./Lights/AbstractLight"),Camera_1=require("./Camera"),Color_1=require("./Color/Color"),IntersectPoint_1=require("./IntersectPoint"),Material_1=require("./Material"),Polygon_1=require("./Objects/Polygon"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),SphericalLight_1=require("./Lights/SphericalLight"),Vector_1=require("./Vector"),Tracer=function(){function e(){this.screenWidth=250,this.screenHeight=250}return e.prototype.cosineSampleHemisphere=function(e){var t,r,o=Math.random(),a=Math.random(),c=Math.sqrt(o),n=2*Math.PI*a;return t=Math.abs(e.getCoordinates().x)<.5?Vector_1.Vector.cross(e,new Vector_1.Vector(1,0,0)):Vector_1.Vector.cross(e,new Vector_1.Vector(0,1,0)),r=Vector_1.Vector.cross(e,t),Vector_1.Vector.add(Vector_1.Vector.scale(e,Math.sqrt(1-o)),Vector_1.Vector.add(Vector_1.Vector.scale(t,c*Math.cos(n)),Vector_1.Vector.scale(r,c*Math.sin(n))))},e.prototype.getColor=function(e){var t=this.trace(e),r=Color_1.Color.black,o=Color_1.Color.black,a=e.getIteration();return e.setIteration(--a),0===a?Color_1.Color.black:t.getIntersect()?(r=this.getDiffuseColor(e,t),o=this.getReflectionColor(e,t),r.add(o)):Color_1.Color.black},e.prototype.getDiffuseColor=function(e,t,r){void 0===r&&(r=!0);for(var o,a,c,n,i,l,s,g,V,_,h=Color_1.Color.black,w=0,C=this.scene.getLights();w<C.length;w++){var d=C[w];if(t.getOwner()instanceof AbstractLight_1.AbstractLight)return t.getOwner().getMaterial().getColor();l=this.getLightPower(t,d),o=Color_1.Color.black,a=Color_1.Color.black,c=Color_1.Color.black,i=Vector_1.Vector.normalize(Vector_1.Vector.substract(t.getHitPoint(),d.getPosition()));var M=void 0;n=this.cosineSampleHemisphere(t.getOwner().getNormal(t.getHitPoint())),M=this.getColor(new Ray_1.Ray(t.getHitPoint(),n,e.getIteration())),c=c.add(M),g=-Vector_1.Vector.dot(i,t.getNormal()),o=o.add(t.getOwner().getMaterial().getColor().add(c).multiple(d.getMaterial().getColor().scaled(l*g*t.getOwner().getMaterial().getLambertCoeff()))),s=Vector_1.Vector.reflect(i,t.getNormal()),V=-Vector_1.Vector.dot(s,e.getDirection()),V>0&&(_=Math.pow(V,35),a=a.add(t.getOwner().getMaterial().getColor().multiple(d.getMaterial().getColor().scaled(l*_*t.getOwner().getMaterial().getPhongCoeff())))),h=h.add(o.add(a))}return h},e.prototype.getReflectionColor=function(e,t){var r,o,a=t.getOwner().getMaterial().getReflectionValue();return 0===a?Color_1.Color.black:(o=Vector_1.Vector.reflect(e.getDirection(),t.getNormal()),r=this.getColor(new Ray_1.Ray(t.getHitPoint(),o,e.getIteration())).scaled(a))},e.prototype.getPerspectiveVector=function(e,t){var r=this.scene.getCamera();return Vector_1.Vector.normalize(Vector_1.Vector.add(r.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scale(r.getRightVector(),r.recenterX(e)),Vector_1.Vector.scale(r.getUpVector(),r.recenterY(t)))))},e.prototype.getLightPower=function(e,t){var r,o,a=t.getPower(),c=0;return r=t.getRandomPoint(),o=this.trace(new Ray_1.Ray(e.getHitPoint(),Vector_1.Vector.substract(Vector_1.Vector.substract(t.getPosition(),r),e.getHitPoint()))),o.getIntersect()&&o.getOwner()instanceof AbstractLight_1.AbstractLight&&(c+=a-Vector_1.Vector.substract(Vector_1.Vector.substract(t.getPosition(),r),e.getHitPoint()).getLength()*(a/t.getFadeRadius())),c},e.prototype.trace=function(e){for(var t,r=new IntersectPoint_1.IntersectPoint,o=1/0,a=this.scene.getObjects().concat(this.scene.getLights()),c=0,n=a;c<n.length;c++){var i=n[c];t=i.getIntersectData(e),t&&t.distance<o&&(o=t.distance,r.setIntersect(),r.setHitPoint(t.hitPoint),r.setNormal(t.normal),r.setDistanceFromOrigin(t.distance),r.setOwner(i))}return r},e.prototype.render=function(e,t){var r,o,a,c,n=.5;for(this.screenWidth=e,this.screenHeight=t;;){r=[];for(var i=0;i<this.screenHeight;i++)for(var l=0;l<this.screenWidth;l++){a=0,Math.random()>.5?a+=Math.random()*n:a-=Math.random()*n,c=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(l+a,i+a)),o=Color_1.Color.black.add(this.getColor(c));for(var s in o)o[s]=Color_1.Color.sRGBEncode(o[s]);r.push(o.red),r.push(o.green),r.push(o.blue)}self.postMessage(r)}},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse("["+t+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),t[0],t[1]),lights:[new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,600,0),.6,100).setMaterial(new Material_1.Material(Color_1.Color.white)),new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,0,0),.6,150).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,235,200))))],objects:[new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(-700,-700,700)).setMaterial(new Material_1.Material(Color_1.Color.white,0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(-700,700,700)).setMaterial(new Material_1.Material(Color_1.Color.white,0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(700,700,-700),new Vector_1.Vector(-700,700,-700)).setMaterial(new Material_1.Material(Color_1.Color.white,0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,700,-700),new Vector_1.Vector(700,700,700)).setMaterial(new Material_1.Material(Color_1.Color.blue).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(-700,700,700),new Vector_1.Vector(-700,700,-700)).setMaterial(new Material_1.Material(Color_1.Color.red,0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(700,700,-700)).setMaterial(new Material_1.Material(Color_1.Color.black,0).setLambertCoeff(1)),new Sphere_1.Sphere(new Vector_1.Vector(-250,-500,450),200).setMaterial(new Material_1.Material(Color_1.Color.black,1)),new Sphere_1.Sphere(new Vector_1.Vector(250,-500,400),200).setMaterial(new Material_1.Material(Color_1.Color.green,0))]})),r.render(t[0],t[1])};


},{"./Camera":1,"./Color/Color":2,"./Color/RGBColor":4,"./IntersectPoint":5,"./Lights/AbstractLight":6,"./Lights/SphericalLight":7,"./Material":8,"./Objects/Polygon":10,"./Objects/Sphere":11,"./Ray":13,"./Scene":14,"./Vector":16}],16:[function(require,module,exports){
var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.scale=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.normalize=function(n){return t.scale(n,1/n.getLength())},t.pow=function(n,r){return new t(Math.pow(n.y,r),Math.pow(n.z,r),Math.pow(n.x,r))},t.inverse=function(n){return t.scale(n,-1)},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scale(r,e))},t}();exports.Vector=Vector;


},{}]},{},[15])(15)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvc291cmNlL0NhbWVyYS50cyIsIi9zb3VyY2UvQ29sb3IvQ29sb3IudHMiLCIvc291cmNlL0NvbG9yL0Zsb2F0Q29sb3IudHMiLCIvc291cmNlL0NvbG9yL1JHQkNvbG9yLnRzIiwiL3NvdXJjZS9JbnRlcnNlY3RQb2ludC50cyIsIi9zb3VyY2UvTGlnaHRzL0Fic3RyYWN0TGlnaHQudHMiLCIvc291cmNlL0xpZ2h0cy9TcGhlcmljYWxMaWdodC5qcyIsIi9zb3VyY2UvTGlnaHRzL1NwaGVyaWNhbExpZ2h0LnRzIiwiL3NvdXJjZS9NYXRlcmlhbC50cyIsIi9zb3VyY2UvT2JqZWN0cy9BYnN0cmFjdE9iamVjdC50cyIsIi9zb3VyY2UvT2JqZWN0cy9Qb2x5Z29uLmpzIiwiL3NvdXJjZS9PYmplY3RzL1BvbHlnb24udHMiLCIvc291cmNlL09iamVjdHMvU3BoZXJlLmpzIiwiL3NvdXJjZS9PYmplY3RzL1NwaGVyZS50cyIsIi9zb3VyY2UvUlRNYXRoLnRzIiwiL3NvdXJjZS9SYXkudHMiLCIvc291cmNlL1NjZW5lLnRzIiwiL3NvdXJjZS9UcmFjZXJXb3JrZXIudHMiLCIvc291cmNlL1ZlY3Rvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLEdBQUEsVUFBQSxRQUF1QixZQUV2QixPQUFBLFdBU0ksUUFBQSxHQUFhLEVBQWtCLEVBQW1CLEVBQXFCLEdBQ25FLEtBQUssU0FBVyxFQUNoQixLQUFLLFVBQVksU0FBQSxPQUFPLFVBQVUsR0FDbEMsS0FBSyxZQUFjLEVBQ25CLEtBQUssYUFBZSxFQUVwQixLQUFLLGNBQWdCLFNBQUEsT0FBTyxVQUFVLFNBQUEsT0FBTyxVQUFVLEtBQUssVUFBVyxLQUFLLFdBQzVFLEtBQUssWUFBYyxTQUFBLE9BQU8sTUFDdEIsU0FBQSxPQUFPLFVBQ0gsU0FBQSxPQUFPLE1BQ0gsS0FBSyxj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LEVBQUEsVUFBZCxTQUF5QixFQUFpQixHQUN0QyxNQUFPLElBQUksR0FBTyxFQUFRLEVBQUksRUFBUSxFQUFHLEVBQVEsRUFBSSxFQUFRLEVBQUcsRUFBUSxFQUFJLEVBQVEsSUFHMUUsRUFBQSxJQUFkLFNBQW1CLEVBQWlCLEdBQ2hDLE1BQU8sR0FBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEdBR2pFLEVBQUEsTUFBZCxTQUFxQixFQUFpQixHQUNsQyxNQUFPLElBQUksR0FDUCxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQzVDLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsRUFDNUMsRUFBUSxFQUFJLEVBQVEsRUFBSSxFQUFRLEVBQUksRUFBUSxJQUl0QyxFQUFBLFVBQWQsU0FBeUIsR0FDckIsTUFBTyxHQUFPLE1BQU0sRUFBUSxFQUFJLEVBQU8sY0FHN0IsRUFBQSxJQUFkLFNBQW1CLEVBQWdCLEdBQy9CLE1BQU8sSUFBSSxHQUNQLEtBQUEsSUFBQSxFQUFPLEVBQUssR0FDWixLQUFBLElBQUEsRUFBTyxFQUFLLEdBQ1osS0FBQSxJQUFBLEVBQU8sRUFBSyxLQUlOLEVBQUEsUUFBZCxTQUF1QixHQUNuQixNQUFPLEdBQU8sTUFBTSxFQUFRLEtBR2xCLEVBQUEsUUFBZCxTQUF1QixFQUFnQixHQUNuQyxHQUFJLEdBQUksRUFBSSxFQUFPLElBQUksRUFBUSxFQUUvQixPQUFPLEdBQU8sVUFDVixFQUNBLEVBQU8sTUFBTSxFQUFRLEtBR2pDLElBL0VhLFNBQUEsT0FBTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBmb3J3YXJkVmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByaWdodFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgdXBWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChwb3NpdGlvbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3Rvciwgc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemUoZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IgPSBWZWN0b3Iubm9ybWFsaXplKFZlY3Rvci5zdWJzdHJhY3QodGhpcy5kaXJlY3Rpb24sIHRoaXMucG9zaXRpb24pKTtcbiAgICAgICAgdGhpcy5yaWdodFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgLTEsIDApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy51cFZlY3RvciA9IFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRWZWN0b3JcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3J3YXJkVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5mb3J3YXJkVmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSaWdodFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHRWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFVwVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy51cFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVjZW50ZXJYICh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgYXNwZWN0Q29lZmYgPSAodGhpcy5zY3JlZW5IZWlnaHQgLyB0aGlzLnNjcmVlbldpZHRoKSAqIDI7XG5cbiAgICAgICAgcmV0dXJuICh4IC0gKHRoaXMuc2NyZWVuV2lkdGggLyAyKSkgLyBhc3BlY3RDb2VmZiAvIHRoaXMuc2NyZWVuV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2VudGVyWSAoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0oeSAtICh0aGlzLnNjcmVlbkhlaWdodCAvIDIpKSAvIDIgLyB0aGlzLnNjcmVlbkhlaWdodDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBGbG9hdENvbG9yIH0gZnJvbSBcIi4vRmxvYXRDb2xvclwiO1xuXG5leHBvcnQgY2xhc3MgQ29sb3Ige1xuICAgIHJlZDogbnVtYmVyO1xuICAgIGdyZWVuOiBudW1iZXI7XG4gICAgYmx1ZTogbnVtYmVyO1xuXG4gICAgcHVibGljIHN0YXRpYyBibGFjayA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgIHB1YmxpYyBzdGF0aWMgd2hpdGUgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKTtcbiAgICBwdWJsaWMgc3RhdGljIGdyYXkgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDEyNywgMTI3LCAxMjcpKTtcbiAgICBwdWJsaWMgc3RhdGljIHJlZCA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAwLCAwKSk7XG4gICAgcHVibGljIHN0YXRpYyBncmVlbiA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMjU1LCAwKSk7XG4gICAgcHVibGljIHN0YXRpYyBibHVlID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAyNTUpKTtcblxuICAgIGNvbnN0cnVjdG9yIChjb2xvcjogUkdCQ29sb3J8RmxvYXRDb2xvcikge1xuICAgICAgICB0aGlzLnJlZCA9IGNvbG9yLnJlZDtcbiAgICAgICAgdGhpcy5ncmVlbiA9IGNvbG9yLmdyZWVuO1xuICAgICAgICB0aGlzLmJsdWUgPSBjb2xvci5ibHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICsgY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKyBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKyBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1YnN0cmFjdCAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgLSBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAtIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAtIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2NhbGVkIChtdWx0aXBsaWVyOiBudW1iZXIpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAqIG11bHRpcGxpZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAqIG11bHRpcGxpZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICogbXVsdGlwbGllclxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBtdWx0aXBsZSAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKiBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAqIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAqIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGl2aWRlICh2YWx1ZTogbnVtYmVyKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgLyB2YWx1ZSxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuIC8gdmFsdWUsXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlIC8gdmFsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNSR0JFbmNvZGUgKGNvbG9yOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKGNvbG9yIDw9IDAuMDAzMTMwOCkge1xuICAgICAgICAgICAgcmV0dXJuIDEyLjkyICogY29sb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMS4wNTUgKiAoY29sb3IgKiogMC40MTY2NjY3KSAtIDAuMDU1O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0b1JHQiAoY29sb3I6IENvbG9yKToge3JlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXJ9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZDogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLnJlZCkgKiAyNTUpLFxuICAgICAgICAgICAgZ3JlZW46IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5ncmVlbikgKiAyNTUpLFxuICAgICAgICAgICAgYmx1ZTogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLmJsdWUpICogMjU1KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2xhbXBDb2xvciAoY29sb3I6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb2xvciA+IDEgPyAxIDogY29sb3I7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEZsb2F0Q29sb3Ige1xuICAgIHB1YmxpYyByZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZ3JlZW46IG51bWJlcjtcbiAgICBwdWJsaWMgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yZWQgPSByZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gYmx1ZTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFJHQkNvbG9yIHtcbiAgICBwdWJsaWMgcmVkOiBudW1iZXI7XG4gICAgcHVibGljIGdyZWVuOiBudW1iZXI7XG4gICAgcHVibGljIGJsdWU6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucmVkID0gUkdCQ29sb3IudG9GbG9hdChyZWQpO1xuICAgICAgICB0aGlzLmdyZWVuID0gUkdCQ29sb3IudG9GbG9hdChncmVlbik7XG4gICAgICAgIHRoaXMuYmx1ZSA9IFJHQkNvbG9yLnRvRmxvYXQoYmx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdG9GbG9hdCAoY29sb3I6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb2xvciA9PT0gMCA/IGNvbG9yIDogY29sb3IgLyAyNTU7XG4gICAgfVxufSIsImltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0cy9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIEludGVyc2VjdFBvaW50IHtcbiAgICBwcml2YXRlIGludGVyc2VjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBoaXRQb2ludDogVmVjdG9yO1xuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBkaXN0YW5jZUZyb21PcmlnaW46IG51bWJlcjtcbiAgICBwcml2YXRlIG93bmVyOiBBYnN0cmFjdE9iamVjdDtcblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3QgKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGl0UG9pbnQgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpdFBvaW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T3duZXIgKCk6IEFic3RyYWN0T2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpc3RhbmNlRnJvbU9yaWdpbiAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRJbnRlcnNlY3QgKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmludGVyc2VjdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SGl0UG9pbnQgKGhpdFBvaW50OiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oaXRQb2ludCA9IGhpdFBvaW50XG4gICAgfVxuXG4gICAgcHVibGljIHNldE5vcm1hbCAobm9ybWFsOiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE93bmVyIChvd25lcjogQWJzdHJhY3RPYmplY3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXREaXN0YW5jZUZyb21PcmlnaW4gKGRpc3RhbmNlRnJvbU9yaWdpbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luID0gZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdExpZ2h0IHtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0RmFkZVJhZGl1cyAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb3NpdGlvbiAoKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb3dlciAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRSYWRpdXMgKCk6IG51bWJlcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnk7XG4gICAgcHVibGljIGFic3RyYWN0IGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRSYW5kb21Qb2ludCAoKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcztcbn1cbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFic3RyYWN0TGlnaHRfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0TGlnaHRcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLy4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi8uLi9NYXRlcmlhbFwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIik7XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi8uLi9SVE1hdGhcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi8uLi9WZWN0b3JcIik7XG52YXIgU3BoZXJpY2FsTGlnaHQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGhlcmljYWxMaWdodCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmljYWxMaWdodChwb3NpdGlvbiwgcG93ZXIsIHJhZGl1cykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSA1MDtcbiAgICAgICAgdGhpcy5mYWRlUmFkaXVzID0gMjUwMDtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDI0NCwgMjQ0LCAyNDQpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpO1xuICAgICAgICB0aGlzLmNlbnRlciA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBvd2VyID0gcG93ZXI7XG4gICAgICAgIGlmIChyYWRpdXMpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRGYWRlUmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMgKyB0aGlzLmZhZGVSYWRpdXM7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbnRlcjtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRQb3dlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG93ZXI7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UmFuZG9tUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1ID0gTWF0aC5yYW5kb20oKSwgdiA9IE1hdGgucmFuZG9tKCksIHEgPSAyICogTWF0aC5QSSAqIHUsIGYgPSBNYXRoLnBvdyhNYXRoLmNvcygyICogdiAtIDEpLCAtMSk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yXzEuVmVjdG9yKHRoaXMucmFkaXVzICogTWF0aC5jb3MocSkgKiBNYXRoLnNpbihmKSwgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihxKSAqIE1hdGguc2luKGYpLCB0aGlzLnJhZGl1cyAqIE1hdGguY29zKGYpKTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgayA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBoaXRQb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLCByYXkuZ2V0T3JpZ2luKCkpO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IHRoaXMuZ2V0Tm9ybWFsKGhpdFBvaW50KSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3Iuc2NhbGUoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmljYWxMaWdodDtcbn0pKEFic3RyYWN0TGlnaHRfMS5BYnN0cmFjdExpZ2h0KTtcbmV4cG9ydHMuU3BoZXJpY2FsTGlnaHQgPSBTcGhlcmljYWxMaWdodDtcbiIsImltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLy4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLy4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi8uLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLy4uL1JUTWF0aFwiXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi8uLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFNwaGVyaWNhbExpZ2h0IGV4dGVuZHMgQWJzdHJhY3RMaWdodCB7XG4gICAgcHJpdmF0ZSBjZW50ZXI6IFZlY3RvcjtcbiAgICBwcml2YXRlIHJhZGl1czogbnVtYmVyID0gNTA7XG4gICAgcHJpdmF0ZSBwb3dlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgZmFkZVJhZGl1czogbnVtYmVyID0gMjUwMDtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI0NCwgMjQ0LCAyNDQpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpO1xuXG4gICAgY29uc3RydWN0b3IgKHBvc2l0aW9uOiBWZWN0b3IsIHBvd2VyOiBudW1iZXIsIHJhZGl1cz86IG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY2VudGVyID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG93ZXIgPSBwb3dlcjtcblxuICAgICAgICBpZiAocmFkaXVzKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGYWRlUmFkaXVzICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMgKyB0aGlzLmZhZGVSYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvc2l0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvd2VyICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3dlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFkaXVzICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgdSA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICB2ID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHEgPSAyICogTWF0aC5QSSAqIHUsXG4gICAgICAgICAgICBmID0gTWF0aC5wb3coTWF0aC5jb3MoMiAqIHYgLSAxKSwgLTEpO1xuXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhmKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBrID0gVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgIGI6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgcmF5LmdldERpcmVjdGlvbigpKSxcbiAgICAgICAgICAgIGM6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgaykgLSB0aGlzLnJhZGl1cyAqKiAyLFxuICAgICAgICAgICAgZDogbnVtYmVyID0gYiAqKiAyIC0gYyxcbiAgICAgICAgICAgIHQxOiBudW1iZXIsXG4gICAgICAgICAgICB0MjogbnVtYmVyLFxuICAgICAgICAgICAgbWluVDogbnVtYmVyLFxuICAgICAgICAgICAgbWF4VDogbnVtYmVyLFxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQ6IG51bWJlcixcbiAgICAgICAgICAgIGhpdFBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBkaXN0YW5jZTogbnVtYmVyO1xuXG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPj0gMCkge1xuICAgICAgICAgICAgdDEgPSAtYiArIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIHQyID0gLWIgLSBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICBtaW5UID0gTWF0aC5taW4odDEsIHQyKTtcbiAgICAgICAgICAgIG1heFQgPSBNYXRoLm1heCh0MSwgdDIpO1xuXG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25Qb2ludCA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoaGl0UG9pbnQpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIHtcbiAgICBwcml2YXRlIGNvbG9yOiBDb2xvcjtcbiAgICBwcml2YXRlIGxhbWJlcnRDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcGhvbmdDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcmVmbGVjdGlvbkNvZWZmOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBjb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMCwgMCkpLFxuICAgICAgICByZWZsZWN0aW9uQ29lZmY6IG51bWJlciA9IDBcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25Db2VmZiA9IHJlZmxlY3Rpb25Db2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sb3IgKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldExhbWJlcnRDb2VmZigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5sYW1iZXJ0Q29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBob25nQ29lZmYoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGhvbmdDb2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVmbGVjdGlvblZhbHVlICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIHNldExhbWJlcnRDb2VmZihsYW1iZXJ0Q29lZmY6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLmxhbWJlcnRDb2VmZiA9IGxhbWJlcnRDb2VmZjtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gMSAtIGxhbWJlcnRDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UGhvbmdDb2VmZihwaG9uZ0NvZWZmOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gcGhvbmdDb2VmZjtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSAxIC0gcGhvbmdDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59IiwiaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBhYnN0cmFjdCBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueTtcbiAgICBhYnN0cmFjdCBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWw7XG4gICAgYWJzdHJhY3Qgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXM7XG59XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBSVE1hdGhfMSA9IHJlcXVpcmUoXCIuLi9SVE1hdGhcIik7XG52YXIgQWJzdHJhY3RPYmplY3RfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0T2JqZWN0XCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi4vQ29sb3IvQ29sb3JcIik7XG52YXIgTWF0ZXJpYWxfMSA9IHJlcXVpcmUoXCIuLi9NYXRlcmlhbFwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9WZWN0b3JcIik7XG52YXIgUG9seWdvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9seWdvbigpIHtcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2ZXJ0aWNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKENvbG9yXzEuQ29sb3IuZ3JheSwgMCk7XG4gICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICB9XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0RGF0YSA9IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgdmFyIGRpc3RhbmNlLCBkaXN0YW5jZUZyb21BeGlzQ2VudGVyLCBoaXRQb2ludCwgbm9ybWFsID0gdGhpcy5nZXROb3JtYWwoKSwgbnVtZXJhdG9yLCBkZW5vbWluYXRvcjtcbiAgICAgICAgZGlzdGFuY2VGcm9tQXhpc0NlbnRlciA9IFZlY3Rvcl8xLlZlY3Rvci5kb3QodGhpcy52ZXJ0aWNlc1swXSwgbm9ybWFsKTtcbiAgICAgICAgZGVub21pbmF0b3IgPSBWZWN0b3JfMS5WZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgbnVtZXJhdG9yID0gLVZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0T3JpZ2luKCkpICsgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjtcbiAgICAgICAgZGlzdGFuY2UgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IHJheS5nZXRIaXRQb2ludChkaXN0YW5jZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZlcnRleDEgPSB0aGlzLnZlcnRpY2VzW2ldLCB2ZXJ0ZXgyID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGkgPT09IHZlcnRpY2VzTGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodmVydGV4MiwgdmVydGV4MSksIFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHZlcnRleDEpLCB0aGlzLmdldE5vcm1hbCgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiBub3JtYWwsXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkZ2UxID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSwgZWRnZTIgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3IuY3Jvc3MoZWRnZTEsIGVkZ2UyKSk7XG4gICAgfTtcbiAgICBQb2x5Z29uLnByb3RvdHlwZS5zZXRNYXRlcmlhbCA9IGZ1bmN0aW9uIChtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9seWdvbi5jaGVja1NhbWVDbG9ja0RpciA9IGZ1bmN0aW9uICh2ZWN0b3IxLCB2ZWN0b3IyLCBub3JtYWwpIHtcbiAgICAgICAgdmFyIG5vcm1hbFYxVjIgPSBWZWN0b3JfMS5WZWN0b3IuY3Jvc3ModmVjdG9yMiwgdmVjdG9yMSk7XG4gICAgICAgIHJldHVybiBWZWN0b3JfMS5WZWN0b3IuZG90KG5vcm1hbFYxVjIsIG5vcm1hbCkgPj0gMDtcbiAgICB9O1xuICAgIHJldHVybiBQb2x5Z29uO1xufSkoQWJzdHJhY3RPYmplY3RfMS5BYnN0cmFjdE9iamVjdCk7XG5leHBvcnRzLlBvbHlnb24gPSBQb2x5Z29uO1xuIiwiaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgUG9seWdvbiBleHRlbmRzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBwcml2YXRlIHZlcnRpY2VzOiBWZWN0b3JbXTtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChDb2xvci5ncmF5LCAwKTtcblxuICAgIGNvbnN0cnVjdG9yICguLi52ZXJ0aWNlczogVmVjdG9yW10pIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTogbnVtYmVyLFxuICAgICAgICAgICAgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yID0gdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIG51bWVyYXRvcjogbnVtYmVyLFxuICAgICAgICAgICAgZGVub21pbmF0b3I6IG51bWJlcjtcblxuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuXG4gICAgICAgIGRlbm9taW5hdG9yID0gVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXREaXJlY3Rpb24oKSk7XG4gICAgICAgIG51bWVyYXRvciA9IC1WZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldE9yaWdpbigpKSArIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXI7XG5cbiAgICAgICAgZGlzdGFuY2UgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaGl0UG9pbnQgPSByYXkuZ2V0SGl0UG9pbnQoZGlzdGFuY2UpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZlcnRleDE6IFZlY3RvciA9IHRoaXMudmVydGljZXNbaV0sXG4gICAgICAgICAgICAgICAgdmVydGV4MjogVmVjdG9yO1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gdmVydGljZXNMZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHZlcnRleDIsIHZlcnRleDEpLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCB2ZXJ0ZXgxKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXROb3JtYWwoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IG5vcm1hbCxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsICgpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgZWRnZTE6IFZlY3RvciA9IFZlY3Rvci5zdWJzdHJhY3QodGhpcy52ZXJ0aWNlc1syXSwgdGhpcy52ZXJ0aWNlc1swXSksXG4gICAgICAgICAgICBlZGdlMjogVmVjdG9yID0gVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzFdLCB0aGlzLnZlcnRpY2VzWzBdKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3IuY3Jvc3MoZWRnZTEsIGVkZ2UyKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNoZWNrU2FtZUNsb2NrRGlyICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IG5vcm1hbFYxVjI6IFZlY3RvciA9IFZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLmRvdChub3JtYWxWMVYyLCBub3JtYWwpID49IDA7XG4gICAgfVxufVxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi4vVmVjdG9yXCIpO1xudmFyIFNwaGVyZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwaGVyZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmUoY2VudGVyLCByYWRpdXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxfMS5NYXRlcmlhbChDb2xvcl8xLkNvbG9yLnJlZCwgMCk7XG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICB9XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgayA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBoaXRQb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLCByYXkuZ2V0T3JpZ2luKCkpO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IHRoaXMuZ2V0Tm9ybWFsKGhpdFBvaW50KSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3Iuc2NhbGUoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmU7XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuU3BoZXJlID0gU3BoZXJlO1xuIiwiaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgU3BoZXJlIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgY2VudGVyOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByYWRpdXM6IG51bWJlcjtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChDb2xvci5yZWQsIDApO1xuXG4gICAgY29uc3RydWN0b3IgKGNlbnRlcjogVmVjdG9yLCByYWRpdXM6IG51bWJlcikge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGsgPSBWZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgaGl0UG9pbnQsXG4gICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgKS5nZXRMZW5ndGgoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXMge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IG1vZHVsZSBSVE1hdGgge1xuICAgIGV4cG9ydCBjb25zdCBFUFNJTE9OID0gMC4wMDE7XG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBSYXkge1xuICAgIHByaXZhdGUgb3JpZ2luOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246ICBWZWN0b3I7XG4gICAgcHJpdmF0ZSBpdGVyYXRpb246IG51bWJlciA9IDU7XG5cbiAgICBjb25zdHJ1Y3RvciAob3JpZ2luOiBWZWN0b3IsIGRpcmVjdGlvbjogVmVjdG9yLCBpdGVyYXRpb24/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gVmVjdG9yLm5vcm1hbGl6ZShkaXJlY3Rpb24pO1xuXG4gICAgICAgIGlmIChpdGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uID0gaXRlcmF0aW9uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9yaWdpbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlcmF0aW9uICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldEhpdFBvaW50IChkaXN0YW5jZTogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5hZGQodGhpcy5vcmlnaW4sIFZlY3Rvci5zY2FsZSh0aGlzLmRpcmVjdGlvbiwgZGlzdGFuY2UpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SXRlcmF0aW9uIChpdGVyYXRpb246IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLml0ZXJhdGlvbiA9IGl0ZXJhdGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9DYW1lcmFcIjtcbmltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvQWJzdHJhY3RMaWdodFwiO1xuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuICAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmE7XG4gICAgcHJpdmF0ZSBvYmplY3RzOiBhbnlbXSA9IFtdO1xuICAgIHByaXZhdGUgbGlnaHRzOiBBYnN0cmFjdExpZ2h0W10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yIChvYmplY3RzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5vYmplY3RzID0gb2JqZWN0cy5vYmplY3RzO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IG9iamVjdHMuY2FtZXJhO1xuICAgICAgICB0aGlzLmxpZ2h0cyA9IG9iamVjdHMubGlnaHRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRPYmplY3QgKG9iamVjdDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENhbWVyYSAoKTogQ2FtZXJhIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FtZXJhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMaWdodHMgKCk6IEFic3RyYWN0TGlnaHRbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZ2h0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T2JqZWN0cyAoKTogYW55W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPVwidHJ1ZVwiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJsaWIvbGliLndlYndvcmtlci5kLnRzXCIgLz5cblxuaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL09iamVjdHMvQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0UG9pbnQgfSBmcm9tIFwiLi9JbnRlcnNlY3RQb2ludFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi9PYmplY3RzL1BsYW5lXCI7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vT2JqZWN0cy9Qb2x5Z29uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuL1JUTWF0aFwiO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xuaW1wb3J0IHsgU3BoZXJlIH0gZnJvbSBcIi4vT2JqZWN0cy9TcGhlcmVcIjtcbmltcG9ydCB7IFNwaGVyaWNhbExpZ2h0IH0gZnJvbSBcIi4vTGlnaHRzL1NwaGVyaWNhbExpZ2h0XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuY2xhc3MgVHJhY2VyIHtcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXIgPSAyNTA7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlciA9IDI1MDtcblxuICAgIHByaXZhdGUgY29zaW5lU2FtcGxlSGVtaXNwaGVyZSAobm9ybWFsOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgdSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgIGxldCB2ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgbGV0IHIgPSBNYXRoLnNxcnQodSk7XG4gICAgICAgIGxldCBhbmdsZSA9IDIgKiBNYXRoLlBJICogdjtcblxuICAgICAgICBsZXQgc2RpcixcbiAgICAgICAgICAgIHRkaXI7XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKG5vcm1hbC5nZXRDb29yZGluYXRlcygpWyd4J10pIDwgMC41KSB7XG4gICAgICAgICAgICBzZGlyID0gVmVjdG9yLmNyb3NzKG5vcm1hbCwgbmV3IFZlY3RvcigxLDAsMCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2RpciA9IFZlY3Rvci5jcm9zcyhub3JtYWwsIG5ldyBWZWN0b3IoMCwxLDApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRkaXIgPSBWZWN0b3IuY3Jvc3Mobm9ybWFsLCBzZGlyKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLmFkZChcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShub3JtYWwsICBNYXRoLnNxcnQoMSAtIHUpKSxcbiAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKHNkaXIsIHIgKiBNYXRoLmNvcyhhbmdsZSkpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZSh0ZGlyLCByICogTWF0aC5zaW4oYW5nbGUpKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29sb3IgKHJheTogUmF5KTogQ29sb3Ige1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW9uID0gdGhpcy50cmFjZShyYXkpLFxuICAgICAgICAgICAgZGlmZnVzZUNvbG9yOiBDb2xvciA9IENvbG9yLmJsYWNrLFxuICAgICAgICAgICAgcmVmbGVjdENvbG9yOiBDb2xvciA9IENvbG9yLmJsYWNrLFxuICAgICAgICAgICAgcmF5SXRlcmF0aW9uOiBudW1iZXIgPSByYXkuZ2V0SXRlcmF0aW9uKCk7XG5cbiAgICAgICAgcmF5LnNldEl0ZXJhdGlvbigtLXJheUl0ZXJhdGlvbik7XG5cbiAgICAgICAgaWYgKHJheUl0ZXJhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpbnRlcnNlY3Rpb24uZ2V0SW50ZXJzZWN0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBDb2xvci5ibGFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIGRpZmZ1c2VDb2xvciA9IHRoaXMuZ2V0RGlmZnVzZUNvbG9yKHJheSwgaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgcmVmbGVjdENvbG9yID0gdGhpcy5nZXRSZWZsZWN0aW9uQ29sb3IocmF5LCBpbnRlcnNlY3Rpb24pO1xuXG4gICAgICAgIHJldHVybiBkaWZmdXNlQ29sb3IuYWRkKHJlZmxlY3RDb2xvcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREaWZmdXNlQ29sb3IgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSwgcmVjdXJzaXZlOiBib29sZWFuID0gdHJ1ZSk6IENvbG9yIHtcbiAgICAgICAgbGV0IGxhbWJDb2xvcjogQ29sb3IsXG4gICAgICAgICAgICBwaG9uZ0NvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJhZGlhbmNlQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcGl4ZWxDb2xvcjogQ29sb3IgPSBDb2xvci5ibGFjayxcbiAgICAgICAgICAgIHJhZGlhbmNlUmFuZG9tRGlyZWN0aW9uOiBWZWN0b3IsXG4gICAgICAgICAgICBsaWdodERpcmVjdGlvbjogVmVjdG9yLFxuICAgICAgICAgICAgbGlnaHRQb3dlcjogbnVtYmVyLFxuICAgICAgICAgICAgcmVmbGVjdFBob25nVmVjdG9yRGlyOiBWZWN0b3IsXG4gICAgICAgICAgICBsYW1iQ29zOiBudW1iZXIsXG4gICAgICAgICAgICBwaG9uZ0NvczogbnVtYmVyLFxuICAgICAgICAgICAgcGhvbmc6IG51bWJlcjtcblxuICAgICAgICBmb3IgKGxldCBsaWdodCBvZiB0aGlzLnNjZW5lLmdldExpZ2h0cygpKSB7XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0LmdldE93bmVyKCkgaW5zdGFuY2VvZiBBYnN0cmFjdExpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2VjdC5nZXRPd25lcigpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaWdodFBvd2VyID0gdGhpcy5nZXRMaWdodFBvd2VyKGludGVyc2VjdCwgbGlnaHQpO1xuXG4gICAgICAgICAgICBsYW1iQ29sb3IgPSBDb2xvci5ibGFjaztcbiAgICAgICAgICAgIHBob25nQ29sb3IgPSBDb2xvci5ibGFjaztcbiAgICAgICAgICAgIHJhZGlhbmNlQ29sb3IgPSBDb2xvci5ibGFjaztcblxuICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24gPSBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuXG5cbiAgICAgICAgICAgIC8vZ2lcbiAgICAgICAgICAgIGxldCByYWRpYW5jZUluUmFuZG9tRGlyZWN0aW9uOiBDb2xvcjtcblxuICAgICAgICAgICAgcmFkaWFuY2VSYW5kb21EaXJlY3Rpb24gPSB0aGlzLmNvc2luZVNhbXBsZUhlbWlzcGhlcmUoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0Tm9ybWFsKGludGVyc2VjdC5nZXRIaXRQb2ludCgpKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmFkaWFuY2VJblJhbmRvbURpcmVjdGlvbiA9IHRoaXMuZ2V0Q29sb3IoXG4gICAgICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgICAgIHJhZGlhbmNlUmFuZG9tRGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICByYXkuZ2V0SXRlcmF0aW9uKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByYWRpYW5jZUNvbG9yID0gcmFkaWFuY2VDb2xvclxuICAgICAgICAgICAgICAgIC5hZGQocmFkaWFuY2VJblJhbmRvbURpcmVjdGlvbik7XG5cblxuXG4gICAgICAgICAgICAvLyBsYW1iZXJ0XG5cbiAgICAgICAgICAgIGxhbWJDb3MgPSAtVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0Tm9ybWFsKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxhbWJDb2xvciA9IGxhbWJDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0XG4gICAgICAgICAgICAgICAgICAgIC5nZXRPd25lcigpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgIC5hZGQocmFkaWFuY2VDb2xvcilcbiAgICAgICAgICAgICAgICAgICAgLm11bHRpcGxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIGxhbWJDb3MgKiBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldExhbWJlcnRDb2VmZigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG5cblxuICAgICAgICAgICAgLy8gcGhvbmdcblxuICAgICAgICAgICAgcmVmbGVjdFBob25nVmVjdG9yRGlyID0gVmVjdG9yLnJlZmxlY3QoXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldE5vcm1hbCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcGhvbmdDb3MgPSAtVmVjdG9yLmRvdChyZWZsZWN0UGhvbmdWZWN0b3JEaXIsIHJheS5nZXREaXJlY3Rpb24oKSk7XG5cbiAgICAgICAgICAgIGlmIChwaG9uZ0NvcyA+IDApIHtcbiAgICAgICAgICAgICAgICBwaG9uZyA9IE1hdGgucG93KHBob25nQ29zLCAzNSk7XG4gICAgICAgICAgICAgICAgcGhvbmdDb2xvciA9IHBob25nQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0T3duZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIHBob25nICogaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0TWF0ZXJpYWwoKS5nZXRQaG9uZ0NvZWZmKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vYW1iaWVudCBvY2NsdXNpb25cbiAgICAgICAgICAgIC8qbGV0IGMgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW9TYW1wbGVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyID0gdGhpcy5jb3NpbmVTYW1wbGVIZW1pc3BoZXJlKGludGVyc2VjdC5nZXRPd25lcigpLmdldE5vcm1hbChpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSkpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGFvSW50ZXJzZWN0ID0gdGhpcy50cmFjZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFhb0ludGVyc2VjdC5nZXRJbnRlcnNlY3QoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYW9JbnRlcnNlY3QuZ2V0RGlzdGFuY2VGcm9tT3JpZ2luKCkgPiAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYysrO1xuICAgICAgICAgICAgfSovXG5cbiAgICAgICAgICAgIC8qcGl4ZWxDb2xvciA9IHBpeGVsQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgIGxhbWJDb2xvci5tdWx0aXBsZShDb2xvci53aGl0ZS5zY2FsZWQoMSAtIChjICogMC42NyAvIHRoaXMuYW9TYW1wbGVzKSkpLmFkZChwaG9uZ0NvbG9yKVxuICAgICAgICAgICAgKTsqL1xuXG4gICAgICAgICAgICBwaXhlbENvbG9yID0gcGl4ZWxDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgbGFtYkNvbG9yLmFkZChwaG9uZ0NvbG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwaXhlbENvbG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UmVmbGVjdGlvbkNvbG9yIChyYXk6IFJheSwgaW50ZXJzZWN0OiBhbnkpOiBhbnkge1xuICAgICAgICBsZXQgcmVmbGVjdGlvbkNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJlZmxlY3Rpb25WYWx1ZTogbnVtYmVyID0gaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0TWF0ZXJpYWwoKS5nZXRSZWZsZWN0aW9uVmFsdWUoKSxcbiAgICAgICAgICAgIHJlZmxlY3RlZFJheTogVmVjdG9yO1xuXG4gICAgICAgIGlmIChyZWZsZWN0aW9uVmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBDb2xvci5ibGFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZmxlY3RlZFJheSA9IFZlY3Rvci5yZWZsZWN0KFxuICAgICAgICAgICAgcmF5LmdldERpcmVjdGlvbigpLFxuICAgICAgICAgICAgaW50ZXJzZWN0LmdldE5vcm1hbCgpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmVmbGVjdGlvbkNvbG9yID0gdGhpcy5nZXRDb2xvcihcbiAgICAgICAgICAgIG5ldyBSYXkoaW50ZXJzZWN0LmdldEhpdFBvaW50KCksIHJlZmxlY3RlZFJheSwgcmF5LmdldEl0ZXJhdGlvbigpKVxuICAgICAgICApLnNjYWxlZChyZWZsZWN0aW9uVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiByZWZsZWN0aW9uQ29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQZXJzcGVjdGl2ZVZlY3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGNhbWVyYTogQ2FtZXJhID0gdGhpcy5zY2VuZS5nZXRDYW1lcmEoKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZShcbiAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgY2FtZXJhLmdldEZvcndhcmRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0UmlnaHRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclgoeClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLmdldFVwVmVjdG9yKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEucmVjZW50ZXJZKHkpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMaWdodFBvd2VyIChpbnRlcnNlY3Q6IGFueSwgbGlnaHQ6IEFic3RyYWN0TGlnaHQpOiBudW1iZXIge1xuICAgICAgICBsZXQgbGlnaHRQb3dlciA9IGxpZ2h0LmdldFBvd2VyKCksXG4gICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBzaGFkb3dSYXk6IEludGVyc2VjdFBvaW50LFxuICAgICAgICAgICAgcmVzdWx0UG93ZXI6IG51bWJlciA9IDA7XG5cbiAgICAgICAgbGlnaHRSYW5kb21Qb2ludCA9IGxpZ2h0LmdldFJhbmRvbVBvaW50KCk7XG5cbiAgICAgICAgc2hhZG93UmF5ID0gdGhpcy50cmFjZShcbiAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0LmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRIaXRQb2ludCgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNoYWRvd1JheS5nZXRJbnRlcnNlY3QoKSAmJlxuICAgICAgICAgICAgc2hhZG93UmF5LmdldE93bmVyKCkgaW5zdGFuY2VvZiBBYnN0cmFjdExpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0UG93ZXIgKz0gKFxuICAgICAgICAgICAgICAgIGxpZ2h0UG93ZXIgLVxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICAgICAgKS5nZXRMZW5ndGgoKSAqIChsaWdodFBvd2VyIC8gbGlnaHQuZ2V0RmFkZVJhZGl1cygpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0UG93ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFjZSAocmF5OiBSYXkpOiBJbnRlcnNlY3RQb2ludCB7XG4gICAgICAgIGxldCBpbnRlcnNlY3Rpb24gPSBuZXcgSW50ZXJzZWN0UG9pbnQoKSxcbiAgICAgICAgICAgIGludGVyc2VjdERhdGE6IGFueSxcbiAgICAgICAgICAgIG1pbkRpc3RhbmNlOiBudW1iZXIgPSBJbmZpbml0eSxcbiAgICAgICAgICAgIHNjZW5lT2JqZWN0czogQWJzdHJhY3RPYmplY3RbXSZBYnN0cmFjdExpZ2h0W10gPSB0aGlzLnNjZW5lLmdldE9iamVjdHMoKS5jb25jYXQodGhpcy5zY2VuZS5nZXRMaWdodHMoKSk7XG5cbiAgICAgICAgZm9yIChsZXQgb2JqZWN0IG9mIHNjZW5lT2JqZWN0cykge1xuICAgICAgICAgICAgaW50ZXJzZWN0RGF0YSA9IG9iamVjdC5nZXRJbnRlcnNlY3REYXRhKHJheSk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3REYXRhICYmXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXSA8IG1pbkRpc3RhbmNlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ107XG5cbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0SW50ZXJzZWN0KCk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldEhpdFBvaW50KGludGVyc2VjdERhdGFbJ2hpdFBvaW50J10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXROb3JtYWwoaW50ZXJzZWN0RGF0YVsnbm9ybWFsJ10pO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXREaXN0YW5jZUZyb21PcmlnaW4oaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXSk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldE93bmVyKG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIgKHNjcmVlbldpZHRoOiBudW1iZXIsIHNjcmVlbkhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJhbmRvTXVsdGlwbGllciA9IDAuNTtcblxuICAgICAgICBsZXQgYnVmZmVyOiBudW1iZXJbXSxcbiAgICAgICAgICAgIGNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJhbmQ6IG51bWJlcixcbiAgICAgICAgICAgIHJheTogUmF5O1xuXG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuc2NyZWVuSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuc2NyZWVuV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICByYW5kID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZCArPSBNYXRoLnJhbmRvbSgpICogcmFuZG9NdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgICAgICB9ICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgLT0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJheSA9IG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFBlcnNwZWN0aXZlVmVjdG9yKHggKyByYW5kLCB5ICsgcmFuZClcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IENvbG9yLmJsYWNrLmFkZCh0aGlzLmdldENvbG9yKHJheSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBpbiBjb2xvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JbY29tcG9uZW50XSA9IENvbG9yLnNSR0JFbmNvZGUoY29sb3JbY29tcG9uZW50XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChjb2xvci5yZWQpO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChjb2xvci5ncmVlbik7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGNvbG9yLmJsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShidWZmZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNldFNjZW5lIChzY2VuZTogU2NlbmUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cbn1cblxub25tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcblxuICAgIGlmICh0eXBlb2YoZGF0YSkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoJ1snK2RhdGErJ10nKTtcbiAgICB9XG5cbiAgICBsZXQgdHJhY2VyID0gbmV3IFRyYWNlcigpO1xuXG4gICAgdHJhY2VyLnNldFNjZW5lKFxuICAgICAgICBuZXcgU2NlbmUoe1xuICAgICAgICAgICAgY2FtZXJhOiBuZXcgQ2FtZXJhKFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgLTY5OSksXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwLCAxKSxcbiAgICAgICAgICAgICAgICBkYXRhWzBdLFxuICAgICAgICAgICAgICAgIGRhdGFbMV1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBsaWdodHM6IFtcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJpY2FsTGlnaHQobmV3IFZlY3RvciAoMCwgNjAwLCAwKSwgMC42LCAxMDApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUpKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJpY2FsTGlnaHQobmV3IFZlY3RvciAoMCwgMCwgMCksIDAuNiwgMTUwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAyMzUsIDIwMCkpKSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBvYmplY3RzOiBbXG4gICAgICAgICAgICAgICAgLy8gbmV3IFBsYW5lKG5ldyBWZWN0b3IoMCwgMSwgMCksIG5ldyBWZWN0b3IgKDAsIC00MDAsIDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IuZ3JheSwgMCkpLFxuICAgICAgICAgICAgICAgIC8vIGJvdHRvbSBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci53aGl0ZSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyBmcm9udCBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLndoaXRlLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIC8vIHRvcCBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCAtNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLndoaXRlLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIC8vcmlnaHQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibHVlKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIC8vbGVmdCBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIC03MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5yZWQsIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gYmFjayBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibGFjaywgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJlKG5ldyBWZWN0b3IoLTI1MCwgLTUwMCwgNDUwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmJsYWNrLCAxKSksXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyZShuZXcgVmVjdG9yKDI1MCwgLTUwMCwgNDAwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmdyZWVuLCAwKSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgdHJhY2VyLnJlbmRlcihkYXRhWzBdLCBkYXRhWzFdKTtcbn07IiwiZXhwb3J0IGNsYXNzIFZlY3RvciB7XG4gICAgcHJpdmF0ZSB4OiBudW1iZXI7XG4gICAgcHJpdmF0ZSB5OiBudW1iZXI7XG4gICAgcHJpdmF0ZSB6OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnogPSB6O1xuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGVzICgpOiB7eDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcn0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55LFxuICAgICAgICAgICAgejogdGhpcy56XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGFzQXJyYXkgKCk6IG51bWJlcltdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHRoaXMueCxcbiAgICAgICAgICAgIHRoaXMueSxcbiAgICAgICAgICAgIHRoaXMuelxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMZW5ndGggKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICoqIDIgKyB0aGlzLnkgKiogMiArIHRoaXMueiAqKiAyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlICh2ZWN0b3I6IFZlY3RvciwgbXVsdGlwbGllcjogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yLnggKiBtdWx0aXBsaWVyLCB2ZWN0b3IueSAqIG11bHRpcGxpZXIsIHZlY3Rvci56ICogbXVsdGlwbGllcik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhZGQgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54ICsgdmVjdG9yMi54LCB2ZWN0b3IxLnkgKyB2ZWN0b3IyLnksIHZlY3RvcjEueiArIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdWJzdHJhY3QgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yMS54IC0gdmVjdG9yMi54LCB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnksIHZlY3RvcjEueiAtIHZlY3RvcjIueik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBkb3QgKHZlY3RvcjE6IFZlY3RvciwgdmVjdG9yMjogVmVjdG9yKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHZlY3RvcjEueCAqIHZlY3RvcjIueCArIHZlY3RvcjEueSAqIHZlY3RvcjIueSArIHZlY3RvcjEueiAqIHZlY3RvcjIuejtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyb3NzICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdmVjdG9yMS55ICogdmVjdG9yMi56IC0gdmVjdG9yMS56ICogdmVjdG9yMi55LFxuICAgICAgICAgICAgdmVjdG9yMS56ICogdmVjdG9yMi54IC0gdmVjdG9yMS54ICogdmVjdG9yMi56LFxuICAgICAgICAgICAgdmVjdG9yMS54ICogdmVjdG9yMi55IC0gdmVjdG9yMS55ICogdmVjdG9yMi54XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBub3JtYWxpemUgKHZlY3RvcjogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zY2FsZSh2ZWN0b3IsIDEgLyB2ZWN0b3IuZ2V0TGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcG93ICh2ZWN0b3I6IFZlY3RvciwgdmFsdWU6IG51bWJlcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdmVjdG9yLnkgKiogdmFsdWUsXG4gICAgICAgICAgICB2ZWN0b3IueiAqKiB2YWx1ZSxcbiAgICAgICAgICAgIHZlY3Rvci54ICoqIHZhbHVlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbnZlcnNlICh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iuc2NhbGUodmVjdG9yLCAtMSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZWZsZWN0ICh2ZWN0b3I6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgZiA9IDIgKiBWZWN0b3IuZG90KHZlY3Rvciwgbm9ybWFsKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIHZlY3RvcixcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShub3JtYWwsIGYpXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19
