(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalize(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalize(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scale(Vector_1.Vector.normalize(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":16}],2:[function(require,module,exports){
var RGBColor_1=require("./RGBColor"),FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.getColor=function(){return{red:this.red,green:this.green,blue:this.blue}},o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o.black=new o(new RGBColor_1.RGBColor(0,0,0)),o.white=new o(new RGBColor_1.RGBColor(255,255,255)),o.gray=new o(new RGBColor_1.RGBColor(127,127,127)),o.red=new o(new RGBColor_1.RGBColor(255,0,0)),o.green=new o(new RGBColor_1.RGBColor(0,255,0)),o.blue=new o(new RGBColor_1.RGBColor(0,0,255)),o}();exports.Color=Color;


},{"./FloatColor":3,"./RGBColor":4}],3:[function(require,module,exports){
var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
var RGBColor=function(){function o(t,r,n){this.red=o.toFloat(t),this.green=o.toFloat(r),this.blue=o.toFloat(n)}return o.toFloat=function(o){return 0===o?o:o/255},o}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
var IntersectPoint=function(){function t(){this.intersected=!1}return t.prototype.getIntersect=function(){return this.intersected},t.prototype.getHitPoint=function(){return this.hitPoint},t.prototype.getNormal=function(){return this.normal},t.prototype.getOwner=function(){return this.owner},t.prototype.getDistanceFromOrigin=function(){return this.distanceFromOrigin},t.prototype.setIntersect=function(){this.intersected=!0},t.prototype.setHitPoint=function(t){this.hitPoint=t},t.prototype.setNormal=function(t){this.normal=t},t.prototype.setOwner=function(t){this.owner=t},t.prototype.setDistanceFromOrigin=function(t){this.distanceFromOrigin=t},t}();exports.IntersectPoint=IntersectPoint;


},{}],6:[function(require,module,exports){
var AbstractLight=function(){function t(){}return t}();exports.AbstractLight=AbstractLight;


},{}],7:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},AbstractLight_1=require("./AbstractLight"),Color_1=require("./../Color/Color"),Material_1=require("./../Material"),RGBColor_1=require("./../Color/RGBColor"),RTMath_1=require("./../RTMath"),Vector_1=require("./../Vector"),SphericalLight=function(t){function r(r,e,o){t.call(this),this.radius=50,this.fadeRadius=2500,this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(244,244,244)),0).setLambertCoeff(1),this.center=r,this.power=e,o&&(this.radius=o)}return __extends(r,t),r.prototype.getFadeRadius=function(){return this.radius+this.fadeRadius},r.prototype.getPosition=function(){return this.center},r.prototype.getPower=function(){return this.power},r.prototype.getRadius=function(){return this.radius},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getIntersectData=function(t){var r,e,o,i,a,n,s,c=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(c,t.getDirection()),u=Vector_1.Vector.dot(c,c)-Math.pow(this.radius,2),p=Math.pow(h,2)-u;if(!(h>0||0>p||p>=0&&(r=-h+Math.sqrt(p),e=-h-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return n=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),a),t.getOrigin()),s=Vector_1.Vector.substract(n,t.getOrigin()).getLength(),{hitPoint:n,normal:this.getNormal(n),distance:s}},r.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},r.prototype.getMaterial=function(){return this.material},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractLight_1.AbstractLight);exports.SphericalLight=SphericalLight;


},{"./../Color/Color":2,"./../Color/RGBColor":4,"./../Material":8,"./../RTMath":12,"./../Vector":16,"./AbstractLight":6}],8:[function(require,module,exports){
var Color_1=require("./Color/Color"),RGBColor_1=require("./Color/RGBColor"),Material=function(){function o(o,t){void 0===o&&(o=new Color_1.Color(new RGBColor_1.RGBColor(255,0,0))),void 0===t&&(t=0),this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,this.color=o,this.reflectionCoeff=t}return o.prototype.getColor=function(){return this.color},o.prototype.getLambertCoeff=function(){return this.lambertCoeff},o.prototype.getPhongCoeff=function(){return this.phongCoeff},o.prototype.getReflectionValue=function(){return this.reflectionCoeff},o.prototype.setLambertCoeff=function(o){return this.lambertCoeff=o,this.phongCoeff=1-o,this},o.prototype.setPhongCoeff=function(o){return this.phongCoeff=o,this.lambertCoeff=1-o,this},o}();exports.Material=Material;


},{"./Color/Color":2,"./Color/RGBColor":4}],9:[function(require,module,exports){
var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],10:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RTMath_1=require("../RTMath"),Vector_1=require("../Vector"),Plane=function(t){function e(e,r){t.call(this),this.point=new Vector_1.Vector(0,0,0),this.material=new Material_1.Material(Color_1.Color.gray,0),this.normal=e,r&&(this.point=r)}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o=Vector_1.Vector.dot(Vector_1.Vector.substract(this.point,t.getOrigin()),this.normal)/Vector_1.Vector.dot(t.getDirection(),this.getNormal());if(!(o<=RTMath_1.RTMath.EPSILON))return r=Vector_1.Vector.add(t.getOrigin(),Vector_1.Vector.scale(t.getDirection(),o)),e=Vector_1.Vector.substract(r,t.getOrigin()).getLength(),{hitPoint:r,normal:this.getNormal(),distance:e}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(){return this.normal},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Plane=Plane;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],11:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),Vector_1=require("../Vector"),Sphere=function(t){function e(e,r){t.call(this),this.material=new Material_1.Material(Color_1.Color.red,0),this.center=e,this.radius=r}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o,a,i,c,n,s=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(s,t.getDirection()),u=Vector_1.Vector.dot(s,s)-Math.pow(this.radius,2),_=Math.pow(h,2)-u;if(!(h>0||0>_||_>=0&&(e=-h+Math.sqrt(_),r=-h-Math.sqrt(_),o=Math.min(e,r),a=Math.max(e,r),i=o>RTMath_1.RTMath.EPSILON?o:a,i<RTMath_1.RTMath.EPSILON)))return c=Vector_1.Vector.add(Vector_1.Vector.scale(t.getDirection(),i),t.getOrigin()),n=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{hitPoint:c,normal:this.getNormal(c),distance:n}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(t){return Vector_1.Vector.normalize(Vector_1.Vector.scale(Vector_1.Vector.substract(t,this.center),1/this.radius))},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Material":8,"../RTMath":12,"../Vector":16,"./AbstractObject":9}],12:[function(require,module,exports){
var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],13:[function(require,module,exports){
var Vector_1=require("./Vector"),Ray=function(){function t(t,i,r){this.iteration=5,this.origin=t,this.direction=Vector_1.Vector.normalize(i),r&&(this.iteration=r)}return t.prototype.getOrigin=function(){return this.origin},t.prototype.getDirection=function(){return this.direction},t.prototype.getIteration=function(){return this.iteration},t.prototype.getHitPoint=function(t){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scale(this.direction,t))},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":16}],14:[function(require,module,exports){
var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],15:[function(require,module,exports){
var AbstractLight_1=require("./Lights/AbstractLight"),Camera_1=require("./Camera"),Color_1=require("./Color/Color"),IntersectPoint_1=require("./IntersectPoint"),Material_1=require("./Material"),Plane_1=require("./Objects/Plane"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),SphericalLight_1=require("./Lights/SphericalLight"),Vector_1=require("./Vector"),Tracer=function(){function e(){this.buffer=[],this.screenWidth=250,this.screenHeight=250;for(var e=0;e<this.screenWidth*this.screenHeight*3;e++)this.buffer.push(Color_1.Color.black)}return e.prototype.cosineSampleHemisphere=function(e){var t,r,o=Math.random(),a=Math.random(),i=Math.sqrt(o),c=2*Math.PI*a;return t=Math.abs(e.getCoordinates().x)<.5?Vector_1.Vector.cross(e,new Vector_1.Vector(1,0,0)):Vector_1.Vector.cross(e,new Vector_1.Vector(0,1,0)),r=Vector_1.Vector.cross(e,t),Vector_1.Vector.add(Vector_1.Vector.scale(e,Math.sqrt(1-o)),Vector_1.Vector.add(Vector_1.Vector.scale(t,i*Math.cos(c)),Vector_1.Vector.scale(r,i*Math.sin(c))))},e.prototype.getColor=function(e){var t=this.trace(e),r=Color_1.Color.black,o=Color_1.Color.black,a=e.getIteration();return e.setIteration(--a),0===a?Color_1.Color.black:t.getIntersect()?(r=this.getDiffuseColor(e,t),o=this.getReflectionColor(e,t),r.add(o)):Color_1.Color.black},e.prototype.getDiffuseColor=function(e,t,r){void 0===r&&(r=!0);for(var o,a,i,c,n,l,s,g,_,h,V=Color_1.Color.black,C=0,w=this.scene.getLights();C<w.length;C++){var f=w[C];if(t.getOwner()instanceof AbstractLight_1.AbstractLight)return t.getOwner().getMaterial().getColor();l=this.getLightPower(t,f),o=Color_1.Color.black,a=Color_1.Color.black,i=Color_1.Color.black,n=Vector_1.Vector.normalize(Vector_1.Vector.substract(t.getHitPoint(),f.getPosition()));var u=void 0;c=this.cosineSampleHemisphere(t.getOwner().getNormal(t.getHitPoint())),u=this.getColor(new Ray_1.Ray(t.getHitPoint(),c,e.getIteration())),i=i.add(u),g=-Vector_1.Vector.dot(n,t.getNormal()),o=o.add(t.getOwner().getMaterial().getColor().add(i).multiple(f.getMaterial().getColor().scaled(l*g*t.getOwner().getMaterial().getLambertCoeff()))),s=Vector_1.Vector.reflect(n,t.getNormal()),_=-Vector_1.Vector.dot(s,e.getDirection()),_>0&&(h=Math.pow(_,35),a=a.add(t.getOwner().getMaterial().getColor().multiple(f.getMaterial().getColor().scaled(l*h*t.getOwner().getMaterial().getPhongCoeff())))),V=V.add(o.add(a))}return V},e.prototype.getReflectionColor=function(e,t){var r,o,a=t.getOwner().getMaterial().getReflectionValue();return 0===a?Color_1.Color.black:(o=Vector_1.Vector.reflect(e.getDirection(),t.getNormal()),r=this.getColor(new Ray_1.Ray(t.getHitPoint(),o,e.getIteration())).scaled(a))},e.prototype.getPerspectiveVector=function(e,t){var r=this.scene.getCamera();return Vector_1.Vector.normalize(Vector_1.Vector.add(r.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scale(r.getRightVector(),r.recenterX(e)),Vector_1.Vector.scale(r.getUpVector(),r.recenterY(t)))))},e.prototype.getLightPower=function(e,t){var r,o,a=t.getPower(),i=0;return r=t.getRandomPoint(),o=this.trace(new Ray_1.Ray(e.getHitPoint(),Vector_1.Vector.substract(Vector_1.Vector.substract(t.getPosition(),r),e.getHitPoint()))),o.getIntersect()&&o.getOwner()instanceof AbstractLight_1.AbstractLight&&(i+=a-Vector_1.Vector.substract(Vector_1.Vector.substract(t.getPosition(),r),e.getHitPoint()).getLength()*(a/t.getFadeRadius())),i},e.prototype.trace=function(e){for(var t,r=new IntersectPoint_1.IntersectPoint,o=1/0,a=this.scene.getObjects().concat(this.scene.getLights()),i=0,c=a;i<c.length;i++){var n=c[i];t=n.getIntersectData(e),t&&t.distance<o&&(o=t.distance,r.setIntersect(),r.setHitPoint(t.hitPoint),r.setNormal(t.normal),r.setDistanceFromOrigin(t.distance),r.setOwner(n))}return r},e.prototype.render=function(e,t){var r,o,a,i=.5;for(this.screenWidth=e,this.screenHeight=t;;){r=[];for(var c=0;1>c;c++)for(var n=0,l=0;l<this.screenHeight;l++)for(var s=0;s<this.screenWidth;s++){o=0,Math.random()>.5?o+=Math.random()*i:o-=Math.random()*i,a=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(s+o,l+o)),this.buffer[n]=Color_1.Color.black.add(this.getColor(a));for(var g in this.buffer[n].getColor())this.buffer[n][g]=Color_1.Color.sRGBEncode(this.buffer[n][g]);r.push(this.buffer[n].getColor().red),r.push(this.buffer[n].getColor().green),r.push(this.buffer[n].getColor().blue),n++}for(var n=0;n<this.buffer.length;n++)this.buffer[n].getColor().red=0,this.buffer[n].getColor().green=0,this.buffer[n].getColor().blue=0;self.postMessage(r)}},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse("["+t+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),t[0],t[1]),lights:[new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,600,0),1,100).setMaterial(new Material_1.Material(Color_1.Color.white)),new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,0,0),.6,150).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,235,200))))],objects:[new Plane_1.Plane(new Vector_1.Vector(0,1,0),new Vector_1.Vector(0,-700,0)).setMaterial(new Material_1.Material(Color_1.Color.white,0)),new Plane_1.Plane(new Vector_1.Vector(0,-1,0),new Vector_1.Vector(0,700,0)).setMaterial(new Material_1.Material(Color_1.Color.white,0)),new Plane_1.Plane(new Vector_1.Vector(-1,0,0),new Vector_1.Vector(700,0,0)).setMaterial(new Material_1.Material(Color_1.Color.blue,0)),new Plane_1.Plane(new Vector_1.Vector(1,0,0),new Vector_1.Vector(-700,0,0)).setMaterial(new Material_1.Material(Color_1.Color.red,0)),new Plane_1.Plane(new Vector_1.Vector(0,0,-1),new Vector_1.Vector(0,0,700)).setMaterial(new Material_1.Material(Color_1.Color.white,0)),new Plane_1.Plane(new Vector_1.Vector(0,0,1),new Vector_1.Vector(0,0,-700)).setMaterial(new Material_1.Material(Color_1.Color.black,0)),new Sphere_1.Sphere(new Vector_1.Vector(-250,-500,450),200).setMaterial(new Material_1.Material(Color_1.Color.black,1)),new Sphere_1.Sphere(new Vector_1.Vector(250,-500,400),200).setMaterial(new Material_1.Material(Color_1.Color.green,0))]})),r.render(t[0],t[1])};


},{"./Camera":1,"./Color/Color":2,"./Color/RGBColor":4,"./IntersectPoint":5,"./Lights/AbstractLight":6,"./Lights/SphericalLight":7,"./Material":8,"./Objects/Plane":10,"./Objects/Sphere":11,"./Ray":13,"./Scene":14,"./Vector":16}],16:[function(require,module,exports){
var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.scale=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.normalize=function(n){return t.scale(n,1/n.getLength())},t.pow=function(n,r){return new t(Math.pow(n.y,r),Math.pow(n.z,r),Math.pow(n.x,r))},t.inverse=function(n){return t.scale(n,-1)},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scale(r,e))},t}();exports.Vector=Vector;


},{}]},{},[15])(15)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvc291cmNlL0NhbWVyYS50cyIsIi9zb3VyY2UvQ29sb3IvQ29sb3IudHMiLCIvc291cmNlL0NvbG9yL0Zsb2F0Q29sb3IudHMiLCIvc291cmNlL0NvbG9yL1JHQkNvbG9yLnRzIiwiL3NvdXJjZS9JbnRlcnNlY3RQb2ludC50cyIsIi9zb3VyY2UvTGlnaHRzL0Fic3RyYWN0TGlnaHQudHMiLCIvc291cmNlL0xpZ2h0cy9TcGhlcmljYWxMaWdodC5qcyIsIi9zb3VyY2UvTGlnaHRzL1NwaGVyaWNhbExpZ2h0LnRzIiwiL3NvdXJjZS9NYXRlcmlhbC50cyIsIi9zb3VyY2UvT2JqZWN0cy9BYnN0cmFjdE9iamVjdC50cyIsIi9zb3VyY2UvT2JqZWN0cy9QbGFuZS5qcyIsIi9zb3VyY2UvT2JqZWN0cy9QbGFuZS50cyIsIi9zb3VyY2UvT2JqZWN0cy9TcGhlcmUuanMiLCIvc291cmNlL09iamVjdHMvU3BoZXJlLnRzIiwiL3NvdXJjZS9SVE1hdGgudHMiLCIvc291cmNlL1JheS50cyIsIi9zb3VyY2UvU2NlbmUudHMiLCIvc291cmNlL1RyYWNlcldvcmtlci50cyIsIi9zb3VyY2UvVmVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsR0FBQSxVQUFBLFFBQXVCLFlBRXZCLE9BQUEsV0FTSSxRQUFBLEdBQWEsRUFBa0IsRUFBbUIsRUFBcUIsR0FDbkUsS0FBSyxTQUFXLEVBQ2hCLEtBQUssVUFBWSxTQUFBLE9BQU8sVUFBVSxHQUNsQyxLQUFLLFlBQWMsRUFDbkIsS0FBSyxhQUFlLEVBRXBCLEtBQUssY0FBZ0IsU0FBQSxPQUFPLFVBQVUsU0FBQSxPQUFPLFVBQVUsS0FBSyxVQUFXLEtBQUssV0FDNUUsS0FBSyxZQUFjLFNBQUEsT0FBTyxNQUN0QixTQUFBLE9BQU8sVUFDSCxTQUFBLE9BQU8sTUFDSCxLQUFLLGNBQ0ws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TyxFQUFLLEdBQ1osS0FBQSxJQUFBLEVBQU8sRUFBSyxHQUNaLEtBQUEsSUFBQSxFQUFPLEVBQUssS0FJTixFQUFBLFFBQWQsU0FBdUIsR0FDbkIsTUFBTyxHQUFPLE1BQU0sRUFBUSxLQUdsQixFQUFBLFFBQWQsU0FBdUIsRUFBZ0IsR0FDbkMsR0FBSSxHQUFJLEVBQUksRUFBTyxJQUFJLEVBQVEsRUFFL0IsT0FBTyxHQUFPLFVBQ1YsRUFDQSxFQUFPLE1BQU0sRUFBUSxLQUdqQyxJQS9FYSxTQUFBLE9BQU0iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBDYW1lcmEge1xuICAgIHByaXZhdGUgZGlyZWN0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogVmVjdG9yO1xuICAgIHByaXZhdGUgZm9yd2FyZFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgcmlnaHRWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHVwVmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBzY3JlZW5XaWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgc2NyZWVuSGVpZ2h0OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAocG9zaXRpb246IFZlY3RvciwgZGlyZWN0aW9uOiBWZWN0b3IsIHNjcmVlbldpZHRoOiBudW1iZXIsIHNjcmVlbkhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBWZWN0b3Iubm9ybWFsaXplKGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5mb3J3YXJkVmVjdG9yID0gVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3Iuc3Vic3RyYWN0KHRoaXMuZGlyZWN0aW9uLCB0aGlzLnBvc2l0aW9uKSk7XG4gICAgICAgIHRoaXMucmlnaHRWZWN0b3IgPSBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5jcm9zcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkVmVjdG9yLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIC0xLCAwKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudXBWZWN0b3IgPSBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5jcm9zcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkVmVjdG9yLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0VmVjdG9yXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlyZWN0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvc2l0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rm9yd2FyZFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yd2FyZFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmlnaHRWZWN0b3IgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0VmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRVcFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2VudGVyWCAoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGFzcGVjdENvZWZmID0gKHRoaXMuc2NyZWVuSGVpZ2h0IC8gdGhpcy5zY3JlZW5XaWR0aCkgKiAyO1xuXG4gICAgICAgIHJldHVybiAoeCAtICh0aGlzLnNjcmVlbldpZHRoIC8gMikpIC8gYXNwZWN0Q29lZmYgLyB0aGlzLnNjcmVlbldpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWNlbnRlclkgKHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAtKHkgLSAodGhpcy5zY3JlZW5IZWlnaHQgLyAyKSkgLyAyIC8gdGhpcy5zY3JlZW5IZWlnaHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi9SR0JDb2xvclwiO1xuaW1wb3J0IHsgRmxvYXRDb2xvciB9IGZyb20gXCIuL0Zsb2F0Q29sb3JcIjtcblxuZXhwb3J0IGNsYXNzIENvbG9yIHtcbiAgICBwcml2YXRlIHJlZDogbnVtYmVyO1xuICAgIHByaXZhdGUgZ3JlZW46IG51bWJlcjtcbiAgICBwcml2YXRlIGJsdWU6IG51bWJlcjtcblxuICAgIHB1YmxpYyBzdGF0aWMgYmxhY2sgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICBwdWJsaWMgc3RhdGljIHdoaXRlID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDI1NSwgMjU1KSk7XG4gICAgcHVibGljIHN0YXRpYyBncmF5ID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigxMjcsIDEyNywgMTI3KSk7XG4gICAgcHVibGljIHN0YXRpYyByZWQgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMCwgMCkpO1xuICAgIHB1YmxpYyBzdGF0aWMgZ3JlZW4gPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDI1NSwgMCkpO1xuICAgIHB1YmxpYyBzdGF0aWMgYmx1ZSA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMjU1KSk7XG5cbiAgICBjb25zdHJ1Y3RvciAoY29sb3I6IFJHQkNvbG9yfEZsb2F0Q29sb3IpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBjb2xvci5yZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBjb2xvci5ncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gY29sb3IuYmx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sb3IgKCk6IHtyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWQ6IHRoaXMucmVkLFxuICAgICAgICAgICAgZ3JlZW46IHRoaXMuZ3JlZW4sXG4gICAgICAgICAgICBibHVlOiB0aGlzLmJsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhZGQgKGNvbG9yOiBDb2xvcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICsgY29sb3IucmVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gKyBjb2xvci5ncmVlbixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKyBjb2xvci5ibHVlXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1YnN0cmFjdCAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgLSBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAtIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAtIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2NhbGVkIChtdWx0aXBsaWVyOiBudW1iZXIpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAqIG11bHRpcGxpZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAqIG11bHRpcGxpZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICogbXVsdGlwbGllclxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBtdWx0aXBsZSAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKiBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiAqIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSAqIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGl2aWRlICh2YWx1ZTogbnVtYmVyKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgLyB2YWx1ZSxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuIC8gdmFsdWUsXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlIC8gdmFsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNSR0JFbmNvZGUgKGNvbG9yOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKGNvbG9yIDw9IDAuMDAzMTMwOCkge1xuICAgICAgICAgICAgcmV0dXJuIDEyLjkyICogY29sb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMS4wNTUgKiAoY29sb3IgKiogMC40MTY2NjY3KSAtIDAuMDU1O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0b1JHQiAoY29sb3I6IENvbG9yKToge3JlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXJ9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZDogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLnJlZCkgKiAyNTUpLFxuICAgICAgICAgICAgZ3JlZW46IE1hdGguZmxvb3IoQ29sb3IuY2xhbXBDb2xvcihjb2xvci5ncmVlbikgKiAyNTUpLFxuICAgICAgICAgICAgYmx1ZTogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLmJsdWUpICogMjU1KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2xhbXBDb2xvciAoY29sb3I6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb2xvciA+IDEgPyAxIDogY29sb3I7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEZsb2F0Q29sb3Ige1xuICAgIHB1YmxpYyByZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZ3JlZW46IG51bWJlcjtcbiAgICBwdWJsaWMgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yZWQgPSByZWQ7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBncmVlbjtcbiAgICAgICAgdGhpcy5ibHVlID0gYmx1ZTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFJHQkNvbG9yIHtcbiAgICBwdWJsaWMgcmVkOiBudW1iZXI7XG4gICAgcHVibGljIGdyZWVuOiBudW1iZXI7XG4gICAgcHVibGljIGJsdWU6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucmVkID0gUkdCQ29sb3IudG9GbG9hdChyZWQpO1xuICAgICAgICB0aGlzLmdyZWVuID0gUkdCQ29sb3IudG9GbG9hdChncmVlbik7XG4gICAgICAgIHRoaXMuYmx1ZSA9IFJHQkNvbG9yLnRvRmxvYXQoYmx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdG9GbG9hdCAoY29sb3I6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb2xvciA9PT0gMCA/IGNvbG9yIDogY29sb3IgLyAyNTU7XG4gICAgfVxufSIsImltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0cy9BYnN0cmFjdE9iamVjdFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIEludGVyc2VjdFBvaW50IHtcbiAgICBwcml2YXRlIGludGVyc2VjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBoaXRQb2ludDogVmVjdG9yO1xuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBkaXN0YW5jZUZyb21PcmlnaW46IG51bWJlcjtcbiAgICBwcml2YXRlIG93bmVyOiBBYnN0cmFjdE9iamVjdDtcblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3QgKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3RlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGl0UG9pbnQgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpdFBvaW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0T3duZXIgKCk6IEFic3RyYWN0T2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpc3RhbmNlRnJvbU9yaWdpbiAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRJbnRlcnNlY3QgKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmludGVyc2VjdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SGl0UG9pbnQgKGhpdFBvaW50OiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oaXRQb2ludCA9IGhpdFBvaW50XG4gICAgfVxuXG4gICAgcHVibGljIHNldE5vcm1hbCAobm9ybWFsOiBWZWN0b3IpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE93bmVyIChvd25lcjogQWJzdHJhY3RPYmplY3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXREaXN0YW5jZUZyb21PcmlnaW4gKGRpc3RhbmNlRnJvbU9yaWdpbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2VGcm9tT3JpZ2luID0gZGlzdGFuY2VGcm9tT3JpZ2luO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdExpZ2h0IHtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0RmFkZVJhZGl1cyAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb3NpdGlvbiAoKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb3dlciAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRSYWRpdXMgKCk6IG51bWJlcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnk7XG4gICAgcHVibGljIGFic3RyYWN0IGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRSYW5kb21Qb2ludCAoKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcztcbn1cbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFic3RyYWN0TGlnaHRfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0TGlnaHRcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLy4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi8uLi9NYXRlcmlhbFwiKTtcbnZhciBSR0JDb2xvcl8xID0gcmVxdWlyZShcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIik7XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi8uLi9SVE1hdGhcIik7XG52YXIgVmVjdG9yXzEgPSByZXF1aXJlKFwiLi8uLi9WZWN0b3JcIik7XG52YXIgU3BoZXJpY2FsTGlnaHQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGhlcmljYWxMaWdodCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGhlcmljYWxMaWdodChwb3NpdGlvbiwgcG93ZXIsIHJhZGl1cykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSA1MDtcbiAgICAgICAgdGhpcy5mYWRlUmFkaXVzID0gMjUwMDtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDI0NCwgMjQ0LCAyNDQpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpO1xuICAgICAgICB0aGlzLmNlbnRlciA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBvd2VyID0gcG93ZXI7XG4gICAgICAgIGlmIChyYWRpdXMpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRGYWRlUmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMgKyB0aGlzLmZhZGVSYWRpdXM7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbnRlcjtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRQb3dlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG93ZXI7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UmFuZG9tUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1ID0gTWF0aC5yYW5kb20oKSwgdiA9IE1hdGgucmFuZG9tKCksIHEgPSAyICogTWF0aC5QSSAqIHUsIGYgPSBNYXRoLnBvdyhNYXRoLmNvcygyICogdiAtIDEpLCAtMSk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yXzEuVmVjdG9yKHRoaXMucmFkaXVzICogTWF0aC5jb3MocSkgKiBNYXRoLnNpbihmKSwgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihxKSAqIE1hdGguc2luKGYpLCB0aGlzLnJhZGl1cyAqIE1hdGguY29zKGYpKTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgayA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLmNlbnRlciksIGIgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIHJheS5nZXREaXJlY3Rpb24oKSksIGMgPSBWZWN0b3JfMS5WZWN0b3IuZG90KGssIGspIC0gTWF0aC5wb3codGhpcy5yYWRpdXMsIDIpLCBkID0gTWF0aC5wb3coYiwgMikgLSBjLCB0MSwgdDIsIG1pblQsIG1heFQsIGludGVyc2VjdGlvblBvaW50LCBoaXRQb2ludCwgZGlzdGFuY2U7XG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID49IDApIHtcbiAgICAgICAgICAgIHQxID0gLWIgKyBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICB0MiA9IC1iIC0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgbWluVCA9IE1hdGgubWluKHQxLCB0Mik7XG4gICAgICAgICAgICBtYXhUID0gTWF0aC5tYXgodDEsIHQyKTtcbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBoaXRQb2ludCA9IFZlY3Rvcl8xLlZlY3Rvci5hZGQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLCByYXkuZ2V0T3JpZ2luKCkpO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoaXRQb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBub3JtYWw6IHRoaXMuZ2V0Tm9ybWFsKGhpdFBvaW50KSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZShWZWN0b3JfMS5WZWN0b3Iuc2NhbGUoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLCAxIC8gdGhpcy5yYWRpdXMpKTtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmljYWxMaWdodDtcbn0pKEFic3RyYWN0TGlnaHRfMS5BYnN0cmFjdExpZ2h0KTtcbmV4cG9ydHMuU3BoZXJpY2FsTGlnaHQgPSBTcGhlcmljYWxMaWdodDtcbiIsImltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLy4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLy4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi8uLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLy4uL1JUTWF0aFwiXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi8uLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFNwaGVyaWNhbExpZ2h0IGV4dGVuZHMgQWJzdHJhY3RMaWdodCB7XG4gICAgcHJpdmF0ZSBjZW50ZXI6IFZlY3RvcjtcbiAgICBwcml2YXRlIHJhZGl1czogbnVtYmVyID0gNTA7XG4gICAgcHJpdmF0ZSBwb3dlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgZmFkZVJhZGl1czogbnVtYmVyID0gMjUwMDtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI0NCwgMjQ0LCAyNDQpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpO1xuXG4gICAgY29uc3RydWN0b3IgKHBvc2l0aW9uOiBWZWN0b3IsIHBvd2VyOiBudW1iZXIsIHJhZGl1cz86IG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY2VudGVyID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG93ZXIgPSBwb3dlcjtcblxuICAgICAgICBpZiAocmFkaXVzKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGYWRlUmFkaXVzICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMgKyB0aGlzLmZhZGVSYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvc2l0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBvd2VyICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3dlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFkaXVzICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3Ige1xuICAgICAgICBsZXQgdSA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICB2ID0gTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHEgPSAyICogTWF0aC5QSSAqIHUsXG4gICAgICAgICAgICBmID0gTWF0aC5wb3coTWF0aC5jb3MoMiAqIHYgLSAxKSwgLTEpO1xuXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbihxKSAqIE1hdGguc2luKGYpLFxuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhmKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBrID0gVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgIGI6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgcmF5LmdldERpcmVjdGlvbigpKSxcbiAgICAgICAgICAgIGM6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgaykgLSB0aGlzLnJhZGl1cyAqKiAyLFxuICAgICAgICAgICAgZDogbnVtYmVyID0gYiAqKiAyIC0gYyxcbiAgICAgICAgICAgIHQxOiBudW1iZXIsXG4gICAgICAgICAgICB0MjogbnVtYmVyLFxuICAgICAgICAgICAgbWluVDogbnVtYmVyLFxuICAgICAgICAgICAgbWF4VDogbnVtYmVyLFxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQ6IG51bWJlcixcbiAgICAgICAgICAgIGhpdFBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBkaXN0YW5jZTogbnVtYmVyO1xuXG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPj0gMCkge1xuICAgICAgICAgICAgdDEgPSAtYiArIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIHQyID0gLWIgLSBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICBtaW5UID0gTWF0aC5taW4odDEsIHQyKTtcbiAgICAgICAgICAgIG1heFQgPSBNYXRoLm1heCh0MSwgdDIpO1xuXG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25Qb2ludCA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoaGl0UG9pbnQpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgICAgICAxIC8gdGhpcy5yYWRpdXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vQ29sb3IvUkdCQ29sb3JcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIHtcbiAgICBwcml2YXRlIGNvbG9yOiBDb2xvcjtcbiAgICBwcml2YXRlIGxhbWJlcnRDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcGhvbmdDb2VmZjogbnVtYmVyID0gMC41O1xuICAgIHByaXZhdGUgcmVmbGVjdGlvbkNvZWZmOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBjb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMCwgMCkpLFxuICAgICAgICByZWZsZWN0aW9uQ29lZmY6IG51bWJlciA9IDBcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25Db2VmZiA9IHJlZmxlY3Rpb25Db2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sb3IgKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldExhbWJlcnRDb2VmZigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5sYW1iZXJ0Q29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBob25nQ29lZmYoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGhvbmdDb2VmZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVmbGVjdGlvblZhbHVlICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIHNldExhbWJlcnRDb2VmZihsYW1iZXJ0Q29lZmY6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLmxhbWJlcnRDb2VmZiA9IGxhbWJlcnRDb2VmZjtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gMSAtIGxhbWJlcnRDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UGhvbmdDb2VmZihwaG9uZ0NvZWZmOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5waG9uZ0NvZWZmID0gcGhvbmdDb2VmZjtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSAxIC0gcGhvbmdDb2VmZjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59IiwiaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBhYnN0cmFjdCBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueTtcbiAgICBhYnN0cmFjdCBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWw7XG4gICAgYWJzdHJhY3Qgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXM7XG59XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBYnN0cmFjdE9iamVjdF8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RPYmplY3RcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9Db2xvclwiKTtcbnZhciBNYXRlcmlhbF8xID0gcmVxdWlyZShcIi4uL01hdGVyaWFsXCIpO1xudmFyIFJUTWF0aF8xID0gcmVxdWlyZShcIi4uL1JUTWF0aFwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9WZWN0b3JcIik7XG52YXIgUGxhbmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQbGFuZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQbGFuZShub3JtYWwsIHBvaW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBvaW50ID0gbmV3IFZlY3Rvcl8xLlZlY3RvcigwLCAwLCAwKTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKENvbG9yXzEuQ29sb3IuZ3JheSwgMCk7XG4gICAgICAgIHRoaXMubm9ybWFsID0gbm9ybWFsO1xuICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBQbGFuZS5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0RGF0YSA9IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgdmFyIGRpc3RhbmNlLCBoaXRQb2ludCwgdCA9IFZlY3Rvcl8xLlZlY3Rvci5kb3QoVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLCB0aGlzLm5vcm1hbCkgL1xuICAgICAgICAgICAgVmVjdG9yXzEuVmVjdG9yLmRvdChyYXkuZ2V0RGlyZWN0aW9uKCksIHRoaXMuZ2V0Tm9ybWFsKCkpO1xuICAgICAgICBpZiAodCA8PSBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhpdFBvaW50ID0gVmVjdG9yXzEuVmVjdG9yLmFkZChyYXkuZ2V0T3JpZ2luKCksIFZlY3Rvcl8xLlZlY3Rvci5zY2FsZShyYXkuZ2V0RGlyZWN0aW9uKCksIHQpKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLmdldExlbmd0aCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbCgpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBQbGFuZS5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgUGxhbmUucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsO1xuICAgIH07XG4gICAgUGxhbmUucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gUGxhbmU7XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuUGxhbmUgPSBQbGFuZTtcbiIsImltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4uL1JUTWF0aFwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFBsYW5lIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBwb2ludDogVmVjdG9yID0gbmV3IFZlY3RvcigwLCAwLCAwKTtcbiAgICBwcml2YXRlIG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChDb2xvci5ncmF5LCAwKTtcblxuICAgIGNvbnN0cnVjdG9yIChub3JtYWw6IFZlY3RvciwgcG9pbnQ/OiBWZWN0b3IpIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cbiAgICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnkge1xuICAgICAgICBsZXQgZGlzdGFuY2U6IG51bWJlcixcbiAgICAgICAgICAgIGhpdFBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICB0OiBudW1iZXIgPVxuICAgICAgICAgICAgVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50LFxuICAgICAgICAgICAgICAgICAgICByYXkuZ2V0T3JpZ2luKClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHRoaXMubm9ybWFsXG4gICAgICAgICAgICApIC9cbiAgICAgICAgICAgIFZlY3Rvci5kb3QoXG4gICAgICAgICAgICAgICAgcmF5LmdldERpcmVjdGlvbigpLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Tm9ybWFsKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgaWYgKHQgPD0gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGhpdFBvaW50ID0gVmVjdG9yLmFkZChcbiAgICAgICAgICAgIHJheS5nZXRPcmlnaW4oKSxcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgdFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWw7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFJUTWF0aF8xID0gcmVxdWlyZShcIi4uL1JUTWF0aFwiKTtcbnZhciBBYnN0cmFjdE9iamVjdF8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RPYmplY3RcIik7XG52YXIgQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9Db2xvclwiKTtcbnZhciBNYXRlcmlhbF8xID0gcmVxdWlyZShcIi4uL01hdGVyaWFsXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4uL1ZlY3RvclwiKTtcbnZhciBTcGhlcmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGhlcmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3BoZXJlKGNlbnRlciwgcmFkaXVzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsXzEuTWF0ZXJpYWwoQ29sb3JfMS5Db2xvci5yZWQsIDApO1xuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuICAgIFNwaGVyZS5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0RGF0YSA9IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgdmFyIGsgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLCBiID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLCBjID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCBrKSAtIE1hdGgucG93KHRoaXMucmFkaXVzLCAyKSwgZCA9IE1hdGgucG93KGIsIDIpIC0gYywgdDEsIHQyLCBtaW5ULCBtYXhULCBpbnRlcnNlY3Rpb25Qb2ludCwgaGl0UG9pbnQsIGRpc3RhbmNlO1xuICAgICAgICBpZiAoYiA+IDAgfHwgZCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtYXhUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKFZlY3Rvcl8xLlZlY3Rvci5zY2FsZShyYXkuZ2V0RGlyZWN0aW9uKCksIGludGVyc2VjdGlvblBvaW50KSwgcmF5LmdldE9yaWdpbigpKTtcbiAgICAgICAgZGlzdGFuY2UgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCByYXkuZ2V0T3JpZ2luKCkpLmdldExlbmd0aCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGl0UG9pbnQ6IGhpdFBvaW50LFxuICAgICAgICAgICAgbm9ybWFsOiB0aGlzLmdldE5vcm1hbChoaXRQb2ludCksXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFNwaGVyZS5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXROb3JtYWwgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5ub3JtYWxpemUoVmVjdG9yXzEuVmVjdG9yLnNjYWxlKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QocG9pbnQsIHRoaXMuY2VudGVyKSwgMSAvIHRoaXMucmFkaXVzKSk7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gU3BoZXJlO1xufSkoQWJzdHJhY3RPYmplY3RfMS5BYnN0cmFjdE9iamVjdCk7XG5leHBvcnRzLlNwaGVyZSA9IFNwaGVyZTtcbiIsImltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLi9SVE1hdGhcIjtcbmltcG9ydCB7IEFic3RyYWN0T2JqZWN0IH0gZnJvbSBcIi4vQWJzdHJhY3RPYmplY3RcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFNwaGVyZSBleHRlbmRzIEFic3RyYWN0T2JqZWN0IHtcbiAgICBwcml2YXRlIGNlbnRlcjogVmVjdG9yO1xuICAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBtYXRlcmlhbDogTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoQ29sb3IucmVkLCAwKTtcblxuICAgIGNvbnN0cnVjdG9yIChjZW50ZXI6IFZlY3RvciwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy5jZW50ZXIgPSBjZW50ZXI7XG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBrID0gVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMuY2VudGVyKSxcbiAgICAgICAgICAgIGI6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgcmF5LmdldERpcmVjdGlvbigpKSxcbiAgICAgICAgICAgIGM6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgaykgLSB0aGlzLnJhZGl1cyAqKiAyLFxuICAgICAgICAgICAgZDogbnVtYmVyID0gYiAqKiAyIC0gYyxcbiAgICAgICAgICAgIHQxOiBudW1iZXIsXG4gICAgICAgICAgICB0MjogbnVtYmVyLFxuICAgICAgICAgICAgbWluVDogbnVtYmVyLFxuICAgICAgICAgICAgbWF4VDogbnVtYmVyLFxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQ6IG51bWJlcixcbiAgICAgICAgICAgIGhpdFBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBkaXN0YW5jZTogbnVtYmVyO1xuXG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPj0gMCkge1xuICAgICAgICAgICAgdDEgPSAtYiArIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIHQyID0gLWIgLSBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICBtaW5UID0gTWF0aC5taW4odDEsIHQyKTtcbiAgICAgICAgICAgIG1heFQgPSBNYXRoLm1heCh0MSwgdDIpO1xuXG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25Qb2ludCA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGl0UG9pbnQgPSBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhpdFBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5nZXROb3JtYWwoaGl0UG9pbnQpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKHBvaW50OiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZShcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLmNlbnRlciksXG4gICAgICAgICAgICAgICAgMSAvIHRoaXMucmFkaXVzXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImV4cG9ydCBtb2R1bGUgUlRNYXRoIHtcbiAgICBleHBvcnQgY29uc3QgRVBTSUxPTiA9IDAuMDAxO1xufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL1ZlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgUmF5IHtcbiAgICBwcml2YXRlIG9yaWdpbjogVmVjdG9yO1xuICAgIHByaXZhdGUgZGlyZWN0aW9uOiAgVmVjdG9yO1xuICAgIHByaXZhdGUgaXRlcmF0aW9uOiBudW1iZXIgPSA1O1xuXG4gICAgY29uc3RydWN0b3IgKG9yaWdpbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3RvciwgaXRlcmF0aW9uPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemUoZGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoaXRlcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLml0ZXJhdGlvbiA9IGl0ZXJhdGlvbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRPcmlnaW4gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlyZWN0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZXJhdGlvbiAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIaXRQb2ludCAoZGlzdGFuY2U6IG51bWJlcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3IuYWRkKHRoaXMub3JpZ2luLCBWZWN0b3Iuc2NhbGUodGhpcy5kaXJlY3Rpb24sIGRpc3RhbmNlKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZXJhdGlvbiAoaXRlcmF0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSBpdGVyYXRpb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4vQ2FtZXJhXCI7XG5pbXBvcnQgeyBBYnN0cmFjdExpZ2h0IH0gZnJvbSBcIi4vTGlnaHRzL0Fic3RyYWN0TGlnaHRcIjtcblxuZXhwb3J0IGNsYXNzIFNjZW5lIHtcbiAgICBwcml2YXRlIGNhbWVyYTogQ2FtZXJhO1xuICAgIHByaXZhdGUgb2JqZWN0czogYW55W10gPSBbXTtcbiAgICBwcml2YXRlIGxpZ2h0czogQWJzdHJhY3RMaWdodFtdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvciAob2JqZWN0czogYW55KSB7XG4gICAgICAgIHRoaXMub2JqZWN0cyA9IG9iamVjdHMub2JqZWN0cztcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBvYmplY3RzLmNhbWVyYTtcbiAgICAgICAgdGhpcy5saWdodHMgPSBvYmplY3RzLmxpZ2h0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkT2JqZWN0IChvYmplY3Q6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDYW1lcmEgKCk6IENhbWVyYSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbWVyYTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGlnaHRzICgpOiBBYnN0cmFjdExpZ2h0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5saWdodHM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9iamVjdHMgKCk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cztcbiAgICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBuby1kZWZhdWx0LWxpYj1cInRydWVcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwibGliL2xpYi53ZWJ3b3JrZXIuZC50c1wiIC8+XG5cbmltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvQWJzdHJhY3RMaWdodFwiO1xuaW1wb3J0IHsgQWJzdHJhY3RPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RzL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9DYW1lcmFcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IEludGVyc2VjdFBvaW50IH0gZnJvbSBcIi4vSW50ZXJzZWN0UG9pbnRcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4vT2JqZWN0cy9QbGFuZVwiO1xuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuL09iamVjdHMvUG9seWdvblwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vUmF5XCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi9SVE1hdGhcIjtcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4vU2NlbmVcIjtcbmltcG9ydCB7IFNwaGVyZSB9IGZyb20gXCIuL09iamVjdHMvU3BoZXJlXCI7XG5pbXBvcnQgeyBTcGhlcmljYWxMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9TcGhlcmljYWxMaWdodFwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XG5cbmNsYXNzIFRyYWNlciB7XG4gICAgcHJpdmF0ZSBidWZmZXI6IENvbG9yW10gPSBbXTtcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXIgPSAyNTA7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlciA9IDI1MDtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjcmVlbldpZHRoICogdGhpcy5zY3JlZW5IZWlnaHQgKiAzOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goQ29sb3IuYmxhY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb3NpbmVTYW1wbGVIZW1pc3BoZXJlIChub3JtYWw6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIGxldCB1ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgbGV0IHYgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBsZXQgciA9IE1hdGguc3FydCh1KTtcbiAgICAgICAgbGV0IGFuZ2xlID0gMiAqIE1hdGguUEkgKiB2O1xuXG4gICAgICAgIGxldCBzZGlyLFxuICAgICAgICAgICAgdGRpcjtcblxuICAgICAgICBpZiAoTWF0aC5hYnMobm9ybWFsLmdldENvb3JkaW5hdGVzKClbJ3gnXSkgPCAwLjUpIHtcbiAgICAgICAgICAgIHNkaXIgPSBWZWN0b3IuY3Jvc3Mobm9ybWFsLCBuZXcgVmVjdG9yKDEsMCwwKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZGlyID0gVmVjdG9yLmNyb3NzKG5vcm1hbCwgbmV3IFZlY3RvcigwLDEsMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGRpciA9IFZlY3Rvci5jcm9zcyhub3JtYWwsIHNkaXIpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlKG5vcm1hbCwgIE1hdGguc3FydCgxIC0gdSkpLFxuICAgICAgICAgICAgVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUoc2RpciwgciAqIE1hdGguY29zKGFuZ2xlKSksXG4gICAgICAgICAgICAgICAgVmVjdG9yLnNjYWxlKHRkaXIsIHIgKiBNYXRoLnNpbihhbmdsZSkpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb2xvciAocmF5OiBSYXkpOiBDb2xvciB7XG4gICAgICAgIGxldCBpbnRlcnNlY3Rpb24gPSB0aGlzLnRyYWNlKHJheSksXG4gICAgICAgICAgICBkaWZmdXNlQ29sb3I6IENvbG9yID0gQ29sb3IuYmxhY2ssXG4gICAgICAgICAgICByZWZsZWN0Q29sb3I6IENvbG9yID0gQ29sb3IuYmxhY2ssXG4gICAgICAgICAgICByYXlJdGVyYXRpb246IG51bWJlciA9IHJheS5nZXRJdGVyYXRpb24oKTtcblxuICAgICAgICByYXkuc2V0SXRlcmF0aW9uKC0tcmF5SXRlcmF0aW9uKTtcblxuICAgICAgICBpZiAocmF5SXRlcmF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29sb3IuYmxhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWludGVyc2VjdGlvbi5nZXRJbnRlcnNlY3QoKSkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlmZnVzZUNvbG9yID0gdGhpcy5nZXREaWZmdXNlQ29sb3IocmF5LCBpbnRlcnNlY3Rpb24pO1xuICAgICAgICByZWZsZWN0Q29sb3IgPSB0aGlzLmdldFJlZmxlY3Rpb25Db2xvcihyYXksIGludGVyc2VjdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIGRpZmZ1c2VDb2xvci5hZGQocmVmbGVjdENvbG9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERpZmZ1c2VDb2xvciAocmF5OiBSYXksIGludGVyc2VjdDogYW55LCByZWN1cnNpdmU6IGJvb2xlYW4gPSB0cnVlKTogQ29sb3Ige1xuICAgICAgICBsZXQgbGFtYkNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHBob25nQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmFkaWFuY2VDb2xvcjogQ29sb3IsXG4gICAgICAgICAgICBwaXhlbENvbG9yOiBDb2xvciA9IENvbG9yLmJsYWNrLFxuICAgICAgICAgICAgcmFkaWFuY2VSYW5kb21EaXJlY3Rpb246IFZlY3RvcixcbiAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uOiBWZWN0b3IsXG4gICAgICAgICAgICBsaWdodFBvd2VyOiBudW1iZXIsXG4gICAgICAgICAgICByZWZsZWN0UGhvbmdWZWN0b3JEaXI6IFZlY3RvcixcbiAgICAgICAgICAgIGxhbWJDb3M6IG51bWJlcixcbiAgICAgICAgICAgIHBob25nQ29zOiBudW1iZXIsXG4gICAgICAgICAgICBwaG9uZzogbnVtYmVyO1xuXG4gICAgICAgIGZvciAobGV0IGxpZ2h0IG9mIHRoaXMuc2NlbmUuZ2V0TGlnaHRzKCkpIHtcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3QuZ2V0T3duZXIoKSBpbnN0YW5jZW9mIEFic3RyYWN0TGlnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0LmdldE93bmVyKClcbiAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpZ2h0UG93ZXIgPSB0aGlzLmdldExpZ2h0UG93ZXIoaW50ZXJzZWN0LCBsaWdodCk7XG5cbiAgICAgICAgICAgIGxhbWJDb2xvciA9IENvbG9yLmJsYWNrO1xuICAgICAgICAgICAgcGhvbmdDb2xvciA9IENvbG9yLmJsYWNrO1xuICAgICAgICAgICAgcmFkaWFuY2VDb2xvciA9IENvbG9yLmJsYWNrO1xuXG4gICAgICAgICAgICBsaWdodERpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0LmdldFBvc2l0aW9uKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG5cblxuICAgICAgICAgICAgLy9naVxuICAgICAgICAgICAgbGV0IHJhZGlhbmNlSW5SYW5kb21EaXJlY3Rpb246IENvbG9yO1xuXG4gICAgICAgICAgICByYWRpYW5jZVJhbmRvbURpcmVjdGlvbiA9IHRoaXMuY29zaW5lU2FtcGxlSGVtaXNwaGVyZShcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXROb3JtYWwoaW50ZXJzZWN0LmdldEhpdFBvaW50KCkpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByYWRpYW5jZUluUmFuZG9tRGlyZWN0aW9uID0gdGhpcy5nZXRDb2xvcihcbiAgICAgICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgcmFkaWFuY2VSYW5kb21EaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHJheS5nZXRJdGVyYXRpb24oKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJhZGlhbmNlQ29sb3IgPSByYWRpYW5jZUNvbG9yXG4gICAgICAgICAgICAgICAgLmFkZChyYWRpYW5jZUluUmFuZG9tRGlyZWN0aW9uKTtcblxuXG5cbiAgICAgICAgICAgIC8vIGxhbWJlcnRcblxuICAgICAgICAgICAgbGFtYkNvcyA9IC1WZWN0b3IuZG90KFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXROb3JtYWwoKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGFtYkNvbG9yID0gbGFtYkNvbG9yLmFkZChcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3RcbiAgICAgICAgICAgICAgICAgICAgLmdldE93bmVyKClcbiAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgLmFkZChyYWRpYW5jZUNvbG9yKVxuICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFBvd2VyICogbGFtYkNvcyAqIGludGVyc2VjdC5nZXRPd25lcigpLmdldE1hdGVyaWFsKCkuZ2V0TGFtYmVydENvZWZmKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cblxuXG4gICAgICAgICAgICAvLyBwaG9uZ1xuXG4gICAgICAgICAgICByZWZsZWN0UGhvbmdWZWN0b3JEaXIgPSBWZWN0b3IucmVmbGVjdChcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0Tm9ybWFsKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwaG9uZ0NvcyA9IC1WZWN0b3IuZG90KHJlZmxlY3RQaG9uZ1ZlY3RvckRpciwgcmF5LmdldERpcmVjdGlvbigpKTtcblxuICAgICAgICAgICAgaWYgKHBob25nQ29zID4gMCkge1xuICAgICAgICAgICAgICAgIHBob25nID0gTWF0aC5wb3cocGhvbmdDb3MsIDM1KTtcbiAgICAgICAgICAgICAgICBwaG9uZ0NvbG9yID0gcGhvbmdDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdC5nZXRPd25lcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tdWx0aXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFBvd2VyICogcGhvbmcgKiBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldFBob25nQ29lZmYoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9hbWJpZW50IG9jY2x1c2lvblxuICAgICAgICAgICAgLypsZXQgYyA9IDA7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hb1NhbXBsZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBkaXIgPSB0aGlzLmNvc2luZVNhbXBsZUhlbWlzcGhlcmUoaW50ZXJzZWN0LmdldE93bmVyKCkuZ2V0Tm9ybWFsKGludGVyc2VjdC5nZXRIaXRQb2ludCgpKSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgYW9JbnRlcnNlY3QgPSB0aGlzLnRyYWNlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWFvSW50ZXJzZWN0LmdldEludGVyc2VjdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChhb0ludGVyc2VjdC5nZXREaXN0YW5jZUZyb21PcmlnaW4oKSA+IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjKys7XG4gICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgLypwaXhlbENvbG9yID0gcGl4ZWxDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgbGFtYkNvbG9yLm11bHRpcGxlKENvbG9yLndoaXRlLnNjYWxlZCgxIC0gKGMgKiAwLjY3IC8gdGhpcy5hb1NhbXBsZXMpKSkuYWRkKHBob25nQ29sb3IpXG4gICAgICAgICAgICApOyovXG5cbiAgICAgICAgICAgIHBpeGVsQ29sb3IgPSBwaXhlbENvbG9yLmFkZChcbiAgICAgICAgICAgICAgICBsYW1iQ29sb3IuYWRkKHBob25nQ29sb3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBpeGVsQ29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRSZWZsZWN0aW9uQ29sb3IgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSk6IGFueSB7XG4gICAgICAgIGxldCByZWZsZWN0aW9uQ29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmVmbGVjdGlvblZhbHVlOiBudW1iZXIgPSBpbnRlcnNlY3QuZ2V0T3duZXIoKS5nZXRNYXRlcmlhbCgpLmdldFJlZmxlY3Rpb25WYWx1ZSgpLFxuICAgICAgICAgICAgcmVmbGVjdGVkUmF5OiBWZWN0b3I7XG5cbiAgICAgICAgaWYgKHJlZmxlY3Rpb25WYWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9yLmJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVmbGVjdGVkUmF5ID0gVmVjdG9yLnJlZmxlY3QoXG4gICAgICAgICAgICByYXkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICBpbnRlcnNlY3QuZ2V0Tm9ybWFsKClcbiAgICAgICAgKTtcblxuICAgICAgICByZWZsZWN0aW9uQ29sb3IgPSB0aGlzLmdldENvbG9yKFxuICAgICAgICAgICAgbmV3IFJheShpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSwgcmVmbGVjdGVkUmF5LCByYXkuZ2V0SXRlcmF0aW9uKCkpXG4gICAgICAgICkuc2NhbGVkKHJlZmxlY3Rpb25WYWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlZmxlY3Rpb25Db2xvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBlcnNwZWN0aXZlVmVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBsZXQgY2FtZXJhOiBDYW1lcmEgPSB0aGlzLnNjZW5lLmdldENhbWVyYSgpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplKFxuICAgICAgICAgICAgVmVjdG9yLmFkZChcbiAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0Rm9yd2FyZFZlY3RvcigpLFxuICAgICAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5nZXRSaWdodFZlY3RvcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnJlY2VudGVyWCh4KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0VXBWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclkoeSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExpZ2h0UG93ZXIgKGludGVyc2VjdDogYW55LCBsaWdodDogQWJzdHJhY3RMaWdodCk6IG51bWJlciB7XG4gICAgICAgIGxldCBsaWdodFBvd2VyID0gbGlnaHQuZ2V0UG93ZXIoKSxcbiAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIHNoYWRvd1JheTogSW50ZXJzZWN0UG9pbnQsXG4gICAgICAgICAgICByZXN1bHRQb3dlcjogbnVtYmVyID0gMDtcblxuICAgICAgICBsaWdodFJhbmRvbVBvaW50ID0gbGlnaHQuZ2V0UmFuZG9tUG9pbnQoKTtcblxuICAgICAgICBzaGFkb3dSYXkgPSB0aGlzLnRyYWNlKFxuICAgICAgICAgICAgbmV3IFJheShcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKSxcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0LmdldEhpdFBvaW50KClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2hhZG93UmF5LmdldEludGVyc2VjdCgpICYmXG4gICAgICAgICAgICBzaGFkb3dSYXkuZ2V0T3duZXIoKSBpbnN0YW5jZW9mIEFic3RyYWN0TGlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXN1bHRQb3dlciArPSAoXG4gICAgICAgICAgICAgICAgbGlnaHRQb3dlciAtXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3QuZ2V0SGl0UG9pbnQoKVxuICAgICAgICAgICAgICAgICAgICApLmdldExlbmd0aCgpICogKGxpZ2h0UG93ZXIgLyBsaWdodC5nZXRGYWRlUmFkaXVzKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRQb3dlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYWNlIChyYXk6IFJheSk6IEludGVyc2VjdFBvaW50IHtcbiAgICAgICAgbGV0IGludGVyc2VjdGlvbiA9IG5ldyBJbnRlcnNlY3RQb2ludCgpLFxuICAgICAgICAgICAgaW50ZXJzZWN0RGF0YTogYW55LFxuICAgICAgICAgICAgbWluRGlzdGFuY2U6IG51bWJlciA9IEluZmluaXR5LFxuICAgICAgICAgICAgc2NlbmVPYmplY3RzOiBBYnN0cmFjdE9iamVjdFtdJkFic3RyYWN0TGlnaHRbXSA9IHRoaXMuc2NlbmUuZ2V0T2JqZWN0cygpLmNvbmNhdCh0aGlzLnNjZW5lLmdldExpZ2h0cygpKTtcblxuICAgICAgICBmb3IgKGxldCBvYmplY3Qgb2Ygc2NlbmVPYmplY3RzKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3REYXRhID0gb2JqZWN0LmdldEludGVyc2VjdERhdGEocmF5KTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGEgJiZcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddIDwgbWluRGlzdGFuY2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXTtcblxuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5zZXRJbnRlcnNlY3QoKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0SGl0UG9pbnQoaW50ZXJzZWN0RGF0YVsnaGl0UG9pbnQnXSk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldE5vcm1hbChpbnRlcnNlY3REYXRhWydub3JtYWwnXSk7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnNldERpc3RhbmNlRnJvbU9yaWdpbihpbnRlcnNlY3REYXRhWydkaXN0YW5jZSddKTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uc2V0T3duZXIob2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlciAoc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmFuZG9NdWx0aXBsaWVyID0gMC41O1xuXG4gICAgICAgIGxldCBidWZmZXI6IG51bWJlcltdLFxuICAgICAgICAgICAgY29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmFuZDogbnVtYmVyLFxuICAgICAgICAgICAgcmF5OiBSYXk7XG5cbiAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbkhlaWdodCA9IHNjcmVlbkhlaWdodDtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgYnVmZmVyID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGl0ZXJhdGlvbiA9IDA7IGl0ZXJhdGlvbiA8IDE7IGl0ZXJhdGlvbisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnNjcmVlbkhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5zY3JlZW5XaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5kID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5kICs9IE1hdGgucmFuZG9tKCkgKiByYW5kb011bHRpcGxpZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5kIC09IE1hdGgucmFuZG9tKCkgKiByYW5kb011bHRpcGxpZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJheSA9IG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5nZXRDYW1lcmEoKS5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGVyc3BlY3RpdmVWZWN0b3IoeCArIHJhbmQsIHkgKyByYW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaV0gPSBDb2xvci5ibGFjay5hZGQodGhpcy5nZXRDb2xvcihyYXkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29tcG9uZW50IGluIHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXVtjb21wb25lbnRdID0gQ29sb3Iuc1JHQkVuY29kZSh0aGlzLmJ1ZmZlcltpXVtjb21wb25lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2godGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsncmVkJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2godGhpcy5idWZmZXJbaV0uZ2V0Q29sb3IoKVsnZ3JlZW4nXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaCh0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydibHVlJ10pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcihsZXQgIGkgPSAwOyBpIDwgdGhpcy5idWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydyZWQnXSA9IDAuMDtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpXS5nZXRDb2xvcigpWydncmVlbiddID0gMC4wO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2ldLmdldENvbG9yKClbJ2JsdWUnXSA9IDAuMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShidWZmZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNldFNjZW5lIChzY2VuZTogU2NlbmUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cbn1cblxub25tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcblxuICAgIGlmICh0eXBlb2YoZGF0YSkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoJ1snK2RhdGErJ10nKTtcbiAgICB9XG5cbiAgICBsZXQgdHJhY2VyID0gbmV3IFRyYWNlcigpO1xuXG4gICAgdHJhY2VyLnNldFNjZW5lKFxuICAgICAgICBuZXcgU2NlbmUoe1xuICAgICAgICAgICAgY2FtZXJhOiBuZXcgQ2FtZXJhKFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgLTY5OSksXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwLCAxKSxcbiAgICAgICAgICAgICAgICBkYXRhWzBdLFxuICAgICAgICAgICAgICAgIGRhdGFbMV1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBsaWdodHM6IFtcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJpY2FsTGlnaHQobmV3IFZlY3RvciAoMCwgNjAwLCAwKSwgMSwgMTAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLndoaXRlKSksXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyaWNhbExpZ2h0KG5ldyBWZWN0b3IgKDAsIDAsIDApLCAwLjYsIDE1MClcbiAgICAgICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjM1LCAyMDApKSkpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgb2JqZWN0czogW1xuICAgICAgICAgICAgICAgIG5ldyBQbGFuZShuZXcgVmVjdG9yKDAsIDEsIDApLCBuZXcgVmVjdG9yICgwLCAtNzAwLCAwKSkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLndoaXRlLCAwKSksXG4gICAgICAgICAgICAgICAgbmV3IFBsYW5lKG5ldyBWZWN0b3IoMCwgLTEsIDApLCBuZXcgVmVjdG9yICgwLCA3MDAsIDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUsIDApKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigtMSwgMCwgMCksIG5ldyBWZWN0b3IgKDcwMCwgMCwgMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibHVlLCAwKSksXG4gICAgICAgICAgICAgICAgbmV3IFBsYW5lKG5ldyBWZWN0b3IoMSwgMCwgMCksIG5ldyBWZWN0b3IgKC03MDAsIDAsIDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3IucmVkLCAwKSksXG4gICAgICAgICAgICAgICAgbmV3IFBsYW5lKG5ldyBWZWN0b3IoMCwgMCwgLTEpLCBuZXcgVmVjdG9yICgwLCAwLCA3MDApKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUsIDApKSxcbiAgICAgICAgICAgICAgICBuZXcgUGxhbmUobmV3IFZlY3RvcigwLCAwLCAxKSwgbmV3IFZlY3RvciAoMCwgMCwgLTcwMCkpLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibGFjaywgMCkpLFxuICAgICAgICAgICAgICAgIC8vIGJvdHRvbSBwbGFuZVxuICAgICAgICAgICAgICAgIC8qbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLndoaXRlLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLFxuICAgICAgICAgICAgICAgIC8vIGZyb250IHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUsIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gdG9wIHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwoQ29sb3Iud2hpdGUsIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy9yaWdodCBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmJsdWUpLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy9sZWZ0IHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCAtNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLnJlZCwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyBiYWNrIHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCAtNzAwKVxuICAgICAgICAgICAgICAgICkuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKENvbG9yLmJsYWNrLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSkpLCovXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyZShuZXcgVmVjdG9yKC0yNTAsIC01MDAsIDQ1MCksIDIwMClcbiAgICAgICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ibGFjaywgMSkpLFxuICAgICAgICAgICAgICAgIG5ldyBTcGhlcmUobmV3IFZlY3RvcigyNTAsIC01MDAsIDQwMCksIDIwMClcbiAgICAgICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChDb2xvci5ncmVlbiwgMCkpXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHRyYWNlci5yZW5kZXIoZGF0YVswXSwgZGF0YVsxXSk7XG59OyIsImV4cG9ydCBjbGFzcyBWZWN0b3Ige1xuICAgIHByaXZhdGUgeDogbnVtYmVyO1xuICAgIHByaXZhdGUgeTogbnVtYmVyO1xuICAgIHByaXZhdGUgejogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy56ID0gejtcbiAgICB9XG5cbiAgICBnZXRDb29yZGluYXRlcyAoKToge3g6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXJ9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgICAgIHo6IHRoaXMuelxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc0FycmF5ICgpOiBudW1iZXJbXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0aGlzLngsXG4gICAgICAgICAgICB0aGlzLnksXG4gICAgICAgICAgICB0aGlzLnpcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGVuZ3RoICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDIgKyB0aGlzLnogKiogMik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzY2FsZSAodmVjdG9yOiBWZWN0b3IsIG11bHRpcGxpZXI6IG51bWJlcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHZlY3Rvci54ICogbXVsdGlwbGllciwgdmVjdG9yLnkgKiBtdWx0aXBsaWVyLCB2ZWN0b3IueiAqIG11bHRpcGxpZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYWRkICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHZlY3RvcjEueCArIHZlY3RvcjIueCwgdmVjdG9yMS55ICsgdmVjdG9yMi55LCB2ZWN0b3IxLnogKyB2ZWN0b3IyLnopO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc3Vic3RyYWN0ICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHZlY3RvcjEueCAtIHZlY3RvcjIueCwgdmVjdG9yMS55IC0gdmVjdG9yMi55LCB2ZWN0b3IxLnogLSB2ZWN0b3IyLnopO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZG90ICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB2ZWN0b3IxLnggKiB2ZWN0b3IyLnggKyB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnkgKyB2ZWN0b3IxLnogKiB2ZWN0b3IyLno7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjcm9zcyAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHZlY3RvcjEueSAqIHZlY3RvcjIueiAtIHZlY3RvcjEueiAqIHZlY3RvcjIueSxcbiAgICAgICAgICAgIHZlY3RvcjEueiAqIHZlY3RvcjIueCAtIHZlY3RvcjEueCAqIHZlY3RvcjIueixcbiAgICAgICAgICAgIHZlY3RvcjEueCAqIHZlY3RvcjIueSAtIHZlY3RvcjEueSAqIHZlY3RvcjIueFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgbm9ybWFsaXplICh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iuc2NhbGUodmVjdG9yLCAxIC8gdmVjdG9yLmdldExlbmd0aCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHBvdyAodmVjdG9yOiBWZWN0b3IsIHZhbHVlOiBudW1iZXIpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHZlY3Rvci55ICoqIHZhbHVlLFxuICAgICAgICAgICAgdmVjdG9yLnogKiogdmFsdWUsXG4gICAgICAgICAgICB2ZWN0b3IueCAqKiB2YWx1ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaW52ZXJzZSAodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLnNjYWxlKHZlY3RvciwgLTEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVmbGVjdCAodmVjdG9yOiBWZWN0b3IsIG5vcm1hbDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgbGV0IGYgPSAyICogVmVjdG9yLmRvdCh2ZWN0b3IsIG5vcm1hbCk7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICB2ZWN0b3IsXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGUobm9ybWFsLCBmKVxuICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==
