(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TraceWorker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Vector_1=require("./Vector"),Camera=function(){function t(t,r,e,o){this.position=t,this.direction=Vector_1.Vector.normalized(r),this.screenWidth=e,this.screenHeight=o,this.forwardVector=Vector_1.Vector.normalized(Vector_1.Vector.substract(this.direction,this.position)),this.rightVector=Vector_1.Vector.scaled(Vector_1.Vector.normalized(Vector_1.Vector.cross(this.forwardVector,new Vector_1.Vector(0,-1,0))),3),this.upVector=Vector_1.Vector.scaled(Vector_1.Vector.normalized(Vector_1.Vector.cross(this.forwardVector,this.rightVector)),3)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getPosition=function(){return this.position},t.prototype.getForwardVector=function(){return this.forwardVector},t.prototype.getRightVector=function(){return this.rightVector},t.prototype.getUpVector=function(){return this.upVector},t.prototype.recenterX=function(t){var r=this.screenHeight/this.screenWidth*2;return(t-this.screenWidth/2)/r/this.screenWidth},t.prototype.recenterY=function(t){return-(t-this.screenHeight/2)/2/this.screenHeight},t}();exports.Camera=Camera;


},{"./Vector":15}],2:[function(require,module,exports){
var FloatColor_1=require("./FloatColor"),Color=function(){function o(o){this.red=o.red,this.green=o.green,this.blue=o.blue}return o.prototype.add=function(e){return new o(new FloatColor_1.FloatColor(this.red+e.red,this.green+e.green,this.blue+e.blue))},o.prototype.substract=function(e){return new o(new FloatColor_1.FloatColor(this.red-e.red,this.green-e.green,this.blue-e.blue))},o.prototype.scaled=function(e){return new o(new FloatColor_1.FloatColor(this.red*e,this.green*e,this.blue*e))},o.prototype.multiple=function(e){return new o(new FloatColor_1.FloatColor(this.red*e.red,this.green*e.green,this.blue*e.blue))},o.prototype.divide=function(e){return new o(new FloatColor_1.FloatColor(this.red/e,this.green/e,this.blue/e))},o.sRGBEncode=function(o){return.0031308>=o?12.92*o:1.055*Math.pow(o,.4166667)-.055},o.toRGB=function(e){return{red:Math.floor(255*o.clampColor(e.red)),green:Math.floor(255*o.clampColor(e.green)),blue:Math.floor(255*o.clampColor(e.blue))}},o.clampColor=function(o){return o>1?1:o},o}();exports.Color=Color;


},{"./FloatColor":3}],3:[function(require,module,exports){
var FloatColor=function(){function o(o,t,r){this.red=o,this.green=t,this.blue=r}return o}();exports.FloatColor=FloatColor;


},{}],4:[function(require,module,exports){
var RGBColor=function(){function o(t,r,n){this.red=o.toFloat(t),this.green=o.toFloat(r),this.blue=o.toFloat(n)}return o.toFloat=function(o){return 0===o?o:o/255},o}();exports.RGBColor=RGBColor;


},{}],5:[function(require,module,exports){
var AbstractLight=function(){function t(){}return t}();exports.AbstractLight=AbstractLight;


},{}],6:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},AbstractLight_1=require("./AbstractLight"),Color_1=require("./../Color/Color"),Material_1=require("./../Material"),RGBColor_1=require("./../Color/RGBColor"),RTMath_1=require("./../RTMath"),Vector_1=require("./../Vector"),SphericalLight=function(t){function r(r,e,o){t.call(this),this.radius=50,this.fadeRadius=2500,this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(244,244,244)),0).setLambertCoeff(1),this.type="light",this.position=r,this.power=e,o&&(this.radius=o)}return __extends(r,t),r.prototype.getFadeRadius=function(){return this.radius+this.fadeRadius},r.prototype.getPosition=function(){return this.position},r.prototype.getPower=function(){return this.power},r.prototype.getRadius=function(){return this.radius},r.prototype.getRandomPoint=function(){var t=Math.random(),r=Math.random(),e=2*Math.PI*t,o=Math.pow(Math.cos(2*r-1),-1);return new Vector_1.Vector(this.radius*Math.cos(e)*Math.sin(o),this.radius*Math.sin(e)*Math.sin(o),this.radius*Math.cos(o))},r.prototype.getIntersectData=function(t){var r,e,o,i,a,s,n,h=Vector_1.Vector.substract(t.getOrigin(),this.position),c=Vector_1.Vector.dot(h,t.getDirection()),u=Vector_1.Vector.dot(h,h)-Math.pow(this.radius,2),p=Math.pow(c,2)-u;if(!(c>0||0>p||p>=0&&(r=-c+Math.sqrt(p),e=-c-Math.sqrt(p),o=Math.min(r,e),i=Math.max(r,e),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return s=Vector_1.Vector.add(Vector_1.Vector.scaled(t.getDirection(),a),t.getOrigin()),n=Vector_1.Vector.substract(s,t.getOrigin()).getLength(),{point:s,distance:n}},r.prototype.getNormal=function(t){return Vector_1.Vector.normalized(Vector_1.Vector.scaled(Vector_1.Vector.substract(t,this.position),1/this.radius))},r.prototype.getMaterial=function(){return this.material},r.prototype.getType=function(){return this.type},r.prototype.setMaterial=function(t){return this.material=t,this},r}(AbstractLight_1.AbstractLight);exports.SphericalLight=SphericalLight;


},{"./../Color/Color":2,"./../Color/RGBColor":4,"./../Material":7,"./../RTMath":11,"./../Vector":15,"./AbstractLight":5}],7:[function(require,module,exports){
var Color_1=require("./Color/Color"),RGBColor_1=require("./Color/RGBColor"),Material=function(){function o(o,t){void 0===o&&(o=new Color_1.Color(new RGBColor_1.RGBColor(255,0,0))),void 0===t&&(t=0),this.lambertCoeff=.5,this.phongCoeff=.5,this.reflectionCoeff=0,this.color=o,this.reflectionCoeff=t}return o.prototype.getColor=function(){return this.color},o.prototype.getLambertCoeff=function(){return this.lambertCoeff},o.prototype.getPhongCoeff=function(){return this.phongCoeff},o.prototype.getReflectionValue=function(){return this.reflectionCoeff},o.prototype.setLambertCoeff=function(o){return this.lambertCoeff=o,this.phongCoeff=1-o,this},o.prototype.setPhongCoeff=function(o){return this.phongCoeff=o,this.lambertCoeff=1-o,this},o}();exports.Material=Material;


},{"./Color/Color":2,"./Color/RGBColor":4}],8:[function(require,module,exports){
var AbstractObject=function(){function t(){}return t}();exports.AbstractObject=AbstractObject;


},{}],9:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RGBColor_1=require("../Color/RGBColor"),Vector_1=require("../Vector"),Polygon=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];t.call(this),this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(115,115,115)),0),this.type="surface",this.vertices=e}return __extends(e,t),e.prototype.getIntersectData=function(t){var r,o,c,i,s,n=this.getNormal();if(o=Vector_1.Vector.dot(this.vertices[0],n),s=Vector_1.Vector.dot(n,t.getDirection()),i=-Vector_1.Vector.dot(n,t.getOrigin())+o,r=i/s,!(r<RTMath_1.RTMath.EPSILON)){t.setDistance(r),c=t.getHitPoint();for(var a=0,l=this.vertices.length;l>a;a++){var u=this.vertices[a],h=void 0;if(h=a===l-1?this.vertices[0]:this.vertices[a+1],!e.checkSameClockDir(Vector_1.Vector.substract(h,u),Vector_1.Vector.substract(c,u),this.getNormal()))return}return r=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{point:c,distance:r}}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(){var t=Vector_1.Vector.substract(this.vertices[2],this.vertices[0]),e=Vector_1.Vector.substract(this.vertices[1],this.vertices[0]);return Vector_1.Vector.normalized(Vector_1.Vector.cross(t,e))},e.prototype.getType=function(){return this.type},e.prototype.setMaterial=function(t){return this.material=t,this},e.checkSameClockDir=function(t,e,r){var o=Vector_1.Vector.cross(e,t);return Vector_1.Vector.dot(o,r)>=0},e}(AbstractObject_1.AbstractObject);exports.Polygon=Polygon;


},{"../Color/Color":2,"../Color/RGBColor":4,"../Material":7,"../RTMath":11,"../Vector":15,"./AbstractObject":8}],10:[function(require,module,exports){
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},RTMath_1=require("../RTMath"),AbstractObject_1=require("./AbstractObject"),Color_1=require("../Color/Color"),Material_1=require("../Material"),RGBColor_1=require("../Color/RGBColor"),Vector_1=require("../Vector"),Sphere=function(t){function e(e,r){t.call(this),this.material=new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,0,0)),0),this.type="surface",this.center=e,this.radius=r}return __extends(e,t),e.prototype.getIntersectData=function(t){var e,r,o,i,a,c,n,s=Vector_1.Vector.substract(t.getOrigin(),this.center),h=Vector_1.Vector.dot(s,t.getDirection()),u=Vector_1.Vector.dot(s,s)-Math.pow(this.radius,2),l=Math.pow(h,2)-u;if(!(h>0||0>l||l>=0&&(e=-h+Math.sqrt(l),r=-h-Math.sqrt(l),o=Math.min(e,r),i=Math.max(e,r),a=o>RTMath_1.RTMath.EPSILON?o:i,a<RTMath_1.RTMath.EPSILON)))return c=Vector_1.Vector.add(Vector_1.Vector.scaled(t.getDirection(),a),t.getOrigin()),n=Vector_1.Vector.substract(c,t.getOrigin()).getLength(),{point:c,distance:n}},e.prototype.getMaterial=function(){return this.material},e.prototype.getNormal=function(t){return Vector_1.Vector.normalized(Vector_1.Vector.scaled(Vector_1.Vector.substract(t,this.center),1/this.radius))},e.prototype.getType=function(){return this.type},e.prototype.setMaterial=function(t){return this.material=t,this},e}(AbstractObject_1.AbstractObject);exports.Sphere=Sphere;


},{"../Color/Color":2,"../Color/RGBColor":4,"../Material":7,"../RTMath":11,"../Vector":15,"./AbstractObject":8}],11:[function(require,module,exports){
var RTMath;!function(t){t.EPSILON=.001}(RTMath=exports.RTMath||(exports.RTMath={}));


},{}],12:[function(require,module,exports){
var Vector_1=require("./Vector"),Ray=function(){function t(t,i,e){this.distance=0,this.iteration=8,this.origin=t,this.direction=Vector_1.Vector.normalized(i),e&&(this.iteration=e)}return t.prototype.getDirection=function(){return this.direction},t.prototype.getDistance=function(){return this.distance},t.prototype.getIteration=function(){return this.iteration},t.prototype.getOrigin=function(){return this.origin},t.prototype.getHitPoint=function(){return Vector_1.Vector.add(this.origin,Vector_1.Vector.scaled(this.direction,this.distance))},t.prototype.setDistance=function(t){this.distance=t},t.prototype.setIteration=function(t){this.iteration=t},t}();exports.Ray=Ray;


},{"./Vector":15}],13:[function(require,module,exports){
var Scene=function(){function t(t){this.objects=[],this.lights=[],this.objects=t.objects,this.camera=t.camera,this.lights=t.lights}return t.prototype.addObject=function(t){this.objects.push(t)},t.prototype.getCamera=function(){return this.camera},t.prototype.getLights=function(){return this.lights},t.prototype.getObjects=function(){return this.objects},t}();exports.Scene=Scene;


},{}],14:[function(require,module,exports){
var Camera_1=require("./Camera"),Color_1=require("./Color/Color"),Ray_1=require("./Ray"),RGBColor_1=require("./Color/RGBColor"),Scene_1=require("./Scene"),Sphere_1=require("./Objects/Sphere"),Vector_1=require("./Vector"),SphericalLight_1=require("./Lights/SphericalLight"),Material_1=require("./Material"),Polygon_1=require("./Objects/Polygon"),Tracer=function(){function e(){this.pixelSamples=4,this.shadowSamples=65,this.giSamples=35,this.screenWidth=250,this.screenHeight=250}return e.prototype.getColor=function(e,o){void 0===o&&(o=!0);var r=this.trace(e),t=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0));return null===r.owner?new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)):(t=this.getDiffuseColor(e,r,o),o&&(n=this.getReflectionColor(e,r)),t.add(n))},e.prototype.getDiffuseColor=function(e,o,r){void 0===r&&(r=!0);for(var t,n,a,l,c,i,_,s,w,V,C=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),g=0,h=this.scene.getLights();g<h.length;g++){var d=h[g];if("light"===o.ownerType)return o.owner.getMaterial().getColor();if(i=this.getLightPower(o,d),t=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),l=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),c=Vector_1.Vector.normalized(Vector_1.Vector.substract(o.point,d.getPosition())),s=-Vector_1.Vector.dot(c,o.normal),t=t.add(o.owner.getMaterial().getColor().multiple(d.getMaterial().getColor().scaled(i*s*o.owner.getMaterial().getLambertCoeff()))),r)for(var p=function(e){var o,r,t,n=Math.random(),a=Math.random(),l=Math.sqrt(n),c=Math.sqrt(1-n),i=2*Math.PI*a,_=new Vector_1.Vector(l*Math.cos(i),c,l*Math.sin(i));return t=0==e.getCoordinates().x?new Vector_1.Vector(1,0,0):Vector_1.Vector.normalized(new Vector_1.Vector(e.getCoordinates().z,0,-e.getCoordinates().x)),r=Vector_1.Vector.inverse(Vector_1.Vector.cross(t,e)),o=new Vector_1.Vector(Vector_1.Vector.dot(t,_),Vector_1.Vector.dot(e,_),Vector_1.Vector.dot(r,_)),Vector_1.Vector.normalized(o)},R=0;R<this.giSamples;++R){var M=void 0,u=void 0;a=p(o.owner.getNormal(o.point)),M=this.getColor(new Ray_1.Ray(o.point,a),!1),u=Vector_1.Vector.dot(a,o.owner.getNormal(o.point)),n=n.add(o.owner.getMaterial().getColor().divide(Math.PI).multiple(M.scaled(u)))}_=Vector_1.Vector.reflect(c,o.normal),w=-Vector_1.Vector.dot(_,e.getDirection()),w>0&&(V=Math.pow(w,35),l=l.add(o.owner.getMaterial().getColor().multiple(d.getMaterial().getColor().scaled(i*V*o.owner.getMaterial().getPhongCoeff())))),C=C.add(t.add(n.divide(this.giSamples))).add(l)}return C},e.prototype.getReflectionColor=function(e,o){var r,t,n=e.getIteration(),a=o.owner.getMaterial().getReflectionValue();return e.setIteration(--n),0===n||0===a?new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)):(t=Vector_1.Vector.reflect(e.getDirection(),o.normal),r=this.getColor(new Ray_1.Ray(o.point,t,n)).scaled(a))},e.prototype.getPerspectiveVector=function(e,o){var r=this.scene.getCamera();return Vector_1.Vector.normalized(Vector_1.Vector.add(r.getForwardVector(),Vector_1.Vector.add(Vector_1.Vector.scaled(r.getRightVector(),r.recenterX(e)),Vector_1.Vector.scaled(r.getUpVector(),r.recenterY(o)))))},e.prototype.getLightPower=function(e,o){for(var r,t,n=o.getPower(),a=0,l=0;l<this.shadowSamples;l++)r=o.getRandomPoint(),t=this.trace(new Ray_1.Ray(e.point,Vector_1.Vector.substract(Vector_1.Vector.substract(o.getPosition(),r),e.point))),null!==t.point&&t.owner===o&&(a+=(n-Vector_1.Vector.substract(Vector_1.Vector.substract(o.getPosition(),r),e.point).getLength()*(n/o.getFadeRadius()))/this.shadowSamples);return a},e.prototype.trace=function(e){for(var o,r={distance:0,point:null,normal:null,owner:null,ownerType:null},t=this.scene.getObjects().concat(this.scene.getLights()),n=0,a=t;n<a.length;n++){var l=a[n];o=l.getIntersectData(e),o&&o.distance>0&&(null===r.owner||o.distance<r.distance)&&(r.distance=o.distance,r.point=o.point,r.owner=l,r.ownerType=l.getType(),r.normal=r.owner.getNormal(r.point))}return r},e.prototype.render=function(e,o,r,t){var n,a,l,c,i=.5;this.screenWidth=e,this.screenHeight=o,n=new Color_1.Color(new RGBColor_1.RGBColor(0,0,0));for(var _=0;_<this.pixelSamples;_++)a=0,this.pixelSamples>1&&(_%2?a+=Math.random()*i:a-=Math.random()*i),l=new Ray_1.Ray(this.scene.getCamera().getPosition(),this.getPerspectiveVector(r+a,t+a)),n=n.add(this.getColor(l));n=n.divide(this.pixelSamples);for(var s in n)n[s]=Color_1.Color.sRGBEncode(n[s]);c=Color_1.Color.toRGB(n),self.postMessage([r,t,c.red,c.green,c.blue])},e.prototype.setScene=function(e){this.scene=e},e}();onmessage=function(e){var o=e.data;"string"==typeof o&&(o=JSON.parse("["+o+"]"));var r=new Tracer;r.setScene(new Scene_1.Scene({camera:new Camera_1.Camera(new Vector_1.Vector(0,0,-699),new Vector_1.Vector(0,0,1),o[0],o[1]),lights:[new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,640,0),.7,50).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)))),new SphericalLight_1.SphericalLight(new Vector_1.Vector(0,0,0),.7,150).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,235,200))))],objects:[new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(-700,-700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(-700,700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(-700,700,700),new Vector_1.Vector(700,700,700),new Vector_1.Vector(700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(255,255,255)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,700),new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(700,700,-700),new Vector_1.Vector(700,700,700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(79,166,242)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,-700,700),new Vector_1.Vector(-700,700,700),new Vector_1.Vector(-700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(245,130,130)),0).setLambertCoeff(1)),new Polygon_1.Polygon(new Vector_1.Vector(700,-700,-700),new Vector_1.Vector(-700,-700,-700),new Vector_1.Vector(-700,700,-700),new Vector_1.Vector(700,700,-700)).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),0).setLambertCoeff(1)),new Sphere_1.Sphere(new Vector_1.Vector(-250,-500,450),200).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,0,0)),1)),new Sphere_1.Sphere(new Vector_1.Vector(250,-500,400),200).setMaterial(new Material_1.Material(new Color_1.Color(new RGBColor_1.RGBColor(0,255,0)),0))]})),r.render(o[0],o[1],o[2],o[3])};


},{"./Camera":1,"./Color/Color":2,"./Color/RGBColor":4,"./Lights/SphericalLight":6,"./Material":7,"./Objects/Polygon":9,"./Objects/Sphere":10,"./Ray":12,"./Scene":13,"./Vector":15}],15:[function(require,module,exports){
var Vector=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}return t.prototype.getCoordinates=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.asArray=function(){return[this.x,this.y,this.z]},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.add=function(n,r){return new t(n.x+r.x,n.y+r.y,n.z+r.z)},t.substract=function(n,r){return new t(n.x-r.x,n.y-r.y,n.z-r.z)},t.scaled=function(n,r){return new t(n.x*r,n.y*r,n.z*r)},t.cross=function(n,r){return new t(n.y*r.z-n.z*r.y,n.z*r.x-n.x*r.z,n.x*r.y-n.y*r.x)},t.inverse=function(n){return t.scaled(n,-1)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.normalized=function(n){return t.scaled(n,1/n.getLength())},t.reflect=function(n,r){var e=2*t.dot(n,r);return t.substract(n,t.scaled(r,e))},t}();exports.Vector=Vector;


},{}]},{},[14])(14)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9zb3VyY2UvQ2FtZXJhLnRzIiwiL3NvdXJjZS9Db2xvci9Db2xvci50cyIsIi9zb3VyY2UvQ29sb3IvRmxvYXRDb2xvci50cyIsIi9zb3VyY2UvQ29sb3IvUkdCQ29sb3IudHMiLCIvc291cmNlL0xpZ2h0cy9BYnN0cmFjdExpZ2h0LnRzIiwiL3NvdXJjZS9MaWdodHMvU3BoZXJpY2FsTGlnaHQuanMiLCIvc291cmNlL0xpZ2h0cy9TcGhlcmljYWxMaWdodC50cyIsIi9zb3VyY2UvTWF0ZXJpYWwudHMiLCIvc291cmNlL09iamVjdHMvQWJzdHJhY3RPYmplY3QudHMiLCIvc291cmNlL09iamVjdHMvUG9seWdvbi5qcyIsIi9zb3VyY2UvT2JqZWN0cy9Qb2x5Z29uLnRzIiwiL3NvdXJjZS9PYmplY3RzL1NwaGVyZS5qcyIsIi9zb3VyY2UvT2JqZWN0cy9TcGhlcmUudHMiLCIvc291cmNlL1JUTWF0aC50cyIsIi9zb3VyY2UvUmF5LnRzIiwiL3NvdXJjZS9TY2VuZS50cyIsIi9zb3VyY2UvVHJhY2VyV29ya2VyLnRzIiwiL3NvdXJjZS9WZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxHQUFBLFVBQUEsUUFBdUIsWUFFdkIsT0FBQSxXQVNJLFFBQUEsR0FBYSxFQUFrQixFQUFtQixFQUFxQixHQUNuRSxLQUFLLFNBQVcsRUFDaEIsS0FBSyxVQUFZLFNBQUEsT0FBTyxXQUFXLEdBQ25DLEtBQUssWUFBYyxFQUNuQixLQUFLLGFBQWUsRUFFcEIsS0FBSyxjQUFnQixTQUFBLE9BQU8sV0FBVyxTQUFBLE9BQU8sVUFBVSxLQUFLLFVBQVcsS0FBSyxXQUM3RSxLQUFLLFlBQWMsU0FBQSxPQUFPLE9BQ3RCLFNBQUEsT0FBTyxXQUNILFNBQUEsT0FBTyxNQUNILEtBQUssY0FDTCxH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TUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssUUFDL0QsR0FBSSxrQkFBQSxlQUFlLEdBQUksVUFBQSxPQUFRLEVBQUcsRUFBRyxHQUFJLEdBQUssS0FDekMsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssU0FFbkUsU0FHSSxHQUFJLFdBQUEsUUFDQSxHQUFJLFVBQUEsT0FBTyxLQUFNLEtBQU0sTUFDdkIsR0FBSSxVQUFBLE9BQU8sSUFBSyxLQUFNLE1BQ3RCLEdBQUksVUFBQSxPQUFPLElBQUssS0FBTSxLQUN0QixHQUFJLFVBQUEsT0FBTyxLQUFNLEtBQU0sTUFDekIsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssTUFBTyxHQUFHLGdCQUFnQixJQUV0RixHQUFJLFdBQUEsUUFDQSxHQUFJLFVBQUEsT0FBTyxLQUFNLEtBQU0sS0FDdkIsR0FBSSxVQUFBLE9BQU8sSUFBSyxLQUFNLEtBQ3RCLEdBQUksVUFBQSxPQUFPLElBQUssSUFBSyxLQUNyQixHQUFJLFVBQUEsT0FBTyxLQUFNLElBQUssTUFDeEIsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssTUFBTyxHQUFHLGdCQUFnQixJQUV0RixHQUFJLFdBQUEsUUFDQSxHQUFJLFVBQUEsT0FBTyxLQUFNLElBQUssTUFDdEIsR0FBSSxVQUFBLE9BQU8sS0FBTSxJQUFLLEtBQ3RCLEdBQUksVUFBQSxPQUFPLElBQUssSUFBSyxLQUNyQixHQUFJLFVBQUEsT0FBTyxJQUFLLElBQUssT0FDdkIsWUFBWSxHQUFJLFlBQUEsU0FBUyxHQUFJLFNBQUEsTUFBTSxHQUFJLFlBQUEsU0FBUyxJQUFLLElBQUssTUFBTyxHQUFHLGdCQUFnQixJQUV0RixHQUFJLFdBQUEsUUFDQSxHQUFJLFVBQUEsT0FBTyxJQUFLLEtBQU0sS0FDdEIsR0FBSSxVQUFBLE9BQU8sSUFBSyxLQUFN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QUFRLEVBQUksRUFBUSxFQUFJLEVBQVEsR0FHakUsRUFBQSxXQUFkLFNBQTBCLEdBQ3RCLE1BQU8sR0FBTyxPQUFPLEVBQVEsRUFBSSxFQUFPLGNBRzlCLEVBQUEsUUFBZCxTQUF1QixFQUFnQixHQUNuQyxHQUFJLEdBQUksRUFBSSxFQUFPLElBQUksRUFBUSxFQUUvQixPQUFPLEdBQU8sVUFDVixFQUNBLEVBQU8sT0FBTyxFQUFRLEtBR2xDLElBdkVhLFNBQUEsT0FBTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IFZlY3RvcjtcbiAgICBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSBmb3J3YXJkVmVjdG9yOiBWZWN0b3I7XG4gICAgcHJpdmF0ZSByaWdodFZlY3RvcjogVmVjdG9yO1xuICAgIHByaXZhdGUgdXBWZWN0b3I6IFZlY3RvcjtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yIChwb3NpdGlvbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3Rvciwgc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemVkKGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5mb3J3YXJkVmVjdG9yID0gVmVjdG9yLm5vcm1hbGl6ZWQoVmVjdG9yLnN1YnN0cmFjdCh0aGlzLmRpcmVjdGlvbiwgdGhpcy5wb3NpdGlvbikpO1xuICAgICAgICB0aGlzLnJpZ2h0VmVjdG9yID0gVmVjdG9yLnNjYWxlZChcbiAgICAgICAgICAgIFZlY3Rvci5ub3JtYWxpemVkKFxuICAgICAgICAgICAgICAgIFZlY3Rvci5jcm9zcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkVmVjdG9yLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIC0xLCAwKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudXBWZWN0b3IgPSBWZWN0b3Iuc2NhbGVkKFxuICAgICAgICAgICAgVmVjdG9yLm5vcm1hbGl6ZWQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLmNyb3NzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRWZWN0b3JcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXREaXJlY3Rpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3J3YXJkVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5mb3J3YXJkVmVjdG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSaWdodFZlY3RvciAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHRWZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFVwVmVjdG9yICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy51cFZlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVjZW50ZXJYICh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgYXNwZWN0Q29lZmYgPSAodGhpcy5zY3JlZW5IZWlnaHQgLyB0aGlzLnNjcmVlbldpZHRoKSAqIDI7XG5cbiAgICAgICAgcmV0dXJuICh4IC0gKHRoaXMuc2NyZWVuV2lkdGggLyAyKSkgLyBhc3BlY3RDb2VmZiAvIHRoaXMuc2NyZWVuV2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2VudGVyWSAoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0oeSAtICh0aGlzLnNjcmVlbkhlaWdodCAvIDIpKSAvIDIgLyB0aGlzLnNjcmVlbkhlaWdodDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBGbG9hdENvbG9yIH0gZnJvbSBcIi4vRmxvYXRDb2xvclwiO1xuXG5leHBvcnQgY2xhc3MgQ29sb3Ige1xuICAgIHJlZDogbnVtYmVyO1xuICAgIGdyZWVuOiBudW1iZXI7XG4gICAgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKGNvbG9yOiBSR0JDb2xvcnxGbG9hdENvbG9yKSB7XG4gICAgICAgIHRoaXMucmVkID0gY29sb3IucmVkO1xuICAgICAgICB0aGlzLmdyZWVuID0gY29sb3IuZ3JlZW47XG4gICAgICAgIHRoaXMuYmx1ZSA9IGNvbG9yLmJsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZCAoY29sb3I6IENvbG9yKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgbmV3IEZsb2F0Q29sb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5yZWQgKyBjb2xvci5yZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmVlbiArIGNvbG9yLmdyZWVuLFxuICAgICAgICAgICAgICAgIHRoaXMuYmx1ZSArIGNvbG9yLmJsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3Vic3RyYWN0IChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAtIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuIC0gY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlIC0gY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzY2FsZWQgKG11bHRpcGxpZXI6IG51bWJlcik6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIG5ldyBGbG9hdENvbG9yKFxuICAgICAgICAgICAgICAgIHRoaXMucmVkICogbXVsdGlwbGllcixcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICogbXVsdGlwbGllcixcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgKiBtdWx0aXBsaWVyXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIG11bHRpcGxlIChjb2xvcjogQ29sb3IpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAqIGNvbG9yLnJlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdyZWVuICogY29sb3IuZ3JlZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlICogY29sb3IuYmx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaXZpZGUgKHZhbHVlOiBudW1iZXIpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoXG4gICAgICAgICAgICBuZXcgRmxvYXRDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLnJlZCAvIHZhbHVlLFxuICAgICAgICAgICAgICAgIHRoaXMuZ3JlZW4gLyB2YWx1ZSxcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWUgLyB2YWx1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc1JHQkVuY29kZSAoY29sb3I6IG51bWJlcikge1xuICAgICAgICBpZiAoY29sb3IgPD0gMC4wMDMxMzA4KSB7XG4gICAgICAgICAgICByZXR1cm4gMTIuOTIgKiBjb2xvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAxLjA1NSAqIChjb2xvciAqKiAwLjQxNjY2NjcpIC0gMC4wNTU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHRvUkdCIChjb2xvcjogQ29sb3IpOiB7cmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcn0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IucmVkKSAqIDI1NSksXG4gICAgICAgICAgICBncmVlbjogTWF0aC5mbG9vcihDb2xvci5jbGFtcENvbG9yKGNvbG9yLmdyZWVuKSAqIDI1NSksXG4gICAgICAgICAgICBibHVlOiBNYXRoLmZsb29yKENvbG9yLmNsYW1wQ29sb3IoY29sb3IuYmx1ZSkgKiAyNTUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjbGFtcENvbG9yIChjb2xvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID4gMSA/IDEgOiBjb2xvcjtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRmxvYXRDb2xvciB7XG4gICAgcHVibGljIHJlZDogbnVtYmVyO1xuICAgIHB1YmxpYyBncmVlbjogbnVtYmVyO1xuICAgIHB1YmxpYyBibHVlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJlZCA9IHJlZDtcbiAgICAgICAgdGhpcy5ncmVlbiA9IGdyZWVuO1xuICAgICAgICB0aGlzLmJsdWUgPSBibHVlO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUkdCQ29sb3Ige1xuICAgIHB1YmxpYyByZWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgZ3JlZW46IG51bWJlcjtcbiAgICBwdWJsaWMgYmx1ZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yZWQgPSBSR0JDb2xvci50b0Zsb2F0KHJlZCk7XG4gICAgICAgIHRoaXMuZ3JlZW4gPSBSR0JDb2xvci50b0Zsb2F0KGdyZWVuKTtcbiAgICAgICAgdGhpcy5ibHVlID0gUkdCQ29sb3IudG9GbG9hdChibHVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyB0b0Zsb2F0IChjb2xvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID09PSAwID8gY29sb3IgOiBjb2xvciAvIDI1NTtcbiAgICB9XG59IiwiaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9WZWN0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TGlnaHQge1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGYWRlUmFkaXVzICgpOiBudW1iZXI7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvc2l0aW9uICgpOiBWZWN0b3I7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFBvd2VyICgpOiBudW1iZXI7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFJhZGl1cyAoKTogbnVtYmVyO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Tm9ybWFsIChwb2ludDogVmVjdG9yKTogVmVjdG9yO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRNYXRlcmlhbCAoKTogTWF0ZXJpYWw7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFJhbmRvbVBvaW50ICgpOiBWZWN0b3I7XG4gICAgcHVibGljIGFic3RyYWN0IGdldFR5cGUgKCk6IHN0cmluZztcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0TWF0ZXJpYWwgKG1hdGVyaWFsOiBNYXRlcmlhbCk6IHRoaXM7XG59XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBYnN0cmFjdExpZ2h0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdExpZ2h0XCIpO1xudmFyIENvbG9yXzEgPSByZXF1aXJlKFwiLi8uLi9Db2xvci9Db2xvclwiKTtcbnZhciBNYXRlcmlhbF8xID0gcmVxdWlyZShcIi4vLi4vTWF0ZXJpYWxcIik7XG52YXIgUkdCQ29sb3JfMSA9IHJlcXVpcmUoXCIuLy4uL0NvbG9yL1JHQkNvbG9yXCIpO1xudmFyIFJUTWF0aF8xID0gcmVxdWlyZShcIi4vLi4vUlRNYXRoXCIpO1xudmFyIFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vLi4vVmVjdG9yXCIpO1xudmFyIFNwaGVyaWNhbExpZ2h0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3BoZXJpY2FsTGlnaHQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3BoZXJpY2FsTGlnaHQocG9zaXRpb24sIHBvd2VyLCByYWRpdXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucmFkaXVzID0gNTA7XG4gICAgICAgIHRoaXMuZmFkZVJhZGl1cyA9IDI1MDA7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxfMS5NYXRlcmlhbChuZXcgQ29sb3JfMS5Db2xvcihuZXcgUkdCQ29sb3JfMS5SR0JDb2xvcigyNDQsIDI0NCwgMjQ0KSksIDApLnNldExhbWJlcnRDb2VmZigxKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2xpZ2h0JztcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBvd2VyID0gcG93ZXI7XG4gICAgICAgIGlmIChyYWRpdXMpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRGYWRlUmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMgKyB0aGlzLmZhZGVSYWRpdXM7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldFBvd2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3dlcjtcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRSYWRpdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cztcbiAgICB9O1xuICAgIFNwaGVyaWNhbExpZ2h0LnByb3RvdHlwZS5nZXRSYW5kb21Qb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHUgPSBNYXRoLnJhbmRvbSgpLCB2ID0gTWF0aC5yYW5kb20oKSwgcSA9IDIgKiBNYXRoLlBJICogdSwgZiA9IE1hdGgucG93KE1hdGguY29zKDIgKiB2IC0gMSksIC0xKTtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3JfMS5WZWN0b3IodGhpcy5yYWRpdXMgKiBNYXRoLmNvcyhxKSAqIE1hdGguc2luKGYpLCB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHEpICogTWF0aC5zaW4oZiksIHRoaXMucmFkaXVzICogTWF0aC5jb3MoZikpO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldEludGVyc2VjdERhdGEgPSBmdW5jdGlvbiAocmF5KSB7XG4gICAgICAgIHZhciBrID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChyYXkuZ2V0T3JpZ2luKCksIHRoaXMucG9zaXRpb24pLCBiID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLCBjID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCBrKSAtIE1hdGgucG93KHRoaXMucmFkaXVzLCAyKSwgZCA9IE1hdGgucG93KGIsIDIpIC0gYywgdDEsIHQyLCBtaW5ULCBtYXhULCBpbnRlcnNlY3Rpb25Qb2ludCwgcG9pbnQsIGRpc3RhbmNlO1xuICAgICAgICBpZiAoYiA+IDAgfHwgZCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtYXhUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKFZlY3Rvcl8xLlZlY3Rvci5zY2FsZWQocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksIHJheS5nZXRPcmlnaW4oKSk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgcmF5LmdldE9yaWdpbigpKS5nZXRMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZWQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlZChWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLnBvc2l0aW9uKSwgMSAvIHRoaXMucmFkaXVzKSk7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuZ2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG4gICAgU3BoZXJpY2FsTGlnaHQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfTtcbiAgICBTcGhlcmljYWxMaWdodC5wcm90b3R5cGUuc2V0TWF0ZXJpYWwgPSBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTcGhlcmljYWxMaWdodDtcbn0pKEFic3RyYWN0TGlnaHRfMS5BYnN0cmFjdExpZ2h0KTtcbmV4cG9ydHMuU3BoZXJpY2FsTGlnaHQgPSBTcGhlcmljYWxMaWdodDtcbiIsImltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9BYnN0cmFjdExpZ2h0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLy4uL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLy4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi8uLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4vLi4vQ29sb3IvUkdCQ29sb3JcIjtcbmltcG9ydCB7IFJUTWF0aCB9IGZyb20gXCIuLy4uL1JUTWF0aFwiXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi8uLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFNwaGVyaWNhbExpZ2h0IGV4dGVuZHMgQWJzdHJhY3RMaWdodCB7XG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogVmVjdG9yO1xuICAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXIgPSA1MDtcbiAgICBwcml2YXRlIHBvd2VyOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmYWRlUmFkaXVzOiBudW1iZXIgPSAyNTAwO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjQ0LCAyNDQsIDI0NCkpLCAwKS5zZXRMYW1iZXJ0Q29lZmYoMSk7XG4gICAgcHJpdmF0ZSB0eXBlOiBzdHJpbmcgPSAnbGlnaHQnO1xuXG4gICAgY29uc3RydWN0b3IgKHBvc2l0aW9uOiBWZWN0b3IsIHBvd2VyOiBudW1iZXIsIHJhZGl1cz86IG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5wb3dlciA9IHBvd2VyO1xuXG4gICAgICAgIGlmIChyYWRpdXMpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZhZGVSYWRpdXMgKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cyArIHRoaXMuZmFkZVJhZGl1cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24gKCk6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQb3dlciAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG93ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhZGl1cyAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSYW5kb21Qb2ludCAoKTogVmVjdG9yIHtcbiAgICAgICAgbGV0IHUgPSBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgdiA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICBxID0gMiAqIE1hdGguUEkgKiB1LFxuICAgICAgICAgICAgZiA9IE1hdGgucG93KE1hdGguY29zKDIgKiB2IC0gMSksIC0xKTtcblxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHRoaXMucmFkaXVzICogTWF0aC5jb3MocSkgKiBNYXRoLnNpbihmKSxcbiAgICAgICAgICAgIHRoaXMucmFkaXVzICogTWF0aC5zaW4ocSkgKiBNYXRoLnNpbihmKSxcbiAgICAgICAgICAgIHRoaXMucmFkaXVzICogTWF0aC5jb3MoZilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SW50ZXJzZWN0RGF0YSAocmF5OiBSYXkpOiBhbnkge1xuICAgICAgICBsZXQgayA9IFZlY3Rvci5zdWJzdHJhY3QocmF5LmdldE9yaWdpbigpLCB0aGlzLnBvc2l0aW9uKSxcbiAgICAgICAgICAgIGI6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgcmF5LmdldERpcmVjdGlvbigpKSxcbiAgICAgICAgICAgIGM6IG51bWJlciA9IFZlY3Rvci5kb3QoaywgaykgLSB0aGlzLnJhZGl1cyAqKiAyLFxuICAgICAgICAgICAgZDogbnVtYmVyID0gYiAqKiAyIC0gYyxcbiAgICAgICAgICAgIHQxOiBudW1iZXIsXG4gICAgICAgICAgICB0MjogbnVtYmVyLFxuICAgICAgICAgICAgbWluVDogbnVtYmVyLFxuICAgICAgICAgICAgbWF4VDogbnVtYmVyLFxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQ6IG51bWJlcixcbiAgICAgICAgICAgIHBvaW50OiBWZWN0b3IsXG4gICAgICAgICAgICBkaXN0YW5jZTogbnVtYmVyO1xuXG4gICAgICAgIGlmIChiID4gMCB8fCBkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPj0gMCkge1xuICAgICAgICAgICAgdDEgPSAtYiArIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIHQyID0gLWIgLSBNYXRoLnNxcnQoZCk7XG4gICAgICAgICAgICBtaW5UID0gTWF0aC5taW4odDEsIHQyKTtcbiAgICAgICAgICAgIG1heFQgPSBNYXRoLm1heCh0MSwgdDIpO1xuXG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1heFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb25Qb2ludCA8IFJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcG9pbnQgPSBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgVmVjdG9yLnNjYWxlZChyYXkuZ2V0RGlyZWN0aW9uKCksIGludGVyc2VjdGlvblBvaW50KSxcbiAgICAgICAgICAgIHJheS5nZXRPcmlnaW4oKVxuICAgICAgICApO1xuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIHJheS5nZXRPcmlnaW4oKVxuICAgICAgICApLmdldExlbmd0aCgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplZChcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5wb3NpdGlvbiksXG4gICAgICAgICAgICAgICAgMSAvIHRoaXMucmFkaXVzXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUeXBlICgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcyB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuL0NvbG9yL0NvbG9yXCI7XG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL0NvbG9yL1JHQkNvbG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBNYXRlcmlhbCB7XG4gICAgcHJpdmF0ZSBjb2xvcjogQ29sb3I7XG4gICAgcHJpdmF0ZSBsYW1iZXJ0Q29lZmY6IG51bWJlciA9IDAuNTtcbiAgICBwcml2YXRlIHBob25nQ29lZmY6IG51bWJlciA9IDAuNTtcbiAgICBwcml2YXRlIHJlZmxlY3Rpb25Db2VmZjogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgY29sb3I6IENvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDAsIDApKSxcbiAgICAgICAgcmVmbGVjdGlvbkNvZWZmOiBudW1iZXIgPSAwXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5yZWZsZWN0aW9uQ29lZmYgPSByZWZsZWN0aW9uQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENvbG9yICgpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMYW1iZXJ0Q29lZmYoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFtYmVydENvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQaG9uZ0NvZWZmKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBob25nQ29lZmY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlZmxlY3Rpb25WYWx1ZSAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNvZWZmO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRMYW1iZXJ0Q29lZmYobGFtYmVydENvZWZmOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5sYW1iZXJ0Q29lZmYgPSBsYW1iZXJ0Q29lZmY7XG4gICAgICAgIHRoaXMucGhvbmdDb2VmZiA9IDEgLSBsYW1iZXJ0Q29lZmY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBob25nQ29lZmYocGhvbmdDb2VmZjogbnVtYmVyKTogdGhpcyB7XG4gICAgICAgIHRoaXMucGhvbmdDb2VmZiA9IHBob25nQ29lZmY7XG4gICAgICAgIHRoaXMubGFtYmVydENvZWZmID0gMSAtIHBob25nQ29lZmY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSIsImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4uL01hdGVyaWFsXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vUmF5XCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdE9iamVjdCB7XG4gICAgYWJzdHJhY3QgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsO1xuICAgIGFic3RyYWN0IHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzO1xuICAgIGFic3RyYWN0IGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55O1xufVxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgUkdCQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9SR0JDb2xvclwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9WZWN0b3JcIik7XG52YXIgUG9seWdvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9seWdvbigpIHtcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2ZXJ0aWNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDExNSwgMTE1LCAxMTUpKSwgMCk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdzdXJmYWNlJztcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcnNlY3REYXRhID0gZnVuY3Rpb24gKHJheSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UsIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXIsIGhpdFBvaW50LCBub3JtYWwgPSB0aGlzLmdldE5vcm1hbCgpLCBudW1lcmF0b3IsIGRlbm9taW5hdG9yO1xuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yXzEuVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuICAgICAgICBkZW5vbWluYXRvciA9IFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsLCByYXkuZ2V0RGlyZWN0aW9uKCkpO1xuICAgICAgICBudW1lcmF0b3IgPSAtVmVjdG9yXzEuVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXRPcmlnaW4oKSkgKyBkaXN0YW5jZUZyb21BeGlzQ2VudGVyO1xuICAgICAgICBkaXN0YW5jZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGhfMS5SVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJheS5zZXREaXN0YW5jZShkaXN0YW5jZSk7XG4gICAgICAgIGhpdFBvaW50ID0gcmF5LmdldEhpdFBvaW50KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZlcnRleDEgPSB0aGlzLnZlcnRpY2VzW2ldLCB2ZXJ0ZXgyID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGkgPT09IHZlcnRpY2VzTGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QodmVydGV4MiwgdmVydGV4MSksIFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHZlcnRleDEpLCB0aGlzLmdldE5vcm1hbCgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkaXN0YW5jZSA9IFZlY3Rvcl8xLlZlY3Rvci5zdWJzdHJhY3QoaGl0UG9pbnQsIHJheS5nZXRPcmlnaW4oKSkuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb2ludDogaGl0UG9pbnQsXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE1hdGVyaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbDtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkZ2UxID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSwgZWRnZTIgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZWQoVmVjdG9yXzEuVmVjdG9yLmNyb3NzKGVkZ2UxLCBlZGdlMikpO1xuICAgIH07XG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICB9O1xuICAgIFBvbHlnb24ucHJvdG90eXBlLnNldE1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyID0gZnVuY3Rpb24gKHZlY3RvcjEsIHZlY3RvcjIsIG5vcm1hbCkge1xuICAgICAgICB2YXIgbm9ybWFsVjFWMiA9IFZlY3Rvcl8xLlZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcbiAgICAgICAgcmV0dXJuIFZlY3Rvcl8xLlZlY3Rvci5kb3Qobm9ybWFsVjFWMiwgbm9ybWFsKSA+PSAwO1xuICAgIH07XG4gICAgcmV0dXJuIFBvbHlnb247XG59KShBYnN0cmFjdE9iamVjdF8xLkFic3RyYWN0T2JqZWN0KTtcbmV4cG9ydHMuUG9seWdvbiA9IFBvbHlnb247XG4iLCJpbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgQWJzdHJhY3RPYmplY3Qge1xuICAgIHByaXZhdGUgdmVydGljZXM6IFZlY3RvcltdO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMTE1LCAxMTUsIDExNSkpLCAwKTtcbiAgICBwcml2YXRlIHR5cGU6IHN0cmluZyA9ICdzdXJmYWNlJztcblxuICAgIGNvbnN0cnVjdG9yICguLi52ZXJ0aWNlczogVmVjdG9yW10pIHtcbiAgICAgICAgc3VwZXIgKCk7XG5cbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3REYXRhIChyYXk6IFJheSk6IGFueSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTogbnVtYmVyLFxuICAgICAgICAgICAgZGlzdGFuY2VGcm9tQXhpc0NlbnRlcjogbnVtYmVyLFxuICAgICAgICAgICAgaGl0UG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yID0gdGhpcy5nZXROb3JtYWwoKSxcbiAgICAgICAgICAgIG51bWVyYXRvcjogbnVtYmVyLFxuICAgICAgICAgICAgZGVub21pbmF0b3I6IG51bWJlcjtcblxuICAgICAgICBkaXN0YW5jZUZyb21BeGlzQ2VudGVyID0gVmVjdG9yLmRvdCh0aGlzLnZlcnRpY2VzWzBdLCBub3JtYWwpO1xuXG4gICAgICAgIGRlbm9taW5hdG9yID0gVmVjdG9yLmRvdChub3JtYWwsIHJheS5nZXREaXJlY3Rpb24oKSk7XG4gICAgICAgIG51bWVyYXRvciA9IC1WZWN0b3IuZG90KG5vcm1hbCwgcmF5LmdldE9yaWdpbigpKSArIGRpc3RhbmNlRnJvbUF4aXNDZW50ZXI7XG5cbiAgICAgICAgZGlzdGFuY2UgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBSVE1hdGguRVBTSUxPTikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmF5LnNldERpc3RhbmNlKGRpc3RhbmNlKTtcblxuICAgICAgICBoaXRQb2ludCA9IHJheS5nZXRIaXRQb2ludCgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2ZXJ0aWNlc0xlbmd0aCA9IHRoaXMudmVydGljZXMubGVuZ3RoOyBpIDwgdmVydGljZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZlcnRleDE6IFZlY3RvciA9IHRoaXMudmVydGljZXNbaV0sXG4gICAgICAgICAgICAgICAgdmVydGV4MjogVmVjdG9yO1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gdmVydGljZXNMZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4MiA9IHRoaXMudmVydGljZXNbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZlcnRleDIgPSB0aGlzLnZlcnRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFQb2x5Z29uLmNoZWNrU2FtZUNsb2NrRGlyKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KHZlcnRleDIsIHZlcnRleDEpLFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KGhpdFBvaW50LCB2ZXJ0ZXgxKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXROb3JtYWwoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIGhpdFBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiBoaXRQb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1hdGVyaWFsICgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwgKCk6IFZlY3RvciB7XG4gICAgICAgIGxldCBlZGdlMTogVmVjdG9yID0gVmVjdG9yLnN1YnN0cmFjdCh0aGlzLnZlcnRpY2VzWzJdLCB0aGlzLnZlcnRpY2VzWzBdKSxcbiAgICAgICAgICAgIGVkZ2UyOiBWZWN0b3IgPSBWZWN0b3Iuc3Vic3RyYWN0KHRoaXMudmVydGljZXNbMV0sIHRoaXMudmVydGljZXNbMF0pO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplZChWZWN0b3IuY3Jvc3MoZWRnZTEsIGVkZ2UyKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFR5cGUgKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE1hdGVyaWFsIChtYXRlcmlhbDogTWF0ZXJpYWwpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNoZWNrU2FtZUNsb2NrRGlyICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvciwgbm9ybWFsOiBWZWN0b3IpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IG5vcm1hbFYxVjI6IFZlY3RvciA9IFZlY3Rvci5jcm9zcyh2ZWN0b3IyLCB2ZWN0b3IxKTtcblxuICAgICAgICByZXR1cm4gVmVjdG9yLmRvdChub3JtYWxWMVYyLCBub3JtYWwpID49IDA7XG4gICAgfVxufVxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgUlRNYXRoXzEgPSByZXF1aXJlKFwiLi4vUlRNYXRoXCIpO1xudmFyIEFic3RyYWN0T2JqZWN0XzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdE9iamVjdFwiKTtcbnZhciBDb2xvcl8xID0gcmVxdWlyZShcIi4uL0NvbG9yL0NvbG9yXCIpO1xudmFyIE1hdGVyaWFsXzEgPSByZXF1aXJlKFwiLi4vTWF0ZXJpYWxcIik7XG52YXIgUkdCQ29sb3JfMSA9IHJlcXVpcmUoXCIuLi9Db2xvci9SR0JDb2xvclwiKTtcbnZhciBWZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9WZWN0b3JcIik7XG52YXIgU3BoZXJlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3BoZXJlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNwaGVyZShjZW50ZXIsIHJhZGl1cykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbF8xLk1hdGVyaWFsKG5ldyBDb2xvcl8xLkNvbG9yKG5ldyBSR0JDb2xvcl8xLlJHQkNvbG9yKDI1NSwgMCwgMCkpLCAwKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ3N1cmZhY2UnO1xuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuICAgIFNwaGVyZS5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0RGF0YSA9IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgdmFyIGsgPSBWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLCBiID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLCBjID0gVmVjdG9yXzEuVmVjdG9yLmRvdChrLCBrKSAtIE1hdGgucG93KHRoaXMucmFkaXVzLCAyKSwgZCA9IE1hdGgucG93KGIsIDIpIC0gYywgdDEsIHQyLCBtaW5ULCBtYXhULCBpbnRlcnNlY3Rpb25Qb2ludCwgcG9pbnQsIGRpc3RhbmNlO1xuICAgICAgICBpZiAoYiA+IDAgfHwgZCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG4gICAgICAgICAgICBpZiAobWluVCA+IFJUTWF0aF8xLlJUTWF0aC5FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtaW5UO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQgPSBtYXhUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoXzEuUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcG9pbnQgPSBWZWN0b3JfMS5WZWN0b3IuYWRkKFZlY3Rvcl8xLlZlY3Rvci5zY2FsZWQocmF5LmdldERpcmVjdGlvbigpLCBpbnRlcnNlY3Rpb25Qb2ludCksIHJheS5nZXRPcmlnaW4oKSk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yXzEuVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgcmF5LmdldE9yaWdpbigpKS5nZXRMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRNYXRlcmlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfTtcbiAgICBTcGhlcmUucHJvdG90eXBlLmdldE5vcm1hbCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yXzEuVmVjdG9yLm5vcm1hbGl6ZWQoVmVjdG9yXzEuVmVjdG9yLnNjYWxlZChWZWN0b3JfMS5WZWN0b3Iuc3Vic3RyYWN0KHBvaW50LCB0aGlzLmNlbnRlciksIDEgLyB0aGlzLnJhZGl1cykpO1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgIH07XG4gICAgU3BoZXJlLnByb3RvdHlwZS5zZXRNYXRlcmlhbCA9IGZ1bmN0aW9uIChtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFNwaGVyZTtcbn0pKEFic3RyYWN0T2JqZWN0XzEuQWJzdHJhY3RPYmplY3QpO1xuZXhwb3J0cy5TcGhlcmUgPSBTcGhlcmU7XG4iLCJpbXBvcnQgeyBSVE1hdGggfSBmcm9tIFwiLi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBBYnN0cmFjdE9iamVjdCB9IGZyb20gXCIuL0Fic3RyYWN0T2JqZWN0XCI7XG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9Db2xvci9Db2xvclwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9SYXlcIjtcbmltcG9ydCB7IFJHQkNvbG9yIH0gZnJvbSBcIi4uL0NvbG9yL1JHQkNvbG9yXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vVmVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBBYnN0cmFjdE9iamVjdCB7XG4gICAgcHJpdmF0ZSBjZW50ZXI6IFZlY3RvcjtcbiAgICBwcml2YXRlIHJhZGl1czogbnVtYmVyO1xuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMjU1LCAwLCAwKSksIDApO1xuICAgIHByaXZhdGUgdHlwZTogc3RyaW5nID0gJ3N1cmZhY2UnO1xuXG4gICAgY29uc3RydWN0b3IgKGNlbnRlcjogVmVjdG9yLCByYWRpdXM6IG51bWJlcikge1xuICAgICAgICBzdXBlciAoKTtcblxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEludGVyc2VjdERhdGEgKHJheTogUmF5KTogYW55IHtcbiAgICAgICAgbGV0IGsgPSBWZWN0b3Iuc3Vic3RyYWN0KHJheS5nZXRPcmlnaW4oKSwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgYjogbnVtYmVyID0gVmVjdG9yLmRvdChrLCByYXkuZ2V0RGlyZWN0aW9uKCkpLFxuICAgICAgICAgICAgYzogbnVtYmVyID0gVmVjdG9yLmRvdChrLCBrKSAtIHRoaXMucmFkaXVzICoqIDIsXG4gICAgICAgICAgICBkOiBudW1iZXIgPSBiICoqIDIgLSBjLFxuICAgICAgICAgICAgdDE6IG51bWJlcixcbiAgICAgICAgICAgIHQyOiBudW1iZXIsXG4gICAgICAgICAgICBtaW5UOiBudW1iZXIsXG4gICAgICAgICAgICBtYXhUOiBudW1iZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludDogbnVtYmVyLFxuICAgICAgICAgICAgcG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGRpc3RhbmNlOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGIgPiAwIHx8IGQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICB0MSA9IC1iICsgTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgdDIgPSAtYiAtIE1hdGguc3FydChkKTtcbiAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbih0MSwgdDIpO1xuICAgICAgICAgICAgbWF4VCA9IE1hdGgubWF4KHQxLCB0Mik7XG5cbiAgICAgICAgICAgIGlmIChtaW5UID4gUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludCA9IG1pblQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvblBvaW50ID0gbWF4VDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50IDwgUlRNYXRoLkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwb2ludCA9IFZlY3Rvci5hZGQoXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGVkKHJheS5nZXREaXJlY3Rpb24oKSwgaW50ZXJzZWN0aW9uUG9pbnQpLFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICk7XG4gICAgICAgIGRpc3RhbmNlID0gVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgIHBvaW50LFxuICAgICAgICAgICAgcmF5LmdldE9yaWdpbigpXG4gICAgICAgICkuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50LFxuICAgICAgICAgICAgZGlzdGFuY2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWF0ZXJpYWwgKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5vcm1hbCAocG9pbnQ6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplZChcbiAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQoXG4gICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChwb2ludCwgdGhpcy5jZW50ZXIpLFxuICAgICAgICAgICAgICAgIDEgLyB0aGlzLnJhZGl1c1xuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUeXBlICgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRNYXRlcmlhbCAobWF0ZXJpYWw6IE1hdGVyaWFsKTogdGhpcyB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJleHBvcnQgbW9kdWxlIFJUTWF0aCB7XG4gICAgZXhwb3J0IGNvbnN0IEVQU0lMT04gPSAwLjAwMTtcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFJheSB7XG4gICAgcHJpdmF0ZSBvcmlnaW46IFZlY3RvcjtcbiAgICBwcml2YXRlIGRpcmVjdGlvbjogIFZlY3RvcjtcbiAgICBwcml2YXRlIGRpc3RhbmNlOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgaXRlcmF0aW9uOiBudW1iZXIgPSA4O1xuXG4gICAgY29uc3RydWN0b3IgKG9yaWdpbjogVmVjdG9yLCBkaXJlY3Rpb246IFZlY3RvciwgaXRlcmF0aW9uPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IFZlY3Rvci5ub3JtYWxpemVkKGRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGl0ZXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24gPSBpdGVyYXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlyZWN0aW9uICgpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpc3RhbmNlICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlcmF0aW9uICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9yaWdpbiAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIaXRQb2ludCAoKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5hZGQodGhpcy5vcmlnaW4sIFZlY3Rvci5zY2FsZWQodGhpcy5kaXJlY3Rpb24sIHRoaXMuZGlzdGFuY2UpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0RGlzdGFuY2UgKGRpc3RhbmNlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRJdGVyYXRpb24gKGl0ZXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uID0gaXRlcmF0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IHsgQWJzdHJhY3RMaWdodCB9IGZyb20gXCIuL0xpZ2h0cy9BYnN0cmFjdExpZ2h0XCI7XG5cbmV4cG9ydCBjbGFzcyBTY2VuZSB7XG4gICAgcHJpdmF0ZSBjYW1lcmE6IENhbWVyYTtcbiAgICBwcml2YXRlIG9iamVjdHM6IGFueVtdID0gW107XG4gICAgcHJpdmF0ZSBsaWdodHM6IEFic3RyYWN0TGlnaHRbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IgKG9iamVjdHM6IGFueSkge1xuICAgICAgICB0aGlzLm9iamVjdHMgPSBvYmplY3RzLm9iamVjdHM7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gb2JqZWN0cy5jYW1lcmE7XG4gICAgICAgIHRoaXMubGlnaHRzID0gb2JqZWN0cy5saWdodHM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZE9iamVjdCAob2JqZWN0OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2gob2JqZWN0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2FtZXJhICgpOiBDYW1lcmEge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW1lcmE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldExpZ2h0cyAoKTogQWJzdHJhY3RMaWdodFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlnaHRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRPYmplY3RzICgpOiBhbnlbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdHM7XG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2Ugbm8tZGVmYXVsdC1saWI9XCJ0cnVlXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9saWIud2Vid29ya2VyLmQudHNcIiAvPlxuXG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9DYW1lcmFcIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3IvQ29sb3JcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuL1JheVwiO1xuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi9Db2xvci9SR0JDb2xvclwiO1xuaW1wb3J0IHsgUlRNYXRoIH0gZnJvbSBcIi4vUlRNYXRoXCI7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuL1NjZW5lXCI7XG5pbXBvcnQgeyBTcGhlcmUgfSBmcm9tIFwiLi9PYmplY3RzL1NwaGVyZVwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuL09iamVjdHMvUGxhbmVcIjtcbmltcG9ydCB7IEFic3RyYWN0TGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvQWJzdHJhY3RMaWdodFwiO1xuaW1wb3J0IHsgU3BoZXJpY2FsTGlnaHQgfSBmcm9tIFwiLi9MaWdodHMvU3BoZXJpY2FsTGlnaHRcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWxcIjtcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9PYmplY3RzL1BvbHlnb25cIjtcblxuY2xhc3MgVHJhY2VyIHtcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIHBpeGVsU2FtcGxlczogbnVtYmVyID0gNDtcbiAgICBwcml2YXRlIHNoYWRvd1NhbXBsZXM6IG51bWJlciA9IDY1O1xuICAgIHByaXZhdGUgZ2lTYW1wbGVzOiBudW1iZXIgPSAzNTtcbiAgICBwcml2YXRlIHNjcmVlbldpZHRoOiBudW1iZXIgPSAyNTA7XG4gICAgcHJpdmF0ZSBzY3JlZW5IZWlnaHQ6IG51bWJlciA9IDI1MDtcblxuICAgIHByaXZhdGUgZ2V0Q29sb3IgKHJheTogUmF5LCByZWN1cmNpdmU6IGJvb2xlYW4gPSB0cnVlKTogQ29sb3Ige1xuICAgICAgICBsZXQgaW50ZXJzZWN0ID0gdGhpcy50cmFjZShyYXkpLFxuICAgICAgICAgICAgZGlmZnVzZUNvbG9yOiBDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpLFxuICAgICAgICAgICAgcmVmbGVjdENvbG9yOiBDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuXG4gICAgICAgIGlmIChpbnRlcnNlY3RbJ293bmVyJ10gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpZmZ1c2VDb2xvciA9IHRoaXMuZ2V0RGlmZnVzZUNvbG9yKHJheSwgaW50ZXJzZWN0LCByZWN1cmNpdmUpO1xuXG4gICAgICAgIGlmIChyZWN1cmNpdmUpIHtcbiAgICAgICAgICAgIHJlZmxlY3RDb2xvciA9IHRoaXMuZ2V0UmVmbGVjdGlvbkNvbG9yKHJheSwgaW50ZXJzZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkaWZmdXNlQ29sb3IuYWRkKHJlZmxlY3RDb2xvcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREaWZmdXNlQ29sb3IgKHJheTogUmF5LCBpbnRlcnNlY3Q6IGFueSwgcmVjdXJzaXZlOiBib29sZWFuID0gdHJ1ZSk6IENvbG9yIHtcbiAgICAgICAgbGV0IGxhbWJDb2xvcjogQ29sb3IsXG4gICAgICAgICAgICByYWRpYW5jZUNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJhZGlhbmNlUmFuZG9tRGlyZWN0aW9uOiBWZWN0b3IsXG4gICAgICAgICAgICBwaG9uZ0NvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHBpeGVsQ29sb3I6IENvbG9yID0gbmV3IENvbG9yKG5ldyBSR0JDb2xvcigwLCAwLCAwKSksXG4gICAgICAgICAgICBsaWdodERpcmVjdGlvbjogVmVjdG9yLFxuICAgICAgICAgICAgbGlnaHRQb3dlcjogbnVtYmVyLFxuICAgICAgICAgICAgcmVmbGVjdFBob25nVmVjdG9yRGlyOiBWZWN0b3IsXG4gICAgICAgICAgICBsYW1iQ29zOiBudW1iZXIsXG4gICAgICAgICAgICBwaG9uZ0NvczogbnVtYmVyLFxuICAgICAgICAgICAgcGhvbmc6IG51bWJlcjtcblxuICAgICAgICBmb3IgKGxldCBsaWdodCBvZiB0aGlzLnNjZW5lLmdldExpZ2h0cygpKSB7XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0Wydvd25lclR5cGUnXSA9PT0gJ2xpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3RbJ293bmVyJ11cbiAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpZ2h0UG93ZXIgPSB0aGlzLmdldExpZ2h0UG93ZXIoaW50ZXJzZWN0LCBsaWdodCk7XG5cbiAgICAgICAgICAgIGxhbWJDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgcmFkaWFuY2VDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgcGhvbmdDb2xvciA9IG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24gPSBWZWN0b3Iubm9ybWFsaXplZChcbiAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ3BvaW50J10sXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0LmdldFBvc2l0aW9uKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBsYW1iZXJ0XG5cbiAgICAgICAgICAgIGxhbWJDb3MgPSAtVmVjdG9yLmRvdChcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ25vcm1hbCddXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsYW1iQ29sb3IgPSBsYW1iQ29sb3IuYWRkKFxuICAgICAgICAgICAgICAgIGludGVyc2VjdFsnb3duZXInXVxuICAgICAgICAgICAgICAgICAgICAuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRNYXRlcmlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFBvd2VyICogbGFtYkNvcyAqIGludGVyc2VjdFsnb3duZXInXS5nZXRNYXRlcmlhbCgpLmdldExhbWJlcnRDb2VmZigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJhbmREaXIgPSAobm9ybWFsOiBWZWN0b3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2lzVHJhbnNmb3JtOiBWZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRhbmdlbnQ6IFZlY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHUxOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdTI6IG51bWJlciA9IE1hdGgucmFuZG9tKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5fdGhldGE6IG51bWJlciA9IE1hdGguc3FydCh1MSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3NfdGhldGE6IG51bWJlciA9IE1hdGguc3FydCgxIC0gdTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGhpOiBudW1iZXIgPSAyICogTWF0aC5QSSAqIHUyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiBWZWN0b3IgPSBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbl90aGV0YSAqIE1hdGguY29zKHBoaSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zX3RoZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbl90aGV0YSAqIE1hdGguc2luKHBoaSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICB0YW5nZW50OiBWZWN0b3I7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbC5nZXRDb29yZGluYXRlcygpWyd4J10gPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFuZ2VudCA9IG5ldyBWZWN0b3IoMSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YW5nZW50ID0gVmVjdG9yLm5vcm1hbGl6ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsLmdldENvb3JkaW5hdGVzKClbJ3onXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLW5vcm1hbC5nZXRDb29yZGluYXRlcygpWyd4J11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYml0YW5nZW50ID0gVmVjdG9yLmludmVyc2UoVmVjdG9yLmNyb3NzKHRhbmdlbnQsIG5vcm1hbCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJhc2lzVHJhbnNmb3JtID0gbmV3IFZlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3Rvci5kb3QodGFuZ2VudCwgZGlyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3Rvci5kb3Qobm9ybWFsLCBkaXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLmRvdChiaXRhbmdlbnQsIGRpcilcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmVjdG9yLm5vcm1hbGl6ZWQoYmFzaXNUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2lTYW1wbGVzOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhZGlhbmNlSW5SYW5kb21EaXJlY3Rpb246IENvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc0k6IG51bWJlcjtcblxuICAgICAgICAgICAgICAgICAgICByYWRpYW5jZVJhbmRvbURpcmVjdGlvbiA9IHJhbmREaXIoaW50ZXJzZWN0Wydvd25lciddLmdldE5vcm1hbChpbnRlcnNlY3RbJ3BvaW50J10pKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaWFuY2VJblJhbmRvbURpcmVjdGlvbiA9IHRoaXMuZ2V0Q29sb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmF5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsncG9pbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpYW5jZVJhbmRvbURpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGNvc0kgPSBWZWN0b3IuZG90KFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFuY2VSYW5kb21EaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ293bmVyJ10uZ2V0Tm9ybWFsKGludGVyc2VjdFsncG9pbnQnXSlcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByYWRpYW5jZUNvbG9yID0gcmFkaWFuY2VDb2xvclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ293bmVyJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldENvbG9yKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRpdmlkZShNYXRoLlBJKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpYW5jZUluUmFuZG9tRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlZChjb3NJKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBob25nXG5cbiAgICAgICAgICAgIHJlZmxlY3RQaG9uZ1ZlY3RvckRpciA9IFZlY3Rvci5yZWZsZWN0KFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIGludGVyc2VjdFsnbm9ybWFsJ11cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwaG9uZ0NvcyA9IC1WZWN0b3IuZG90KHJlZmxlY3RQaG9uZ1ZlY3RvckRpciwgcmF5LmdldERpcmVjdGlvbigpKTtcblxuICAgICAgICAgICAgaWYgKHBob25nQ29zID4gMCkge1xuICAgICAgICAgICAgICAgIHBob25nID0gTWF0aC5wb3cocGhvbmdDb3MsIDM1KTtcbiAgICAgICAgICAgICAgICBwaG9uZ0NvbG9yID0gcGhvbmdDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsnb3duZXInXVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGVyaWFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRDb2xvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Q29sb3IoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRQb3dlciAqIHBob25nICogaW50ZXJzZWN0Wydvd25lciddLmdldE1hdGVyaWFsKCkuZ2V0UGhvbmdDb2VmZigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwaXhlbENvbG9yID0gcGl4ZWxDb2xvci5hZGQoXG4gICAgICAgICAgICAgICAgbGFtYkNvbG9yLmFkZChcbiAgICAgICAgICAgICAgICAgICAgcmFkaWFuY2VDb2xvci5kaXZpZGUodGhpcy5naVNhbXBsZXMpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKS5hZGQocGhvbmdDb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGl4ZWxDb2xvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFJlZmxlY3Rpb25Db2xvciAocmF5OiBSYXksIGludGVyc2VjdDogYW55KTogYW55IHtcbiAgICAgICAgbGV0IHJheUl0ZXJhdGlvbjogbnVtYmVyID0gcmF5LmdldEl0ZXJhdGlvbigpLFxuICAgICAgICAgICAgcmVmbGVjdGlvbkNvbG9yOiBDb2xvcixcbiAgICAgICAgICAgIHJlZmxlY3Rpb25WYWx1ZTogbnVtYmVyID0gaW50ZXJzZWN0Wydvd25lciddLmdldE1hdGVyaWFsKCkuZ2V0UmVmbGVjdGlvblZhbHVlKCksXG4gICAgICAgICAgICByZWZsZWN0ZWRSYXk6IFZlY3RvcjtcblxuICAgICAgICByYXkuc2V0SXRlcmF0aW9uKC0tcmF5SXRlcmF0aW9uKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByYXlJdGVyYXRpb24gPT09IDAgfHxcbiAgICAgICAgICAgIHJlZmxlY3Rpb25WYWx1ZSA9PT0gMFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZmxlY3RlZFJheSA9IFZlY3Rvci5yZWZsZWN0KFxuICAgICAgICAgICAgcmF5LmdldERpcmVjdGlvbigpLFxuICAgICAgICAgICAgaW50ZXJzZWN0Wydub3JtYWwnXVxuICAgICAgICApO1xuXG4gICAgICAgIHJlZmxlY3Rpb25Db2xvciA9IHRoaXMuZ2V0Q29sb3IoXG4gICAgICAgICAgICBuZXcgUmF5KGludGVyc2VjdFsncG9pbnQnXSwgcmVmbGVjdGVkUmF5LCByYXlJdGVyYXRpb24pXG4gICAgICAgICkuc2NhbGVkKHJlZmxlY3Rpb25WYWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlZmxlY3Rpb25Db2xvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBlcnNwZWN0aXZlVmVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBsZXQgY2FtZXJhOiBDYW1lcmEgPSB0aGlzLnNjZW5lLmdldENhbWVyYSgpO1xuXG4gICAgICAgIHJldHVybiBWZWN0b3Iubm9ybWFsaXplZChcbiAgICAgICAgICAgIFZlY3Rvci5hZGQoXG4gICAgICAgICAgICAgICAgY2FtZXJhLmdldEZvcndhcmRWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICBWZWN0b3IuYWRkKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc2NhbGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLmdldFJpZ2h0VmVjdG9yKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEucmVjZW50ZXJYKHgpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zY2FsZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEuZ2V0VXBWZWN0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5yZWNlbnRlclkoeSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExpZ2h0UG93ZXIgKGludGVyc2VjdDogYW55LCBsaWdodDogQWJzdHJhY3RMaWdodCk6IG51bWJlciB7XG4gICAgICAgIGxldCBsaWdodFBvd2VyID0gbGlnaHQuZ2V0UG93ZXIoKSxcbiAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnQ6IFZlY3RvcixcbiAgICAgICAgICAgIGxpZ2h0UmF5OiBhbnksXG4gICAgICAgICAgICByZXN1bHRQb3dlcjogbnVtYmVyID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hhZG93U2FtcGxlczsgaSsrKSB7XG4gICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50ID0gbGlnaHQuZ2V0UmFuZG9tUG9pbnQoKTtcblxuICAgICAgICAgICAgbGlnaHRSYXkgPSB0aGlzLnRyYWNlKFxuICAgICAgICAgICAgICAgIG5ldyBSYXkoXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdFsncG9pbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0UG9zaXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodFJhbmRvbVBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0Wydwb2ludCddXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAobGlnaHRSYXlbJ3BvaW50J10gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxpZ2h0UmF5Wydvd25lciddICE9PSBsaWdodCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXN1bHRQb3dlciArPSAoXG4gICAgICAgICAgICAgICAgbGlnaHRQb3dlciAtXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBWZWN0b3Iuc3Vic3RyYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yLnN1YnN0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5nZXRQb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0UmFuZG9tUG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RbJ3BvaW50J11cbiAgICAgICAgICAgICAgICAgICAgKS5nZXRMZW5ndGgoKSAqIChsaWdodFBvd2VyIC8gbGlnaHQuZ2V0RmFkZVJhZGl1cygpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkgLyB0aGlzLnNoYWRvd1NhbXBsZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0UG93ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFjZSAocmF5OiBSYXkpOiB7ZGlzdGFuY2U6IG51bWJlciwgcG9pbnQ6IFZlY3Rvciwgb3duZXI6IGFueSwgb3duZXJUeXBlOiBzdHJpbmd9IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogMCxcbiAgICAgICAgICAgICAgICBwb2ludDogbnVsbCxcbiAgICAgICAgICAgICAgICBub3JtYWw6IG51bGwsXG4gICAgICAgICAgICAgICAgb3duZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgb3duZXJUeXBlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW50ZXJzZWN0RGF0YTogYW55LFxuICAgICAgICAgICAgc2NlbmVPYmplY3RzV2l0aExpZ2h0czogYW55W10gPSB0aGlzLnNjZW5lLmdldE9iamVjdHMoKS5jb25jYXQodGhpcy5zY2VuZS5nZXRMaWdodHMoKSk7XG5cbiAgICAgICAgZm9yIChsZXQgb2JqZWN0IG9mIHNjZW5lT2JqZWN0c1dpdGhMaWdodHMpIHtcbiAgICAgICAgICAgIGludGVyc2VjdERhdGEgPSBvYmplY3QuZ2V0SW50ZXJzZWN0RGF0YShyYXkpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0RGF0YSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ10gPiAwICYmXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ293bmVyJ10gPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0RGF0YVsnZGlzdGFuY2UnXSA8IHJlc3VsdFsnZGlzdGFuY2UnXVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFsnZGlzdGFuY2UnXSA9IGludGVyc2VjdERhdGFbJ2Rpc3RhbmNlJ107XG4gICAgICAgICAgICAgICAgcmVzdWx0Wydwb2ludCddID0gaW50ZXJzZWN0RGF0YVsncG9pbnQnXTtcbiAgICAgICAgICAgICAgICByZXN1bHRbJ293bmVyJ10gPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgcmVzdWx0Wydvd25lclR5cGUnXSA9IG9iamVjdC5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0Wydub3JtYWwnXSA9IHJlc3VsdFsnb3duZXInXS5nZXROb3JtYWwocmVzdWx0Wydwb2ludCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlciAoc2NyZWVuV2lkdGg6IG51bWJlciwgc2NyZWVuSGVpZ2h0OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJhbmRvTXVsdGlwbGllciA9IDAuNTtcblxuICAgICAgICBsZXQgY29sb3I6IENvbG9yLFxuICAgICAgICAgICAgcmFuZDogbnVtYmVyLFxuICAgICAgICAgICAgcmF5OiBSYXksXG4gICAgICAgICAgICByZ2JDb2xvcjoge1xuICAgICAgICAgICAgICAgIHJlZDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGdyZWVuOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgYmx1ZTogbnVtYmVyXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBzY3JlZW5XaWR0aDtcbiAgICAgICAgdGhpcy5zY3JlZW5IZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG5cbiAgICAgICAgY29sb3IgPSBuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKTtcblxuICAgICAgICBmb3IgKGxldCBpdGVyID0gMDsgaXRlciA8IHRoaXMucGl4ZWxTYW1wbGVzOyBpdGVyKyspIHtcbiAgICAgICAgICAgIHJhbmQgPSAwO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5waXhlbFNhbXBsZXMgPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXIgJSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmQgKz0gTWF0aC5yYW5kb20oKSAqIHJhbmRvTXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICB9ICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZCAtPSBNYXRoLnJhbmRvbSgpICogcmFuZG9NdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmF5ID0gbmV3IFJheShcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQZXJzcGVjdGl2ZVZlY3Rvcih4ICsgcmFuZCwgeSArIHJhbmQpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb2xvciA9IGNvbG9yLmFkZCh0aGlzLmdldENvbG9yKHJheSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29sb3IgPSBjb2xvci5kaXZpZGUodGhpcy5waXhlbFNhbXBsZXMpO1xuXG4gICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBpbiBjb2xvcikge1xuICAgICAgICAgICAgY29sb3JbY29tcG9uZW50XSA9IENvbG9yLnNSR0JFbmNvZGUoY29sb3JbY29tcG9uZW50XSk7XG4gICAgICAgIH1cblxuICAgICAgICByZ2JDb2xvciA9IENvbG9yLnRvUkdCKGNvbG9yKTtcblxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKFt4LCB5LCByZ2JDb2xvci5yZWQsIHJnYkNvbG9yLmdyZWVuLCByZ2JDb2xvci5ibHVlXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFNjZW5lIChzY2VuZTogU2NlbmUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIH1cbn1cblxub25tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcblxuICAgIGlmICh0eXBlb2YoZGF0YSkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoJ1snK2RhdGErJ10nKTtcbiAgICB9XG5cbiAgICBsZXQgdHJhY2VyID0gbmV3IFRyYWNlcigpO1xuXG4gICAgdHJhY2VyLnNldFNjZW5lKFxuICAgICAgICBuZXcgU2NlbmUoe1xuICAgICAgICAgICAgY2FtZXJhOiBuZXcgQ2FtZXJhKFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgLTY5OSksXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwLCAxKSxcbiAgICAgICAgICAgICAgICBkYXRhWzBdLFxuICAgICAgICAgICAgICAgIGRhdGFbMV1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBsaWdodHM6IFtcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJpY2FsTGlnaHQobmV3IFZlY3RvciAoMCwgNjQwLCAwKSwgMC43LCA1MClcbiAgICAgICAgICAgICAgICAgICAgLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKSkpLFxuICAgICAgICAgICAgICAgIG5ldyBTcGhlcmljYWxMaWdodChuZXcgVmVjdG9yICgwLCAwLCAwKSwgMC43LCAxNTApXG4gICAgICAgICAgICAgICAgICAgIC5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDIzNSwgMjAwKSkpKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG9iamVjdHM6IFtcbiAgICAgICAgICAgICAgICAvL25ldyBQbGFuZShuZXcgVmVjdG9yKDAsIDEsIDApLCAtNDAwKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigxMTUsIDExNSwgMTE1KSksIDApKSxcbiAgICAgICAgICAgICAgICAvLyBib3R0b20gcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIC03MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNTUsIDI1NSwgMjU1KSksIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gZnJvbnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIDcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvLyB0b3AgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDI1NSwgMjU1LCAyNTUpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL3JpZ2h0IHBsYW5lXG4gICAgICAgICAgICAgICAgbmV3IFBvbHlnb24oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoNzAwLCA3MDAsIC03MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgNzAwLCA3MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcig3OSwgMTY2LCAyNDIpKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICAvL2xlZnQgcGxhbmVcbiAgICAgICAgICAgICAgICBuZXcgUG9seWdvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCAtNzAwLCA3MDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKC03MDAsIDcwMCwgNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcigtNzAwLCA3MDAsIC03MDApXG4gICAgICAgICAgICAgICAgKS5zZXRNYXRlcmlhbChuZXcgTWF0ZXJpYWwobmV3IENvbG9yKG5ldyBSR0JDb2xvcigyNDUsIDEzMCwgMTMwKSksIDApLnNldExhbWJlcnRDb2VmZigxKSksXG4gICAgICAgICAgICAgICAgLy8gYmFjayBwbGFuZVxuICAgICAgICAgICAgICAgIG5ldyBQb2x5Z29uKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgLTcwMCwgLTcwMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoLTcwMCwgNzAwLCAtNzAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcig3MDAsIDcwMCwgLTcwMClcbiAgICAgICAgICAgICAgICApLnNldE1hdGVyaWFsKG5ldyBNYXRlcmlhbChuZXcgQ29sb3IobmV3IFJHQkNvbG9yKDAsIDAsIDApKSwgMCkuc2V0TGFtYmVydENvZWZmKDEpKSxcbiAgICAgICAgICAgICAgICBuZXcgU3BoZXJlKG5ldyBWZWN0b3IoLTI1MCwgLTUwMCwgNDUwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMCwgMCkpLCAxKSksXG4gICAgICAgICAgICAgICAgbmV3IFNwaGVyZShuZXcgVmVjdG9yKDI1MCwgLTUwMCwgNDAwKSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TWF0ZXJpYWwobmV3IE1hdGVyaWFsKG5ldyBDb2xvcihuZXcgUkdCQ29sb3IoMCwgMjU1LCAwKSksIDApKVxuICAgICAgICAgICAgXVxuICAgICAgICB9KVxuICAgICk7XG5cbiAgICB0cmFjZXIucmVuZGVyKGRhdGFbMF0sIGRhdGFbMV0sIGRhdGFbMl0sIGRhdGFbM10pO1xufTsiLCJleHBvcnQgY2xhc3MgVmVjdG9yIHtcbiAgICBwcml2YXRlIHg6IG51bWJlcjtcbiAgICBwcml2YXRlIHk6IG51bWJlcjtcbiAgICBwcml2YXRlIHo6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMueiA9IHo7XG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMgKCk6IHt4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgICAgICB6OiB0aGlzLnpcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXNBcnJheSAoKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdGhpcy54LFxuICAgICAgICAgICAgdGhpcy55LFxuICAgICAgICAgICAgdGhpcy56XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldExlbmd0aCAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiogMiArIHRoaXMueSAqKiAyICsgdGhpcy56ICoqIDIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYWRkICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHZlY3RvcjEueCArIHZlY3RvcjIueCwgdmVjdG9yMS55ICsgdmVjdG9yMi55LCB2ZWN0b3IxLnogKyB2ZWN0b3IyLnopO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc3Vic3RyYWN0ICh2ZWN0b3IxOiBWZWN0b3IsIHZlY3RvcjI6IFZlY3Rvcik6IFZlY3RvciB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHZlY3RvcjEueCAtIHZlY3RvcjIueCwgdmVjdG9yMS55IC0gdmVjdG9yMi55LCB2ZWN0b3IxLnogLSB2ZWN0b3IyLnopO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2NhbGVkICh2ZWN0b3I6IFZlY3RvciwgbXVsdGlwbGllcjogbnVtYmVyKTogVmVjdG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodmVjdG9yLnggKiBtdWx0aXBsaWVyLCB2ZWN0b3IueSAqIG11bHRpcGxpZXIsIHZlY3Rvci56ICogbXVsdGlwbGllcik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjcm9zcyAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHZlY3RvcjEueSAqIHZlY3RvcjIueiAtIHZlY3RvcjEueiAqIHZlY3RvcjIueSxcbiAgICAgICAgICAgIHZlY3RvcjEueiAqIHZlY3RvcjIueCAtIHZlY3RvcjEueCAqIHZlY3RvcjIueixcbiAgICAgICAgICAgIHZlY3RvcjEueCAqIHZlY3RvcjIueSAtIHZlY3RvcjEueSAqIHZlY3RvcjIueFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaW52ZXJzZSAodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLnNjYWxlZCh2ZWN0b3IsIC0xKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGRvdCAodmVjdG9yMTogVmVjdG9yLCB2ZWN0b3IyOiBWZWN0b3IpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi54ICsgdmVjdG9yMS55ICogdmVjdG9yMi55ICsgdmVjdG9yMS56ICogdmVjdG9yMi56O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgbm9ybWFsaXplZCAodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgICAgICByZXR1cm4gVmVjdG9yLnNjYWxlZCh2ZWN0b3IsIDEgLyB2ZWN0b3IuZ2V0TGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVmbGVjdCAodmVjdG9yOiBWZWN0b3IsIG5vcm1hbDogVmVjdG9yKTogVmVjdG9yIHtcbiAgICAgICAgbGV0IGYgPSAyICogVmVjdG9yLmRvdCh2ZWN0b3IsIG5vcm1hbCk7XG5cbiAgICAgICAgcmV0dXJuIFZlY3Rvci5zdWJzdHJhY3QoXG4gICAgICAgICAgICB2ZWN0b3IsXG4gICAgICAgICAgICBWZWN0b3Iuc2NhbGVkKG5vcm1hbCwgZilcbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=
